"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1163],{69931:(e,t,r)=>{r.d(t,{A:()=>eq,Fo:()=>eD,RV:()=>m,Zi:()=>em,cQ:()=>ep,f7:()=>eA,o$:()=>eQ,rL:()=>b,zL:()=>eM});var n=r(19086),a=r.n(n),i=r(89539),o=r(84876),s=r(96540),l=r(11924),c=r(69101),d=r(35388),u=r(67806),h=r(40961);function f(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r){var n;return n=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===p(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=(0,s.createContext)(null),m=()=>{var e=(0,s.useContext)(g);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},b=d.wE;function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=function(){},w=e=>(null==e?void 0:e.constructor.name)==="DataTransfer",C=d.qx?s.useLayoutEffect:s.useEffect,x=["node"];function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var P={subtree:!0,childList:!0,characterData:!0},S=d.Ni?e=>{var{node:t}=e,r=f(e,x);if(!d.Ni)return null;var n=m(),a=function(){var e=(0,s.useRef)(!1);return(0,s.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}(),[i]=(0,s.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,a=!1,i=null,o=null,s=null,l=0,u=!1,h=()=>{var e=d.hK.get(t);if(d.hK.delete(t),e){var{selection:r}=t,n=(0,d.zh)(t,e);!n||r&&c.Q6.equals(n,r)||c.gB.select(t,n)}},f=()=>{var e=d.FT.get(t);if(d.FT.delete(t),e){if(e.at){var r=c.bR.isPoint(e.at)?(0,d.CN)(t,e.at):(0,d.zh)(t,e.at);if(!r)return;var n=c.KE.range(t,r);t.selection&&c.Q6.equals(t.selection,n)||c.gB.select(t,r)}e.run()}},p=()=>{if(o&&(clearTimeout(o),o=null),s&&(clearTimeout(s),s=null),!C()&&!E()){h();return}a||(a=!0,setTimeout(()=>a=!1)),E()&&(a="action");var e=t.selection&&c.KE.rangeRef(t,t.selection,{affinity:"forward"});d.NH.set(t,t.marks),y("flush",d.FT.get(t),d.tv.get(t));for(var i=C();l=null===(p=d.tv.get(t))||void 0===p?void 0:p[0];){var l,p,v,g=d.fe.get(t);void 0!==g&&(d.fe.delete(t),t.marks=g),g&&!1===u&&(u=null);var m=(0,d.BA)(l);t.selection&&c.Q6.equals(t.selection,m)||c.gB.select(t,m),l.diff.text?c.KE.insertText(t,l.diff.text):c.KE.deleteFragment(t),d.tv.set(t,null===(v=d.tv.get(t))||void 0===v?void 0:v.filter(e=>{var{id:t}=e;return t!==l.id})),(0,d.sh)(t,l)||(i=!1,d.FT.delete(t),d.NH.delete(t),a="action",d.hK.delete(t),r.cancel(),n.cancel(),null==e||e.unref())}var b=null==e?void 0:e.unref();if(!b||d.hK.get(t)||t.selection&&c.Q6.equals(b,t.selection)||c.gB.select(t,b),E()){f();return}i&&r(),r.flush(),n.flush(),h();var k=d.NH.get(t);d.NH.delete(t),void 0!==k&&(t.marks=k,t.onChange())},v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=d.PH.get(t);if(r){if(C()||e){r.style.display="none";return}r.style.removeProperty("display")}},g=(e,r)=>{var n,a=null!==(n=d.tv.get(t))&&void 0!==n?n:[];d.tv.set(t,a);var i=c.bP.leaf(t,e),o=a.findIndex(t=>c.wA.equals(t.path,e));if(o<0){(0,d.y1)(i.text,r)&&a.push({path:e,diff:r,id:l++}),v();return}var s=(0,d.eX)(i.text,a[o].diff,r);if(!s){a.splice(o,1),v();return}a[o]=k(k({},a[o]),{},{diff:s})},m=function(e){var{at:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=!1,d.hK.delete(t),r.cancel(),n.cancel(),E()&&p(),d.FT.set(t,{at:a,run:e}),s=setTimeout(p)},E=()=>!!d.FT.get(t),C=()=>{var e;return!!(null!==(e=d.tv.get(t))&&void 0!==e&&e.length)},x=e=>{d.hK.set(t,e),o&&(clearTimeout(o),o=null);var{selection:r}=t;if(e){var n=!r||!c.wA.equals(r.anchor.path,e.anchor.path),a=!r||!c.wA.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(n&&u||a)&&(u=!1),(n||C())&&(o=setTimeout(p,200))}},O=()=>{E()||(s=setTimeout(p))};return{flush:p,scheduleFlush:O,hasPendingDiffs:C,hasPendingAction:E,hasPendingChanges:()=>E()||C(),isFlushing:()=>a,handleUserSelect:x,handleCompositionEnd:e=>{i&&clearTimeout(i),i=setTimeout(()=>{d.BG.set(t,!1),p()},25)},handleCompositionStart:e=>{d.BG.set(t,!0),i&&(clearTimeout(i),i=null)},handleDOMBeforeInput:e=>{if(o&&(clearTimeout(o),o=null),!d.eA.get(t)){var{inputType:r}=e,n=null,a=e.dataTransfer||e.data||void 0;!1!==u&&"insertText"!==r&&"insertCompositionText"!==r&&(u=!1);var[i]=e.getTargetRanges();i&&(n=b.toSlateRange(t,i,{exactMatch:!1,suppressThrow:!0}));var s=b.getWindow(t).getSelection();if(!n&&s&&(i=s,n=b.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),n=null!==(j=n)&&void 0!==j?j:t.selection){var l=!0;if(r.startsWith("delete")){var h=r.endsWith("Backward")?"backward":"forward",[f,p]=c.Q6.edges(n),[v,E]=c.KE.leaf(t,f.path);if(c.Q6.isExpanded(n)&&v.text.length===f.offset&&0===p.offset){var y=c.KE.next(t,{at:f.path,match:c.EY.isText});y&&c.wA.equals(y[1],p.path)&&("backward"===h?(n={anchor:p,focus:p},f=p,[v,E]=y):(n={anchor:f,focus:f},p=f))}var C={text:"",start:f.offset,end:p.offset},P=d.tv.get(t),S=null==P?void 0:P.find(e=>c.wA.equals(e.path,E)),D=S?[S.diff,C]:[C];if(0===(0,d.dM)(v.text,...D).length&&(l=!1),c.Q6.isExpanded(n)){if(l&&c.wA.equals(n.anchor.path,n.focus.path)){var B={path:n.anchor.path,offset:f.offset};return x(c.KE.range(t,B,B)),g(n.anchor.path,{text:"",end:p.offset,start:f.offset})}return m(()=>c.KE.deleteFragment(t,{direction:h}),{at:n})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return m(()=>c.KE.deleteFragment(t),{at:n});case"deleteContent":case"deleteContentForward":var{anchor:T}=n;if(l&&c.Q6.isCollapsed(n)){var K=c.bP.leaf(t,T.path);if(T.offset<K.text.length)return g(T.path,{text:"",start:T.offset,end:T.offset+1})}return m(()=>c.KE.deleteForward(t),{at:n});case"deleteContentBackward":var j,F,{anchor:I}=n,R=(0,d.T4)(i)?i.isCollapsed:!!(null!==(F=i)&&void 0!==F&&F.collapsed);if(l&&R&&c.Q6.isCollapsed(n)&&I.offset>0)return g(I.path,{text:"",start:I.offset-1,end:I.offset});return m(()=>c.KE.deleteBackward(t),{at:n});case"deleteEntireSoftLine":return m(()=>{c.KE.deleteBackward(t,{unit:"line"}),c.KE.deleteForward(t,{unit:"line"})},{at:n});case"deleteHardLineBackward":return m(()=>c.KE.deleteBackward(t,{unit:"block"}),{at:n});case"deleteSoftLineBackward":return m(()=>c.KE.deleteBackward(t,{unit:"line"}),{at:n});case"deleteHardLineForward":return m(()=>c.KE.deleteForward(t,{unit:"block"}),{at:n});case"deleteSoftLineForward":return m(()=>c.KE.deleteForward(t,{unit:"line"}),{at:n});case"deleteWordBackward":return m(()=>c.KE.deleteBackward(t,{unit:"word"}),{at:n});case"deleteWordForward":return m(()=>c.KE.deleteForward(t,{unit:"word"}),{at:n});case"insertLineBreak":return m(()=>c.KE.insertSoftBreak(t),{at:n});case"insertParagraph":return m(()=>c.KE.insertBreak(t),{at:n});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if(w(a))return m(()=>b.insertData(t,a),{at:n});var L=null!=a?a:"";if(d.fe.get(t)&&(L=L.replace("\uFEFF","")),"insertText"===r&&/.*\n.*\n$/.test(L)&&(L=L.slice(0,-1)),L.includes("\n"))return m(()=>{var e=L.split("\n");e.forEach((r,n)=>{r&&c.KE.insertText(t,r),n!==e.length-1&&c.KE.insertSoftBreak(t)})},{at:n});if(c.wA.equals(n.anchor.path,n.focus.path)){var[M,N]=c.Q6.edges(n),W={start:M.offset,end:N.offset,text:L};if(L&&u&&"insertCompositionText"===r){var q=u.start+u.text.search(/\S|$/);W.start+W.text.search(/\S|$/)===q+1&&W.end===u.start+u.text.length?(W.start-=1,u=null,O()):u=!1}else u="insertText"===r&&(null===u?W:!!(u&&c.Q6.isCollapsed(n))&&u.end+u.text.length===M.offset&&k(k({},u),{},{text:u.text+L}));if(l){var A=t.selection;if(g(M.path,W),A){var Q={path:M.path,offset:M.offset+L.length};m(()=>{c.gB.select(t,{anchor:Q,focus:Q})},{at:Q})}return}}return m(()=>c.KE.insertText(t,L),{at:n})}}}},handleKeyDown:e=>{C()||(v(!0),setTimeout(v))},handleDomMutations:e=>{if(!(C()||E())&&e.some(r=>(0,d.Yc)(t,r,e))){var r;null===(r=d.Bo.get(t))||void 0===r||r()}},handleInput:()=>{(E()||!C())&&p()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:n},r)));return!function(e,t,r){var[n]=(0,s.useState)(()=>new MutationObserver(t));C(()=>{n.takeRecords()}),(0,s.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()},[n,e,r])}(t,i.handleDomMutations,P),d.P5.set(n,i.scheduleFlush),a&&i.flush(),i}:()=>null;function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var B=e=>{var{isLast:t,leaf:r,parent:n,text:a}=e,i=m(),o=b.findPath(i,a),l=c.wA.parent(o),u=!!r[d.nW];return i.isVoid(n)?s.createElement(j,{length:c.bP.string(n).length}):""!==r.text||n.children[n.children.length-1]!==a||i.isInline(n)||""!==c.KE.string(i,l)?""===r.text?s.createElement(j,{isMarkPlaceholder:u}):t&&"\n"===r.text.slice(-1)?s.createElement(T,{isTrailing:!0,text:r.text}):s.createElement(T,{text:r.text}):s.createElement(j,{isLineBreak:!0,isMarkPlaceholder:u})},T=e=>{var{text:t,isTrailing:r=!1}=e,n=(0,s.useRef)(null),a=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[i]=(0,s.useState)(a);return C(()=>{var e=a();n.current&&n.current.textContent!==e&&(n.current.textContent=e)}),s.createElement(K,{ref:n},i)},K=(0,s.memo)((0,s.forwardRef)((e,t)=>s.createElement("span",{"data-slate-string":!0,ref:t},e.children))),j=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,a={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(a["data-slate-mark-placeholder"]=!0),s.createElement("span",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},a),d.Ni&&r?null:"\uFEFF",r?s.createElement("br",null):null)};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var R=d.Ni?300:0;function L(e){e.current&&(clearTimeout(e.current),e.current=null)}var M=e=>s.createElement(W,I({},e)),N=s.memo(e=>{var{leaf:t,isLast:r,text:n,parent:a,renderPlaceholder:i,renderLeaf:o=M,leafPosition:l}=e,c=m(),h=(0,s.useRef)(null),f=(0,s.useRef)(null),[p,v]=(0,s.useState)(!1),g=(0,s.useRef)(null),b=(0,s.useCallback)(e=>{if(!function(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}(h,null==e),null==e){var r;d.PH.delete(c),null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,null)}else{if(d.PH.set(c,e),!h.current){var n=window.ResizeObserver||u.tb;h.current=new n(()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)})}h.current.observe(e),f.current=e}},[f,t,c]),E=s.createElement(B,{isLast:r,leaf:t,parent:a,text:n}),k=!!t[d.Rx];if((0,s.useEffect)(()=>(k?g.current||(g.current=setTimeout(()=>{v(!0),g.current=null},R)):(L(g),v(!1)),()=>L(g)),[k,v]),k&&p){var y={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:d._y?"inherit":void 0},contentEditable:!1,ref:b}};E=s.createElement(s.Fragment,null,E,i(y))}return o({attributes:{"data-slate-leaf":!0},children:E,leaf:t,text:n,leafPosition:l})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&c.EY.equals(t.leaf,e.leaf)&&t.leaf[d.Rx]===e.leaf[d.Rx]),W=e=>{var{attributes:t,children:r}=e;return s.createElement("span",I({},t),r)};function q(e,t){var r,[,n]=(0,s.useReducer)(e=>e+1,0),a=(0,s.useRef)(),i=(0,s.useRef)(()=>null),o=(0,s.useRef)(null);try{if(e!==i.current||a.current){var l=e();r=t(o.current,l)?o.current:l}else r=o.current}catch(e){throw a.current&&e instanceof Error&&(e.message+="\nThe error may be correlated with this previous error:\n".concat(a.current.stack,"\n\n")),e}return i.current=e,o.current=r,a.current=void 0,[r,(0,s.useCallback)(()=>{try{var e=i.current();if(t(o.current,e))return;o.current=e}catch(e){e instanceof Error?a.current=e:a.current=Error(String(e))}n()},[])]}var A=(0,s.createContext)({}),Q=(e,t)=>{var r=m(),{decorate:n,addEventListener:a}=(0,s.useContext)(A),[i,o]=q(()=>{var t=b.findPath(r,e);return n([e,t])},c.EY.isText(e)?d.xd:d.wC);return C(()=>{var e=a(o);return o(),e},[a,o]),(0,s.useMemo)(()=>[...i,...t],[i,t])},z=e=>{var t=(0,s.useRef)(new Set),r=(0,s.useRef)(e);C(()=>{r.current=e,t.current.forEach(e=>e())},[e]);var n=(0,s.useCallback)(e=>r.current(e),[]),a=(0,s.useCallback)(e=>(t.current.add(e),()=>{t.current.delete(e)}),[]);return(0,s.useMemo)(()=>({decorate:n,addEventListener:a}),[n,a])};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _=e=>s.createElement(Y,U({},e)),V=s.memo(e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:i,renderText:o=_,text:l}=e,u=m(),h=(0,s.useRef)(null),f=Q(l,t),p=c.EY.decorations(l,f),v=b.findKey(u,l),g=[],E=0;E<p.length;E++){var{leaf:k,position:y}=p[E];g.push(s.createElement(N,{isLast:r&&E===p.length-1,key:"".concat(v.id,"-").concat(E),renderPlaceholder:a,leaf:k,leafPosition:y,text:l,parent:n,renderLeaf:i}))}var w=(0,s.useCallback)(e=>{var t=d.b0.get(u);e?(null==t||t.set(v,e),d._8.set(l,e),d.wc.set(e,l)):(null==t||t.delete(v),d._8.delete(l),h.current&&d.wc.delete(h.current)),h.current=e},[h,u,v,l]);return o({text:l,children:g,attributes:{"data-slate-node":"text",ref:w}})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderText===e.renderText&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&(0,d.xd)(t.decorations,e.decorations)),Y=e=>{var{attributes:t,children:r}=e;return s.createElement("span",U({},t),r)};function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var G=e=>s.createElement(Z,$({},e)),J=s.memo(e=>{var{decorations:t,element:r,renderElement:n=G,renderChunk:i,renderPlaceholder:o,renderLeaf:l,renderText:u}=e,h=m(),f=ep(),p=h.isInline(r),v=Q(r,t),g=b.findKey(h,r),E=(0,s.useCallback)(e=>{var t=d.b0.get(h);e?(null==t||t.set(g,e),d._8.set(r,e),d.wc.set(e,r)):(null==t||t.delete(g),d._8.delete(r))},[h,g,r]),k=eu({decorations:v,node:r,renderElement:n,renderChunk:i,renderPlaceholder:o,renderLeaf:l,renderText:u}),y={"data-slate-node":"element",ref:E};if(p&&(y["data-slate-inline"]=!0),!p&&c.KE.hasInlines(h,r)){var w=c.bP.string(r),C=a()(w);"rtl"===C&&(y.dir=C)}if(c.KE.isVoid(h,r)){y["data-slate-void"]=!0,!f&&p&&(y.contentEditable=!1);var[[x]]=c.bP.texts(r);k=s.createElement(p?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},s.createElement(V,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:x})),d.MB.set(x,0),d.WQ.set(x,r)}return n({attributes:y,children:k,element:r})},(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&e.renderText===t.renderText&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&(0,d.wC)(e.decorations,t.decorations)),Z=e=>{var{attributes:t,children:r,element:n}=e,a=m().isInline(n)?"span":"div";return s.createElement(a,$($({},t),{},{style:{position:"relative"}}),r)};class ee{constructor(e,t){var{chunkSize:r,debug:n}=t;v(this,"root",void 0),v(this,"chunkSize",void 0),v(this,"debug",void 0),v(this,"reachedEnd",void 0),v(this,"pointerChunk",void 0),v(this,"pointerIndex",void 0),v(this,"pointerIndexStack",void 0),v(this,"cachedPointerNode",void 0),this.root=e,this.chunkSize=r,this.debug=null!=n&&n,this.pointerChunk=e,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;){if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}if("root"===this.pointerChunk.type)return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;){if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}if("root"===this.pointerChunk.type){this.pointerIndex=-1;return}this.exitChunk()}this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(e){this.returnToPreviousLeaf(),this.insertAfter(e),this.readLeaf()}insertAfter(e){if(0!==e.length){for(var t=0,r=0;"chunk"===this.pointerChunk.type&&this.pointerIndex===this.pointerSiblings.length-1;){var n=Math.min(this.chunkSize-this.pointerSiblings.length,e.length);if(n>0){var a=e.splice(0,n);this.rawInsertAfter(a,t)}this.exitChunk(),t++}if(0!==e.length){var i=this.savePointer(),o=null;if(this.readLeaf())for(;"chunk"===this.pointerChunk.type&&0===this.pointerIndex;){var s=Math.min(this.chunkSize-this.pointerSiblings.length,e.length);if(s>0){var l=e.splice(-s,s);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(l,r),o||(o=this.savePointer())}this.exitChunk(),r++}this.restorePointer(i);var c=Math.max(t,r);this.rawInsertAfter(e,c),o&&this.restorePointer(o),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,0===this.pointerSiblings.length&&"chunk"===this.pointerChunk.type?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var e=this.pointerChunk;"chunk"===e.type;e=e.parent)this.root.modifiedChunks.add(e)}get atStart(){return"root"===this.pointerChunk.type&&-1===this.pointerIndex}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||-1===this.pointerIndex?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(void 0!==this.cachedPointerNode)return this.cachedPointerNode;var e=this.getPointerNode();return this.cachedPointerNode=e,e}getChunkPath(e){for(var t=[],r=e;"chunk"===r.type;r=r.parent){var n=r.parent.children.indexOf(r);if(-1===n)return null;t.unshift(n)}return t}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(e){if("start"===e){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:t,node:r}=e,n=t.children.indexOf(r);if(-1===n)throw Error("Cannot restore point because saved node is no longer in saved chunk");var a=this.getChunkPath(t);if(!a)throw Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=t,this.pointerIndex=n,this.pointerIndexStack=a,this.reachedEnd=!1,this.cachedPointerNode=r,this.validateState()}enterChunk(e){var t;if((null===(t=this.pointerNode)||void 0===t?void 0:t.type)!=="chunk")throw Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=e?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),0===this.pointerChunk.children.length)throw Error("Cannot enter empty chunk")}enterChunkUntilLeaf(e){for(;(null===(t=this.pointerNode)||void 0===t?void 0:t.type)==="chunk";){var t;this.enterChunk(e)}}exitChunk(){if("root"===this.pointerChunk.type)throw Error("Cannot exit root");var e=this.pointerChunk;this.pointerChunk=e.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(e,t){if(0!==e.length){for(var r=(e,t,n)=>{if(1===n)return e;for(var a=[],i=0;i<this.chunkSize;i++){var o=e.slice(i*n,(i+1)*n);if(0===o.length)break;var s={type:"chunk",key:new d.Uz,parent:t,children:[]};s.children=r(o,s,n/this.chunkSize),a.push(s)}return a},n=this.pointerSiblings.length+e.length,a=0,i=this.chunkSize;i<n;i*=this.chunkSize)a++;var o=Math.max(a,t),s=Math.pow(this.chunkSize,o),l=r(e,this.pointerChunk,s);this.pointerSiblings.splice(this.pointerIndex+1,0,...l),this.pointerIndex+=l.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var e=t=>{if("chunk"===t.type){var{parent:r,children:n}=t;if(!r.children.includes(t))throw Error("Debug: Chunk ".concat(t.key.id," has an incorrect parent property"));n.forEach(e)}};if(this.root.children.forEach(e),void 0!==this.cachedPointerNode&&this.cachedPointerNode!==this.getPointerNode())throw Error("Debug: The cached pointer is incorrect and has not been invalidated");var t=this.getChunkPath(this.pointerChunk);if(!t)throw Error("Debug: The pointer chunk is not connected to the root");if(!c.wA.equals(this.pointerIndexStack,t))throw Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(t.join(", "),"]"))}}}class et{constructor(e,t){v(this,"editor",void 0),v(this,"children",void 0),v(this,"cachedKeys",void 0),v(this,"pointerIndex",void 0),this.editor=e,this.children=t,this.cachedKeys=Array(t.length),this.pointerIndex=0}read(e){if(1===e)return[this.children[this.pointerIndex++]];var t=this.remaining(e);return this.pointerIndex+=e,t}remaining(e){return void 0===e?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+e)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(e,t){var r=this.children.indexOf(e,this.pointerIndex);if(r>-1)return r-this.pointerIndex;for(var n=this.pointerIndex;n<this.children.length;n++){var a=this.children[n];if(this.findKey(a,n)===t)return n-this.pointerIndex}return -1}toChunkLeaves(e,t){return e.map((e,r)=>({type:"leaf",node:e,key:this.findKey(e,t+r),index:t+r}))}findKey(e,t){var r=this.cachedKeys[t];if(r)return r;var n=b.findKey(this.editor,e);return this.cachedKeys[t]=n,n}}var er=(e,t)=>{var r,{chunkTree:n,children:a,chunkSize:i,rerenderChildren:o=[],onInsert:s,onUpdate:l,onIndexChange:c,debug:d}=t;n.modifiedChunks.clear();for(var u=new ee(n,{chunkSize:i,debug:d}),h=new et(e,a);r=u.readLeaf();)if(function(){var e=h.lookAhead(r.node,r.key),t=e>0&&n.movedNodeKeys.has(r.key);if(-1===e||t)return u.remove(),1;var a=h.pointerIndex,i=h.read(e+1),d=i.pop();if(i.length){var f=h.toChunkLeaves(i,a);u.insertBefore(f),i.forEach((e,t)=>{null==s||s(e,a+t)})}var p=h.pointerIndex-1;r.node!==d&&(r.node=d,u.invalidateChunk(),null==l||l(d,p)),r.index!==p&&(r.index=p,null==c||c(d,p)),o.includes(p)&&u.invalidateChunk()}())continue;if(!h.reachedEnd){var f=h.remaining(),p=h.toChunkLeaves(f,h.pointerIndex);u.returnToPreviousLeaf(),u.insertAfter(p),f.forEach((e,t)=>{null==s||s(e,h.pointerIndex+t)})}n.movedNodeKeys.clear()};function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ea=new WeakMap,ei=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=b.findKey(e,t),a=ea.get(n);return a||(a={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},ea.set(n,a)),r.reconcile&&er(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({chunkTree:a,children:t.children},r.reconcile)),a},eo=e=>{var{children:t}=e;return t},es=e=>{var{root:t,ancestor:r,renderElement:n,renderChunk:a=eo}=e;return r.children.map(e=>{if("chunk"===e.type){var i=e.key.id,o=a({highest:r===t,lowest:e.children.some(e=>"leaf"===e.type),attributes:{"data-slate-chunk":!0},children:s.createElement(el,{root:t,ancestor:e,renderElement:n,renderChunk:a})});return s.createElement(s.Fragment,{key:i},o)}return n(e.node,e.index,e.key)})},el=s.memo(es,(e,t)=>e.root===t.root&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&!t.root.modifiedChunks.has(t.ancestor)),ec=(0,s.createContext)(null),ed=()=>(0,s.useContext)(ec),eu=e=>{var{decorations:t,node:r,renderElement:n,renderChunk:a,renderPlaceholder:i,renderText:o,renderLeaf:l}=e,u=m();d.eA.set(u,!1);var h=!c.KE.isEditor(r)&&c.Hg.isElement(r)&&!u.isInline(r)&&c.KE.hasInlines(u,r)?null:u.getChunkSize(r),f=!!h,{decorationsByChild:p,childrenToRedecorate:v}=eh(u,r,t);f||r.children.forEach((e,t)=>{d.MB.set(e,t),d.WQ.set(e,r)});var g=(0,s.useCallback)((e,t,r)=>{var c=null!=r?r:b.findKey(u,e);return s.createElement(ec.Provider,{key:"provider-".concat(c.id),value:e},s.createElement(J,{decorations:p[t],element:e,key:c.id,renderElement:n,renderChunk:a,renderPlaceholder:i,renderLeaf:l,renderText:o}))},[u,p,n,a,i,l,o]),E=(e,t)=>{var n=b.findKey(u,e);return s.createElement(V,{decorations:p[t],key:n.id,isLast:t===r.children.length-1,parent:r,renderPlaceholder:i,renderLeaf:l,renderText:o,text:e})};if(!f)return r.children.map((e,t)=>c.EY.isText(e)?E(e,t):g(e,t));var k=ei(u,r,{reconcile:{chunkSize:h,rerenderChildren:v,onInsert:(e,t)=>{d.MB.set(e,t),d.WQ.set(e,r)},onUpdate:(e,t)=>{d.MB.set(e,t),d.WQ.set(e,r)},onIndexChange:(e,t)=>{d.MB.set(e,t)}}});return s.createElement(es,{root:k,ancestor:k,renderElement:g,renderChunk:a})},eh=(e,t,r)=>{var n=(0,d.L6)(e,t,r),a=(0,s.useRef)(n).current,i=[];a.length=n.length;for(var o=0;o<n.length;o++){var l,c=n[o],u=null!==(l=a[o])&&void 0!==l?l:null;(0,d.wC)(u,c)||(a[o]=c,i.push(o))}return{decorationsByChild:a,childrenToRedecorate:i}},ef=(0,s.createContext)(!1),ep=()=>(0,s.useContext)(ef),ev=(0,s.createContext)({}),eg=(e,t)=>e===t,em=()=>{var{addEventListener:e}=(0,s.useContext)(ev),[,t]=(0,s.useReducer)(e=>e+1,0);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");return C(()=>e(t),[e]),m()},eb=(new WeakMap,(e,t)=>{var r=[],n=()=>{r=[]};return{registerMutations:n=>{if(t.current){var a=n.filter(t=>(0,d.Yc)(e,t,n));r.push(...a)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),n())},clear:n}}),eE={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class ek extends s.Component{constructor(){super(...arguments),v(this,"context",null),v(this,"manager",null),v(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,eE)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=eb(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,n,a=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=a&&a.length&&(null===(n=this.manager)||void 0===n||n.registerMutations(a)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}v(ek,"contextType",g);var ey=d.Ni?ek:e=>{var{children:t}=e;return s.createElement(s.Fragment,null,t)},ew=(0,s.createContext)(!1),eC=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],ex=["text"];function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eS=e=>s.createElement(s.Fragment,null,eu(e)),eD=(0,s.forwardRef)((e,t)=>{var r=(0,s.useCallback)(e=>s.createElement(eB,eP({},e)),[]),{autoFocus:n,decorate:l=eT,onDOMBeforeInput:u,placeholder:h,readOnly:p=!1,renderElement:v,renderChunk:g,renderLeaf:E,renderText:k,renderPlaceholder:y=r,scrollSelectionIntoView:w=eK,style:x={},as:O="div",disableDefaultStyles:P=!1}=e,D=f(e,eC),B=em(),[T,K]=(0,s.useState)(!1),j=(0,s.useRef)(null),F=(0,s.useRef)([]),[I,R]=(0,s.useState)(),L=(0,s.useRef)(!1),{onUserInput:M,receivedUserInput:N}=function(){var e=m(),t=(0,s.useRef)(!1),r=(0,s.useRef)(0),n=(0,s.useCallback)(()=>{if(!t.current){t.current=!0;var n=b.getWindow(e);n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame(()=>{t.current=!1})}},[e]);return(0,s.useEffect)(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:t,onUserInput:n}}(),[,W]=(0,s.useReducer)(e=>e+1,0);d.Bo.set(B,W),d.dY.set(B,p);var q=(0,s.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,s.useEffect)(()=>{j.current&&n&&j.current.focus()},[n]);var Q=(0,s.useRef)(),H=(0,s.useMemo)(()=>(0,o.A)(()=>{if(d.eA.get(B)){H();return}var e=b.toDOMNode(B,B).getRootNode();if(!L.current&&d._y&&e instanceof ShadowRoot){L.current=!0,(0,d.bq)()?document.execCommand("indent"):c.gB.deselect(B),L.current=!1;return}var t=Q.current;if((d.Ni||!b.isComposing(B))&&(!q.isUpdatingSelection||null!=t&&t.isFlushing())&&!q.isDraggingInternally){var r=b.findDocumentOrShadowRoot(B),{activeElement:n}=r,a=b.toDOMNode(B,B),i=(0,d.Lo)(r);if(n===a?(q.latestElement=n,d.Rf.set(B,!0)):d.Rf.delete(B),!i)return c.gB.deselect(B);var{anchorNode:o,focusNode:s}=i,l=b.hasEditableTarget(B,o)||b.isTargetInsideNonReadonlyVoid(B,o),u=b.hasTarget(B,s);if(l&&u){var h=b.toSlateRange(B,i,{exactMatch:!1,suppressThrow:!0});h&&(b.isComposing(B)||null!=t&&t.hasPendingChanges()||null!=t&&t.isFlushing()?null==t||t.handleUserSelect(h):c.gB.select(B,h))}!p||l&&u||c.gB.deselect(B)}},100),[B,p,q]),U=(0,s.useMemo)(()=>(0,i.A)(H,0),[H]);Q.current=S({node:j,onDOMSelectionChange:H,scheduleOnDOMSelectionChange:U}),C(()=>{j.current&&(r=(0,d.j$)(j.current))?(d.ty.set(B,r),d.Vh.set(B,j.current),d._8.set(B,j.current),d.wc.set(j.current,B)):d._8.delete(B);var e,t,r,{selection:n}=B,a=b.findDocumentOrShadowRoot(B),i=(0,d.Lo)(a);if(!(!i||!b.isFocused(B)||null!==(e=Q.current)&&void 0!==e&&e.hasPendingAction())){var o=e=>{var t="None"!==i.type;if(n||t){var r=i.focusNode;if(d.$M&&i.rangeCount>1){var a=i.getRangeAt(0),o=i.getRangeAt(i.rangeCount-1);u=a.startContainer===r?o.endContainer:a.startContainer}else u=i.anchorNode;var s=d.Vh.get(B),l=!1;if(s.contains(u)&&s.contains(r)&&(l=!0),t&&l&&n&&!e){var u,h,f=b.toSlateRange(B,i,{exactMatch:!0,suppressThrow:!0});if(f&&c.Q6.equals(f,n)&&(!q.hasMarkPlaceholder||null!==(h=u)&&void 0!==h&&null!==(h=h.parentElement)&&void 0!==h&&h.hasAttribute("data-slate-mark-placeholder")))return}if(n&&!b.hasRange(B,n)){B.selection=b.toSlateRange(B,i,{exactMatch:!1,suppressThrow:!0});return}q.isUpdatingSelection=!0;var p=null;try{p=n&&b.toDOMRange(B,n)}catch(e){}return p?(b.isComposing(B)&&!d.Ni?i.collapseToEnd():c.Q6.isBackward(n)?i.setBaseAndExtent(p.endContainer,p.endOffset,p.startContainer,p.startOffset):i.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),w(B,p)):i.removeAllRanges(),p}};i.rangeCount<=1&&o();var s=(null===(t=Q.current)||void 0===t?void 0:t.isFlushing())==="action";if(!d.Ni||!s){setTimeout(()=>{q.isUpdatingSelection=!1});return}var l=null,u=requestAnimationFrame(()=>{if(s){var e=e=>{try{b.toDOMNode(B,B).focus(),o(e)}catch(e){}};e(),l=setTimeout(()=>{e(!0),q.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(u),l&&clearTimeout(l)}}});var _=(0,s.useCallback)(e=>{eR(B,e);var t=b.toDOMNode(B,B).getRootNode();if(null!=L&&L.current&&d._y&&t instanceof ShadowRoot){var r=e.getTargetRanges()[0],n=new window.Range;n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset);var a=b.toSlateRange(B,n,{exactMatch:!1,suppressThrow:!1});c.gB.select(B,a),e.preventDefault(),e.stopImmediatePropagation();return}if(M(),!p&&b.hasEditableTarget(B,e.target)&&!eI(e,u)){if(Q.current)return Q.current.handleDOMBeforeInput(e);U.flush(),H.flush();var{selection:i}=B,{inputType:o}=e,s=e.dataTransfer||e.data||void 0,l="insertCompositionText"===o||"deleteCompositionText"===o;if(l&&b.isComposing(B))return;var h=!1;if("insertText"===o&&i&&c.Q6.isCollapsed(i)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==i.anchor.offset&&(h=!0,B.marks&&(h=!1),!d.eA.get(B))){var{anchor:f}=i,[v,g]=b.toDOMPoint(B,f),m=null===(y=v.parentElement)||void 0===y?void 0:y.closest("a"),E=b.getWindow(B);if(h&&m&&b.hasDOMNode(B,m)){var k,y,w,C,x=null==E?void 0:E.document.createTreeWalker(m,NodeFilter.SHOW_TEXT).lastChild();x===v&&(null===(C=x.textContent)||void 0===C?void 0:C.length)===g&&(h=!1)}if(h&&v.parentElement&&(null==E||null===(w=E.getComputedStyle(v.parentElement))||void 0===w?void 0:w.whiteSpace)==="pre"){var O=c.KE.above(B,{at:f.path,match:e=>c.Hg.isElement(e)&&c.KE.isBlock(B,e)});O&&c.bP.string(O[0]).includes("	")&&(h=!1)}}if((!o.startsWith("delete")||o.startsWith("deleteBy"))&&!d.eA.get(B)){var[P]=e.getTargetRanges();if(P){var S=b.toSlateRange(B,P,{exactMatch:!1,suppressThrow:!1});if(!i||!c.Q6.equals(i,S)){h=!1;var D=!l&&B.selection&&c.KE.rangeRef(B,B.selection);c.gB.select(B,S),D&&d.zk.set(B,D)}}}if(l)return;if(h||e.preventDefault(),i&&c.Q6.isExpanded(i)&&o.startsWith("delete")){var T=o.endsWith("Backward")?"backward":"forward";c.KE.deleteFragment(B,{direction:T});return}switch(o){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":c.KE.deleteFragment(B);break;case"deleteContent":case"deleteContentForward":c.KE.deleteForward(B);break;case"deleteContentBackward":c.KE.deleteBackward(B);break;case"deleteEntireSoftLine":c.KE.deleteBackward(B,{unit:"line"}),c.KE.deleteForward(B,{unit:"line"});break;case"deleteHardLineBackward":c.KE.deleteBackward(B,{unit:"block"});break;case"deleteSoftLineBackward":c.KE.deleteBackward(B,{unit:"line"});break;case"deleteHardLineForward":c.KE.deleteForward(B,{unit:"block"});break;case"deleteSoftLineForward":c.KE.deleteForward(B,{unit:"line"});break;case"deleteWordBackward":c.KE.deleteBackward(B,{unit:"word"});break;case"deleteWordForward":c.KE.deleteForward(B,{unit:"word"});break;case"insertLineBreak":c.KE.insertSoftBreak(B);break;case"insertParagraph":c.KE.insertBreak(B);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===o&&b.isComposing(B)&&(K(!1),d.BG.set(B,!1)),(null==s?void 0:s.constructor.name)==="DataTransfer"?b.insertData(B,s):"string"==typeof s&&(h?F.current.push(()=>c.KE.insertText(B,s)):c.KE.insertText(B,s))}var j=null===(k=d.zk.get(B))||void 0===k?void 0:k.unref();d.zk.delete(B),!j||B.selection&&c.Q6.equals(B.selection,j)||c.gB.select(B,j)}},[B,H,M,u,p,U]),V=(0,s.useCallback)(e=>{null==e?(H.cancel(),U.cancel(),d.Vh.delete(B),d._8.delete(B),j.current&&d.MX&&j.current.removeEventListener("beforeinput",_)):d.MX&&e.addEventListener("beforeinput",_),j.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[H,U,B,_,t]);C(()=>{var e=b.getWindow(B),t=e=>{var{target:t}=e,r=t instanceof HTMLElement?t:null,n=null==r?void 0:r.tagName;"INPUT"!==n&&"TEXTAREA"!==n&&U()};e.document.addEventListener("selectionchange",t);var r=()=>{q.isDraggingInternally=!1};return e.document.addEventListener("dragend",r),e.document.addEventListener("drop",r),()=>{e.document.removeEventListener("selectionchange",t),e.document.removeEventListener("dragend",r),e.document.removeEventListener("drop",r)}},[U,q]);var Y=l([B,[]]),X=z(l),$=h&&1===B.children.length&&1===Array.from(c.bP.texts(B)).length&&""===c.bP.string(B)&&!T,G=(0,s.useCallback)(e=>{if(e&&$){var t;R(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}else R(void 0)},[$]);if($){var J=c.KE.start(B,[]);Y.push({[d.Rx]:!0,placeholder:h,onPlaceholderResize:G,anchor:J,focus:J})}var{marks:Z}=B;if(q.hasMarkPlaceholder=!1,B.selection&&c.Q6.isCollapsed(B.selection)&&Z){var{anchor:ee}=B.selection,et=c.bP.leaf(B,ee.path),er=f(et,ex);if(!c.EY.equals(et,Z,{loose:!0})){q.hasMarkPlaceholder=!0;var en=Object.fromEntries(Object.keys(er).map(e=>[e,null]));Y.push(eP(eP(eP({[d.nW]:!0},en),Z),{},{anchor:ee,focus:ee}))}}return(0,s.useEffect)(()=>{setTimeout(()=>{var{selection:e}=B;if(e){var{anchor:t}=e,r=c.bP.leaf(B,t.path);if(Z&&!c.EY.equals(r,Z,{loose:!0})){d.fe.set(B,Z);return}}d.fe.delete(B)})}),!function(){var{flushDeferred:e}=(0,s.useContext)(ev);C(e)}(),s.createElement(ef.Provider,{value:p},s.createElement(ew.Provider,{value:T},s.createElement(A.Provider,{value:X},s.createElement(ey,{node:j,receivedUserInput:N},s.createElement(O,eP(eP({role:p?void 0:"textbox","aria-multiline":!p||void 0},D),{},{spellCheck:(!!d.MX||!d.qx)&&D.spellCheck,autoCorrect:d.MX||!d.qx?D.autoCorrect:"false",autoCapitalize:d.MX||!d.qx?D.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!p,zindex:-1,suppressContentEditableWarning:!0,ref:V,style:eP(eP({},P?{}:eP({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},I?{minHeight:I}:{})),x),onBeforeInput:(0,s.useCallback)(e=>{if(!d.MX&&!p&&!ej(e,D.onBeforeInput)&&b.hasSelectableTarget(B,e.target)&&(e.preventDefault(),!b.isComposing(B))){var t=e.data;c.KE.insertText(B,t)}},[D.onBeforeInput,B,p]),onInput:(0,s.useCallback)(e=>{if(!ej(e,D.onInput)){if(Q.current){Q.current.handleInput();return}for(var t of F.current)t();F.current=[],b.isFocused(B)||eR(B,e.nativeEvent)}},[D.onInput,B]),onBlur:(0,s.useCallback)(e=>{if(!(p||q.isUpdatingSelection||!b.hasSelectableTarget(B,e.target)||ej(e,D.onBlur))){var t=b.findDocumentOrShadowRoot(B);if(q.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===b.toDOMNode(B,B)||(0,d.Fe)(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&(0,d.vA)(r)&&b.hasDOMNode(B,r)){var n=b.toSlateNode(B,r);if(c.Hg.isElement(n)&&!B.isVoid(n))return}if(d._y){var a=(0,d.Lo)(t);null==a||a.removeAllRanges()}d.Rf.delete(B)}}}},[p,q.isUpdatingSelection,q.latestElement,B,D.onBlur]),onClick:(0,s.useCallback)(e=>{if(b.hasTarget(B,e.target)&&!ej(e,D.onClick)&&(0,d.vA)(e.target)){var t=b.toSlateNode(B,e.target),r=b.findPath(B,t);if(c.KE.hasPath(B,r)&&c.bP.get(B,r)===t){if(e.detail===d.CT&&r.length>=1){var n=r;if(!(c.Hg.isElement(t)&&c.KE.isBlock(B,t))){var a,i=c.KE.above(B,{match:e=>c.Hg.isElement(e)&&c.KE.isBlock(B,e),at:r});n=null!==(a=null==i?void 0:i[1])&&void 0!==a?a:r.slice(0,1)}var o=c.KE.range(B,n);c.gB.select(B,o);return}if(!p){var s=c.KE.start(B,r),l=c.KE.end(B,r),u=c.KE.void(B,{at:s}),h=c.KE.void(B,{at:l});if(u&&h&&c.wA.equals(u[1],h[1])){var f=c.KE.range(B,s);c.gB.select(B,f)}}}}},[B,D.onClick,p]),onCompositionEnd:(0,s.useCallback)(e=>{if(b.hasSelectableTarget(B,e.target)){var t;if(b.isComposing(B)&&Promise.resolve().then(()=>{K(!1),d.BG.set(B,!1)}),null===(t=Q.current)||void 0===t||t.handleCompositionEnd(e),!ej(e,D.onCompositionEnd)&&!d.Ni&&!d._y&&!d.Hq&&!d.pz&&!d.KW&&!d.$Z&&e.data){var r=d.fe.get(B);d.fe.delete(B),void 0!==r&&(d.NH.set(B,B.marks),B.marks=r),c.KE.insertText(B,e.data);var n=d.NH.get(B);d.NH.delete(B),void 0!==n&&(B.marks=n)}}},[D.onCompositionEnd,B]),onCompositionUpdate:(0,s.useCallback)(e=>{!b.hasSelectableTarget(B,e.target)||ej(e,D.onCompositionUpdate)||b.isComposing(B)||(K(!0),d.BG.set(B,!0))},[D.onCompositionUpdate,B]),onCompositionStart:(0,s.useCallback)(e=>{if(b.hasSelectableTarget(B,e.target)&&(null===(t=Q.current)||void 0===t||t.handleCompositionStart(e),!ej(e,D.onCompositionStart)&&!d.Ni)){K(!0);var t,{selection:r}=B;if(r&&c.Q6.isExpanded(r)){c.KE.deleteFragment(B);return}}},[D.onCompositionStart,B]),onCopy:(0,s.useCallback)(e=>{!b.hasSelectableTarget(B,e.target)||ej(e,D.onCopy)||eF(e)||(e.preventDefault(),b.setFragmentData(B,e.clipboardData,"copy"))},[D.onCopy,B]),onCut:(0,s.useCallback)(e=>{if(!p&&b.hasSelectableTarget(B,e.target)&&!ej(e,D.onCut)&&!eF(e)){e.preventDefault(),b.setFragmentData(B,e.clipboardData,"cut");var{selection:t}=B;if(t){if(c.Q6.isExpanded(t))c.KE.deleteFragment(B);else{var r=c.bP.parent(B,t.anchor.path);c.KE.isVoid(B,r)&&c.gB.delete(B)}}}},[p,B,D.onCut]),onDragOver:(0,s.useCallback)(e=>{if(b.hasTarget(B,e.target)&&!ej(e,D.onDragOver)){var t=b.toSlateNode(B,e.target);c.Hg.isElement(t)&&c.KE.isVoid(B,t)&&e.preventDefault()}},[D.onDragOver,B]),onDragStart:(0,s.useCallback)(e=>{if(!p&&b.hasTarget(B,e.target)&&!ej(e,D.onDragStart)){var t=b.toSlateNode(B,e.target),r=b.findPath(B,t);if(c.Hg.isElement(t)&&c.KE.isVoid(B,t)||c.KE.void(B,{at:r,voids:!0})){var n=c.KE.range(B,r);c.gB.select(B,n)}q.isDraggingInternally=!0,b.setFragmentData(B,e.dataTransfer,"drag")}},[p,B,D.onDragStart,q]),onDrop:(0,s.useCallback)(e=>{if(!p&&b.hasTarget(B,e.target)&&!ej(e,D.onDrop)){e.preventDefault();var t=B.selection,r=b.findEventRange(B,e),n=e.dataTransfer;c.gB.select(B,r),q.isDraggingInternally&&t&&!c.Q6.equals(t,r)&&!c.KE.void(B,{at:r,voids:!0})&&c.gB.delete(B,{at:t}),b.insertData(B,n),b.isFocused(B)||b.focus(B)}},[p,B,D.onDrop,q]),onDragEnd:(0,s.useCallback)(e=>{!p&&q.isDraggingInternally&&D.onDragEnd&&b.hasTarget(B,e.target)&&D.onDragEnd(e)},[p,q,D,B]),onFocus:(0,s.useCallback)(e=>{if(!p&&!q.isUpdatingSelection&&b.hasEditableTarget(B,e.target)&&!ej(e,D.onFocus)){var t=b.toDOMNode(B,B),r=b.findDocumentOrShadowRoot(B);if(q.latestElement=r.activeElement,d.$M&&e.target!==t){t.focus();return}d.Rf.set(B,!0)}},[p,q,B,D.onFocus]),onKeyDown:(0,s.useCallback)(e=>{if(!p&&b.hasEditableTarget(B,e.target)){null===(t=Q.current)||void 0===t||t.handleKeyDown(e);var t,{nativeEvent:r}=e;if(b.isComposing(B)&&!1===r.isComposing&&(d.BG.set(B,!1),K(!1)),!(ej(e,D.onKeyDown)||b.isComposing(B))){var{selection:n}=B,i=B.children[null!==n?n.focus.path[0]:0],o="rtl"===a()(c.bP.string(i));if(d.qW.isRedo(r)){e.preventDefault(),"function"==typeof B.redo&&B.redo();return}if(d.qW.isUndo(r)){e.preventDefault(),"function"==typeof B.undo&&B.undo();return}if(d.qW.isMoveLineBackward(r)){e.preventDefault(),c.gB.move(B,{unit:"line",reverse:!0});return}if(d.qW.isMoveLineForward(r)){e.preventDefault(),c.gB.move(B,{unit:"line"});return}if(d.qW.isExtendLineBackward(r)){e.preventDefault(),c.gB.move(B,{unit:"line",edge:"focus",reverse:!0});return}if(d.qW.isExtendLineForward(r)){e.preventDefault(),c.gB.move(B,{unit:"line",edge:"focus"});return}if(d.qW.isMoveBackward(r)){e.preventDefault(),n&&c.Q6.isCollapsed(n)?c.gB.move(B,{reverse:!o}):c.gB.collapse(B,{edge:o?"end":"start"});return}if(d.qW.isMoveForward(r)){e.preventDefault(),n&&c.Q6.isCollapsed(n)?c.gB.move(B,{reverse:o}):c.gB.collapse(B,{edge:o?"start":"end"});return}if(d.qW.isMoveWordBackward(r)){e.preventDefault(),n&&c.Q6.isExpanded(n)&&c.gB.collapse(B,{edge:"focus"}),c.gB.move(B,{unit:"word",reverse:!o});return}if(d.qW.isMoveWordForward(r)){e.preventDefault(),n&&c.Q6.isExpanded(n)&&c.gB.collapse(B,{edge:"focus"}),c.gB.move(B,{unit:"word",reverse:o});return}if(d.MX){if((d.G_||d._y)&&n&&(d.qW.isDeleteBackward(r)||d.qW.isDeleteForward(r))&&c.Q6.isCollapsed(n)){var s=c.bP.parent(B,n.anchor.path);if(c.Hg.isElement(s)&&c.KE.isVoid(B,s)&&(c.KE.isInline(B,s)||c.KE.isBlock(B,s))){e.preventDefault(),c.KE.deleteBackward(B,{unit:"block"});return}}}else{if(d.qW.isBold(r)||d.qW.isItalic(r)||d.qW.isTransposeCharacter(r)){e.preventDefault();return}if(d.qW.isSoftBreak(r)){e.preventDefault(),c.KE.insertSoftBreak(B);return}if(d.qW.isSplitBlock(r)){e.preventDefault(),c.KE.insertBreak(B);return}if(d.qW.isDeleteBackward(r)){e.preventDefault(),n&&c.Q6.isExpanded(n)?c.KE.deleteFragment(B,{direction:"backward"}):c.KE.deleteBackward(B);return}if(d.qW.isDeleteForward(r)){e.preventDefault(),n&&c.Q6.isExpanded(n)?c.KE.deleteFragment(B,{direction:"forward"}):c.KE.deleteForward(B);return}if(d.qW.isDeleteLineBackward(r)){e.preventDefault(),n&&c.Q6.isExpanded(n)?c.KE.deleteFragment(B,{direction:"backward"}):c.KE.deleteBackward(B,{unit:"line"});return}if(d.qW.isDeleteLineForward(r)){e.preventDefault(),n&&c.Q6.isExpanded(n)?c.KE.deleteFragment(B,{direction:"forward"}):c.KE.deleteForward(B,{unit:"line"});return}if(d.qW.isDeleteWordBackward(r)){e.preventDefault(),n&&c.Q6.isExpanded(n)?c.KE.deleteFragment(B,{direction:"backward"}):c.KE.deleteBackward(B,{unit:"word"});return}if(d.qW.isDeleteWordForward(r)){e.preventDefault(),n&&c.Q6.isExpanded(n)?c.KE.deleteFragment(B,{direction:"forward"}):c.KE.deleteForward(B,{unit:"word"});return}}}}},[p,B,D.onKeyDown]),onPaste:(0,s.useCallback)(e=>{!p&&b.hasEditableTarget(B,e.target)&&!ej(e,D.onPaste)&&(!d.MX||(0,d.ts)(e.nativeEvent)||d._y)&&(e.preventDefault(),b.insertData(B,e.clipboardData))},[p,B,D.onPaste])}),s.createElement(eS,{decorations:Y,node:B,renderElement:v,renderChunk:g,renderPlaceholder:y,renderLeaf:E,renderText:k}))))))}),eB=e=>{var{attributes:t,children:r}=e;return s.createElement("span",eP({},t),r,d.Ni&&s.createElement("br",null))},eT=()=>[],eK=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&c.Q6.isCollapsed(e.selection))){var r=t.startContainer.parentElement,n=t.getBoundingClientRect();if(0===n.width&&0===n.height&&0===n.x&&0===n.y){var a=r.getBoundingClientRect();if(a.width>0||a.height>0)return}r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,l.A)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},ej=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},eF=e=>(0,d.vA)(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),eI=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},eR=(e,t)=>{if("historyUndo"===t.inputType&&"function"==typeof e.undo){e.undo();return}if("historyRedo"===t.inputType&&"function"==typeof e.redo){e.redo();return}},eL=(0,s.createContext)(!1),eM=()=>(0,s.useContext)(eL),eN=parseInt(s.version.split(".")[0],10),eW=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],eq=e=>{var{editor:t,children:r,onChange:n,onSelectionChange:a,onValueChange:i,initialValue:o}=e,l=f(e,eW);s.useState(()=>{if(!c.bP.isNodeList(o))throw Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(c.h6.stringify(o)));if(!c.KE.isEditor(t))throw Error("[Slate] editor is invalid! You passed: ".concat(c.h6.stringify(t)));t.children=o,Object.assign(t,l)});var{selectorContext:u,onChange:h}=function(){var e=(0,s.useRef)(new Set),t=(0,s.useRef)(new Set),r=(0,s.useCallback)(()=>{e.current.forEach(e=>e())},[]),n=(0,s.useCallback)(()=>{t.current.forEach(e=>e()),t.current.clear()},[]),a=(0,s.useCallback)(function(r){var{deferred:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n?()=>t.current.add(r):r;return e.current.add(a),()=>{e.current.delete(a)}},[]);return{selectorContext:(0,s.useMemo)(()=>({addEventListener:a,flushDeferred:n}),[a,n]),onChange:r}}(),p=(0,s.useCallback)(e=>{var r;(n&&n(t.children),(null==e||null===(r=e.operation)||void 0===r?void 0:r.type)==="set_selection")?null==a||a(t.selection):null==i||i(t.children),h()},[t,h,n,a,i]);(0,s.useEffect)(()=>(d.zJ.set(t,p),()=>{d.zJ.set(t,()=>{})}),[t,p]);var[v,m]=(0,s.useState)(b.isFocused(t));return(0,s.useEffect)(()=>{m(b.isFocused(t))},[t]),C(()=>{var e=()=>m(b.isFocused(t));return eN>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),s.createElement(ev.Provider,{value:u},s.createElement(g.Provider,{value:t},s.createElement(eL.Provider,{value:v},r)))},eA=()=>{var e=ed();return!!e&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eg,{deferred:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,s.useContext)(ev);if(!n)throw Error("The `useSlateSelector` hook must be used inside the <Slate> component's context.");var{addEventListener:a}=n,i=m(),[o,l]=q((0,s.useCallback)(()=>e(i),[i,e]),t);return C(()=>{var e=a(l,{deferred:r});return l(),e},[a,l,r]),o}((0,s.useCallback)(t=>{if(!t.selection)return!1;var r=b.findPath(t,e),n=c.KE.range(t,r);return!!c.Q6.intersection(n,t.selection)},[e]),void 0,{deferred:!0})},eQ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=e,{onChange:n,apply:a,insertText:i}=r=(0,d.Hk)(r,t);return r.getChunkSize=()=>null,d.Ni&&(r.insertText=(e,t)=>(d.hK.delete(r),i(e,t))),r.onChange=e=>{(eN<18?h.unstable_batchedUpdates:e=>e())(()=>{n(e)})},r.apply=e=>{if("move_node"===e.type){var t=c.bP.parent(r,e.path);if(r.getChunkSize(t)){var n=c.bP.get(r,e.path),i=ei(r,t),o=b.findKey(r,n);i.movedNodeKeys.add(o)}}a(e)},r}}}]);