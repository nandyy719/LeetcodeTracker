(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7480],{9673:(e,t,n)=>{var s=n(71354),i=n(76314)(s);i.push([e.id,".XH002 *{color:hsl(var(--sd-muted-foreground))!important;font-size:.875rem!important;line-height:1.25rem!important}.XH002 li,.XH002 p{line-height:1.4rem!important}.XH002 h1{font-size:1.25rem!important}.XH002 h1,.XH002 h2{line-height:1.75rem!important}.XH002 h2{font-size:1.125rem!important}.XH002 h3{font-size:1rem!important;line-height:1.5rem!important}.XH002 code{background-color:#000a2008;border-radius:5px;color:#262626bf;font-family:Menlo,sans-serif;font-size:.75rem!important;line-height:1rem!important;padding:.125rem;white-space:pre!important}.dark .XH002 code{background-color:#ffffff12;border-radius:5px;color:#eff1f6bf;font-size:.75rem!important;line-height:1rem!important;padding:.125rem;white-space:pre!important}","",{version:3,sources:["webpack://./modules/ai-agent-chat/components/chat-content/ai-content-markdown-gray.iso.css"],names:[],mappings:"AAEE,SAAA,+CAAyC,CAAzC,2BAAyC,CAAzC,6BAAyC,CAG3C,mBACE,4BACF,CAGE,UAAA,2BAAc,CAId,oBAJA,6BAIc,CAAd,UAAA,4BAAc,CAId,UAAA,wBAAgB,CAAhB,4BAAgB,CAGlB,YAEE,0BAAwE,CAAxE,iBAAwE,CAAxE,eAAwE,CAAxE,4BAAwE,CAAxE,0BAAwE,CAAxE,0BAAwE,CAAxE,eAAwE,CADxE,yBAEF,CAEA,kBAEE,0BAAuE,CAAvE,iBAAuE,CAAvE,eAAuE,CAAvE,0BAAuE,CAAvE,0BAAuE,CAAvE,eAAuE,CADvE,yBAEF",sourcesContent:["\n.markdown * {\n  @apply !text-sm !text-sd-muted-foreground;\n}\n\n.markdown p, .markdown li {\n  line-height: 1.4rem !important;\n}\n\n.markdown h1 {\n  @apply !text-xl\n}\n\n.markdown h2 {\n  @apply !text-lg\n}\n\n.markdown h3 {\n  @apply !text-base\n}\n\n.markdown code {\n  white-space: pre !important;\n  @apply  bg-fill-4 font-menlo text-label-2 rounded px-0.5 py-0.5 !text-xs;\n}\n\n:global(.dark) .markdown code {\n  white-space: pre !important;\n  @apply  bg-dark-fill-4 text-dark-label-2 rounded px-0.5 py-0.5 !text-xs;\n}\n"],sourceRoot:""}]),i.locals={markdown:"XH002"},e.exports=i},88235:(e,t,n)=>{var s=n(71354),i=n(76314)(s);i.push([e.id,".x1eV6 li,.x1eV6 p,.x1eV6 summary{font-size:.875rem!important;line-height:1.25rem!important}.x1eV6 h3{font-size:1rem!important;line-height:1.5rem!important}","",{version:3,sources:["webpack://./modules/ai-agent-chat/components/chat-content/ai-content-markdown.iso.css"],names:[],mappings:"AAME,kCAAA,2BAAe,CAAf,6BAAe,CAIf,UAAA,wBAAiB,CAAjB,4BAAiB",sourcesContent:[".markdown p,\n.markdown li {\n  @apply !text-sm;\n}\n\n.markdown summary {\n  @apply !text-sm;\n}\n\n.markdown h3 {\n  @apply !text-base;\n}\n"],sourceRoot:""}]),i.locals={markdown:"x1eV6"},e.exports=i},61512:(e,t,n)=>{var s=n(71354),i=n(76314)(s);i.push([e.id,".F3ACy{background:linear-gradient(114deg,#af52de26 8%,#007aff26 150.58%)}.pKXjM{-webkit-text-fill-color:#0000;animation:Hu_r4 3s linear infinite;background:linear-gradient(120deg,#000 10%,#fff 20%,#000 30%);background-clip:text;-webkit-background-clip:text;background-size:200% auto;color:#0000}.dark .pKXjM{-webkit-text-fill-color:#0000;animation:Hu_r4 3s linear infinite;background:linear-gradient(120deg,#fff 10%,#3c3d3d 20%,#fff 30%);background-clip:text;-webkit-background-clip:text;background-size:200% auto;color:#0000}@keyframes Hu_r4{0%{background-position:200%}to{background-position:-200%}}","",{version:3,sources:["webpack://./modules/ai-agent-chat/components/chat-content/style.iso.css"],names:[],mappings:"AACA,OACE,iEACF,CAEA,OAWE,6BAAoC,CACpC,kCAAmC,CAXnC,6DAKC,CAED,oBAAqB,CACrB,4BAA6B,CAF7B,yBAA0B,CAG1B,WAGF,CAEA,aAWE,6BAAoC,CACpC,kCAAmC,CAXnC,gEAKC,CAED,oBAAqB,CACrB,4BAA6B,CAF7B,yBAA0B,CAG1B,WAGF,CAEA,iBACE,GACE,wBACF,CACA,GACE,yBACF,CACF",sourcesContent:["\n.LeetIconBg{\n  background: linear-gradient(114deg, rgba(175, 82, 222, 0.15) 8%, rgba(0, 122, 255, 0.15) 150.58%);\n}\n\n.shiningText {\n  background: linear-gradient(\n    120deg,\n    #000000 10%,\n    #ffffff 20%,\n    #000000 30%\n  );\n  background-size: 200% auto;\n  background-clip: text;\n  -webkit-background-clip: text;\n  color: transparent;\n  -webkit-text-fill-color: transparent;\n  animation: shine 3s linear infinite;\n}\n\n:global(.dark) .shiningText {\n  background: linear-gradient(\n    120deg,\n    #ffffff 10%,\n    #3c3d3d 20%,\n    #ffffff 30%\n  );\n  background-size: 200% auto;\n  background-clip: text;\n  -webkit-background-clip: text;\n  color: transparent;\n  -webkit-text-fill-color: transparent;\n  animation: shine 3s linear infinite;\n}\n\n@keyframes shine {\n  0% {\n    background-position: 200% center;\n  }\n  100% {\n    background-position: -200% center;\n  }\n}\n\n\n"],sourceRoot:""}]),i.locals={LeetIconBg:"F3ACy",shiningText:"pKXjM",shine:"Hu_r4"},e.exports=i},60357:(e,t,n)=>{var s=n(71354),i=n(76314)(s);i.push([e.id,".RY_NY{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:linear-gradient(114deg,#af52de26 8%,#007aff26 150.58%),#fffc}.dark .RY_NY{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:linear-gradient(114deg,#af52de26 8%,#007aff26 150.58%),#262626cc}","",{version:3,sources:["webpack://./modules/ai-agent-chat/components/chat-content/work-flow-list/styles.iso.css"],names:[],mappings:"AACA,OAEE,iCAA0B,CAA1B,yBAA0B,CAD1B,uEAEF,CAEA,aAEE,iCAA0B,CAA1B,yBAA0B,CAD1B,2EAEF",sourcesContent:["\n.promptItemBg{\n  background: linear-gradient(114deg, rgba(175, 82, 222, 0.15) 8%, rgba(0, 122, 255, 0.15) 150.58%), rgba(255, 255, 255, 0.80);\n  backdrop-filter: blur(5px);\n}\n\n:global(.dark) .promptItemBg {\n  background: linear-gradient(114deg, rgba(175, 82, 222, 0.15) 8%, rgba(0, 122, 255, 0.15) 150.58%), rgba(38, 38, 38, 0.80);\n  backdrop-filter: blur(5px);\n}\n"],sourceRoot:""}]),i.locals={promptItemBg:"RY_NY"},e.exports=i},24666:(e,t,n)=>{var s=n(71354),i=n(76314)(s);i.push([e.id,".UvakC{background:linear-gradient(118deg,#af52de,#007aff);border:0}.dqsoU{-webkit-text-fill-color:#0000;background:linear-gradient(114deg,#ffd600 8%,#ffa116 150.58%);background-clip:text;-webkit-background-clip:text}","",{version:3,sources:["webpack://./modules/ai-agent-chat/components/chat-input/styles.iso.css"],names:[],mappings:"AACA,OACE,kDAAsD,CACtD,QACF,CAEA,OAIE,6BAAoC,CAHpC,6DAAgE,CAChE,oBAAqB,CACrB,4BAEF",sourcesContent:["\n.switchChecked{\n  background: linear-gradient(118deg,  #AF52DE, #007AFF);\n  border: 0;\n}\n\n.premiumText{\n  background: linear-gradient(114deg, #FFD600 8%, #FFA116 150.58%);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n"],sourceRoot:""}]),i.locals={switchChecked:"UvakC",premiumText:"dqsoU"},e.exports=i},23346:(e,t,n)=>{var s=n(71354),i=n(76314)(s);i.push([e.id,".elfjS pre{border-color:var(--border-tertiary);border-left-width:2px;color:var(--text-secondary);font-family:Menlo,sans-serif;font-size:.875rem;line-height:1.25rem;margin-bottom:1rem;margin-top:1rem;overflow:visible;padding-left:1rem;white-space:pre-wrap}.elfjS pre strong{--tw-text-opacity:1;color:rgb(38 38 38/var(--tw-text-opacity))}.dark .elfjS pre strong{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.elfjS a{--tw-text-opacity:1;color:rgb(0 122 255/var(--tw-text-opacity))}.dark .elfjS a{--tw-text-opacity:1;color:rgb(10 132 255/var(--tw-text-opacity))}.elfjS ul{list-style-type:disc}.elfjS ol,.elfjS ul{margin-bottom:1rem;margin-left:1rem;margin-right:1rem}.elfjS ol{list-style-type:decimal}.elfjS li{margin-bottom:.75rem}.elfjS p{margin-bottom:1rem}.elfjS code{background-color:#000a2008;border-color:#0000000d;border-radius:5px;border-width:1px;color:#262626bf;font-family:Menlo,sans-serif;font-size:.75rem;line-height:1rem;padding:.125rem;white-space:pre-wrap}.dark .elfjS code{background-color:#ffffff12;border-color:#f7faff1f;color:#eff1f6bf}.elfjS blockquote{border-color:#0000000d;border-left-width:4px;color:#262626bf;padding-left:1rem}.dark .elfjS blockquote{border-color:#f7faff1f;color:#eff1f6bf}.content-example-testcase{--tw-text-opacity:1;color:rgb(38 38 38/var(--tw-text-opacity));font-size:1rem;font-weight:500;line-height:1.5rem;margin-bottom:1rem}.dark .content-example-testcase{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.elfjS img{height:auto!important;max-width:100%}.elfjS .exRnx{--tw-text-opacity:1;color:rgb(38 38 38/var(--tw-text-opacity));font-size:1rem;font-weight:500;line-height:1.5rem;margin-bottom:1rem}:is(.dKYIq .elfjS .exRnx){--tw-text-opacity:1;color:rgb(38 38 38/var(--tw-text-opacity))}.example-block{border-color:var(--border-tertiary);border-left-width:2px;color:var(--text-secondary);font-size:14px;margin-bottom:1rem;margin-top:1rem;overflow:visible;padding-left:1rem}.example-block pre{border-left-width:0;border-style:none;padding-left:0}.example-block .example-io{font-family:Menlo,sans-serif;font-size:.85rem}.example-block pre.example-io{overflow:auto;white-space:pre}.elfjS table{--tw-text-opacity:1;border-radius:.5rem;border-style:hidden;box-shadow:0 0 0 1px #e5e5e5;color:rgb(38 38 38/var(--tw-text-opacity));margin-bottom:.75rem}.dark .elfjS table{--tw-border-opacity:1;--tw-text-opacity:1;border-color:rgb(74 74 74/var(--tw-border-opacity));box-shadow:0 0 0 1px #424242;color:rgb(255 255 255/var(--tw-text-opacity))}.elfjS table th{--tw-border-opacity:1;background-color:#000a200d;border-color:rgb(223 223 223/var(--tw-border-opacity));border-width:1px;font-weight:500;padding:.5rem .625rem}.elfjS table th:first-child{border-top-left-radius:.5rem}.elfjS table th:last-child{border-top-right-radius:.5rem}.dark .elfjS table th{--tw-border-opacity:1;background-color:#ffffff1a;border-color:rgb(74 74 74/var(--tw-border-opacity))}.elfjS table td{--tw-border-opacity:1;border-color:rgb(223 223 223/var(--tw-border-opacity));border-width:1px;padding:.5rem .625rem}.dark .elfjS table td{--tw-border-opacity:1;border-color:rgb(74 74 74/var(--tw-border-opacity))}.elfjS .language-md .table{display:inline!important}","",{version:3,sources:["webpack://./modules/problems/components/description/Content/HTMLContent.iso.css"],names:[],mappings:"AACE,WAAA,mCAA8H,CAA9H,qBAA8H,CAA9H,2BAA8H,CAA9H,4BAA8H,CAA9H,iBAA8H,CAA9H,mBAA8H,CAA9H,kBAA8H,CAA9H,eAA8H,CAA9H,gBAA8H,CAA9H,iBAA8H,CAA9H,oBAA8H,CAI9H,kBAAA,mBAAmB,CAAnB,0CAAmB,CAInB,wBAAA,mBAAwB,CAAxB,6CAAwB,CAIxB,SAAA,mBAAkB,CAAlB,2CAAkB,CAIlB,eAAA,mBAAuB,CAAvB,4CAAuB,CAIvB,UAAA,oBAA0B,CAI1B,oBAJA,kBAA0B,CAA1B,gBAA0B,CAA1B,iBAI6B,CAA7B,UAAA,uBAA6B,CAI7B,UAAA,oBAAW,CAIX,SAAA,kBAAW,CAIX,YAAA,0BAAkH,CAAlH,sBAAkH,CAAlH,iBAAkH,CAAlH,gBAAkH,CAAlH,eAAkH,CAAlH,4BAAkH,CAAlH,gBAAkH,CAAlH,gBAAkH,CAAlH,eAAkH,CAAlH,oBAAkH,CAIlH,kBAAA,0BAA6D,CAA7D,sBAA6D,CAA7D,eAA6D,CAI7D,kBAAA,sBAAoD,CAApD,qBAAoD,CAApD,eAAoD,CAApD,iBAAoD,CAIpD,wBAAA,sBAA8C,CAA9C,eAA8C,CAI9C,0BAAA,mBAA8C,CAA9C,0CAA8C,CAA9C,cAA8C,CAA9C,eAA8C,CAA9C,kBAA8C,CAA9C,kBAA8C,CAI9C,gCAAA,mBAAwB,CAAxB,6CAAwB,CAG1B,WAEE,qBAAuB,CADvB,cAEF,CAGE,cAAA,mBAAgE,CAAhE,0CAAgE,CAAhE,cAAgE,CAAhE,eAAgE,CAAhE,kBAAgE,CAAhE,kBAAgE,CAAhE,0BAAA,mBAAgE,CAAhE,0CAAgE,CAIhE,eAAA,mCAAmG,CAAnG,qBAAmG,CAAnG,2BAAmG,CAAnG,cAAmG,CAAnG,kBAAmG,CAAnG,eAAmG,CAAnG,gBAAmG,CAAnG,iBAAmG,CAEjG,mBAAA,mBAAkC,CAAlC,iBAAkC,CAAlC,cAAkC,CAGlC,2BAAA,4BAAgC,CAAhC,gBAAgC,CAGhC,8BAAA,aAAmC,CAAnC,eAAmC,CAIvC,aAEE,mBAAiD,CAAjD,mBAAiD,CAAjD,mBAAiD,CADjD,4BAA6B,CAC7B,0CAAiD,CAAjD,oBACF,CAEA,mBAEE,qBAA2C,CAA3C,mBAA2C,CAA3C,mDAA2C,CAD3C,4BAA6B,CAC7B,6CACF,CAGE,gBAAA,qBAAmE,CAAnE,0BAAmE,CAAnE,sDAAmE,CAAnE,gBAAmE,CAAnE,eAAmE,CAAnE,qBAAmE,CAInE,4BAAA,4BAAoB,CAIpB,2BAAA,6BAAoB,CAIpB,sBAAA,qBAAwC,CAAxC,0BAAwC,CAAxC,mDAAwC,CAIxC,gBAAA,qBAA6C,CAA7C,sDAA6C,CAA7C,gBAA6C,CAA7C,qBAA6C,CAI7C,sBAAA,qBAAyB,CAAzB,mDAAyB,CAG3B,2BAKE,wBACF",sourcesContent:[".html pre {\n  @apply border-border-tertiary font-menlo text-text-secondary my-4 overflow-visible whitespace-pre-wrap border-l-2 pl-4 text-sm;\n}\n\n.html pre strong {\n  @apply text-label-1;\n}\n\n:global(.dark) .html pre strong {\n  @apply text-dark-label-1;\n}\n\n.html a {\n  @apply text-blue-s;\n}\n\n:global(.dark) .html a {\n  @apply text-dark-blue-s;\n}\n\n.html ul {\n  @apply mx-4 mb-4 list-disc;\n}\n\n.html ol {\n  @apply mx-4 mb-4 list-decimal;\n}\n\n.html li {\n  @apply mb-3;\n}\n\n.html p {\n  @apply mb-4;\n}\n\n.html code {\n  @apply border-divider-3 bg-fill-4 font-menlo text-label-2 whitespace-pre-wrap rounded border px-0.5 py-0.5 text-xs;\n}\n\n:global(.dark) .html code {\n  @apply border-dark-divider-3 bg-dark-fill-4 text-dark-label-2;\n}\n\n.html blockquote {\n  @apply border-divider-3 text-label-2 border-l-4 pl-4;\n}\n\n:global(.dark) .html blockquote {\n  @apply border-dark-divider-3 text-dark-label-2;\n}\n\n:global(.content-example-testcase) {\n  @apply text-label-1 mb-4 text-base font-medium;\n}\n\n:global(.dark .content-example-testcase) {\n  @apply text-dark-label-1;\n}\n\n.html img {\n  max-width: 100%;\n  height: auto !important;\n}\n\n.html .example {\n  @apply text-label-1 dark:text-label-1 mb-4 text-base font-medium;\n}\n\n:global(.example-block) {\n  @apply border-border-tertiary text-text-secondary my-4 overflow-visible border-l-2 pl-4 text-[14px];\n  pre {\n    @apply border-l-0 border-none pl-0;\n  }\n  :global(.example-io) {\n    @apply font-menlo text-[0.85rem];\n  }\n  pre:global(.example-io) {\n    @apply overflow-auto whitespace-pre;\n  }\n}\n\n.html table {\n  box-shadow: 0 0 0 1px #e5e5e5;\n  @apply text-label-1 mb-3 rounded-lg border-hidden;\n}\n\n:global(.dark) .html table {\n  box-shadow: 0 0 0 1px #424242;\n  @apply border-dark-gray-4 text-dark-label-1;\n}\n\n.html table th {\n  @apply border-gray-4 bg-fill-3 border-[1px] px-2.5 py-2 font-medium;\n}\n\n.html table th:first-child {\n  @apply rounded-tl-lg;\n}\n\n.html table th:last-child {\n  @apply rounded-tr-lg;\n}\n\n:global(.dark) .html table th {\n  @apply border-dark-gray-4 bg-dark-fill-3;\n}\n\n.html table td {\n  @apply border-gray-4 border-[1px] px-2.5 py-2;\n}\n\n:global(.dark) .html table td {\n  @apply border-dark-gray-4;\n}\n\n.html :global(.language-md .table) {\n  /*\n    FIXME: tailwind-css `.table` conflict with highlight.js `.table`,\n           which just have different meanings but with the same name\n     */\n  display: inline !important;\n}\n"],sourceRoot:""}]),i.locals={html:"elfjS",example:"exRnx",dark:"dKYIq"},e.exports=i},87320:(e,t,n)=>{"use strict";n.d(t,{v:()=>q});var s=n(74848),i=n(79656),l=n(84038),r=n(91106),a=n.n(r),o=n(74353),d=n.n(o),c=n(96540),u=n(35593),m=n(9640);let p=()=>(0,u.V6A)(m.nS),x=()=>(0,u.snE)(m.nS,{},{select:e=>e.chatUserPremiumGroupUsage,enabled:!0});var f=n(17912),h=n(72187),g=n(20239),A=n(76033),v=n(35490),C=n(70354),b=n(25533),y=n(71320),k=n(77528),j=n(55456),_=n(15685);let S=()=>(0,u.Wkt)(m.nS);var w=n(47561),E=n(42412),I=n(15330);let N=e=>{var t,n,r,a,o;let{modelList:d,compayName:u}=e,m=d[0].model,{t:p}=(0,l.Bd)("ai-agent-chat",{keyPrefix:"setting"}),[x,h]=(0,c.useState)(null===(t=m.credentials)||void 0===t?void 0:t.useKey),[N,B]=(0,c.useState)(null===(n=m.credentials)||void 0===n?void 0:n.apiKey),{data:L}=(0,C.Xe)(),M=null!==(o=null==L?void 0:null===(r=L.userStatus)||void 0===r?void 0:r.username)&&void 0!==o?o:"",D=(0,f.S)(e=>e.setModelList),F=(0,f.S)(e=>e.modelList),{mutateAsync:G,isLoading:H}=S(),{toast:O}=(0,g.dj)(),q=e=>{F&&(F.forEach(t=>{d.some(e=>e.model.id===t.model.id)&&(t.model.credentials=e)}),D([...F]))},T=async()=>{if(N){b.i.ideSettingsModelApiVerifyClick((0,j._)((0,k._)({},(0,y.zg)()),{ide_company:u,ide_switch:String(x)}));try{var e,t;let n=await G({modelId:m.id,credentials:JSON.stringify({api_key:N})});if(null===(e=n.verifyChatCredentials)||void 0===e?void 0:e.ok){(0,w.km)(u,M,{apiKey:N,useKey:!0}),q({apiKey:N,useKey:!0});return}O({title:null!==(t=p("invalidApiKey",{modeName:u}))&&void 0!==t?t:"",variant:"error",duration:3e3})}catch(e){O({title:p("settingFailed"),variant:"error"})}}},V=(0,c.useMemo)(()=>{var e;return m.credentials&&(null===(e=m.credentials)||void 0===e?void 0:e.apiKey)===N?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";if("string"!=typeof e||0===e.length)return"";let i=e.length;if(i<=t+n)return e;let l=s.repeat(i-t-n);return e.substring(0,t)+l+e.substring(i-n)}(N):N},[N,m.credentials]);return(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 self-stretch",id:u,children:[(0,s.jsxs)("div",{className:"inline-flex items-center justify-between self-stretch py-2",children:[(0,s.jsx)("div",{className:"text-sd-foreground text-sm font-medium leading-tight",children:u}),(0,s.jsx)(I.d,{variant:"blue",checked:x,onChange:e=>{var t,n,s;h(e),(null===(t=m.credentials)||void 0===t?void 0:t.apiKey)&&((0,w.km)(u,M,{apiKey:null===(n=m.credentials)||void 0===n?void 0:n.apiKey,useKey:e}),q({apiKey:null===(s=m.credentials)||void 0===s?void 0:s.apiKey,useKey:e})),b.i.ideSettingsModelApiClick((0,j._)((0,k._)({},(0,y.zg)()),{ide_company:u,ide_switch:String(e)}))}})]}),x&&(0,s.jsxs)("div",{className:"inline-flex items-center justify-start gap-2 self-stretch",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(v.p,{placeholder:(m.credentials,p("apiKeyPlaceholder")),value:V,onChange:e=>B(e.target.value),className:"pr-6"}),!!V&&(0,s.jsx)(A.d,{icon:_.bnw,className:"text-sd-gray-400 absolute right-1 top-1/2 -translate-y-1/2 cursor-pointer",onClick:()=>{q(void 0),(0,w.Bj)(u,M),B("")}})]}),m.credentials&&(null===(a=m.credentials)||void 0===a?void 0:a.apiKey)===N?(0,s.jsxs)(E.$,{className:"!text-sd-green-400 bg-sd-accent flex-shrink-0 gap-2",variant:"ghost",children:[(0,s.jsx)(A.d,{icon:i.e68}),(0,s.jsx)("span",{children:p("verified")})]}):(0,s.jsxs)(E.$,{className:"bg-sd-accent flex-shrink-0 gap-2",variant:"ghost",onClick:T,isLoading:H,disabled:H||!V,children:[(0,s.jsx)(A.d,{icon:i.dmS}),(0,s.jsx)("span",{children:p("verify")})]})]})]})};var B=n(32485),L=n.n(B),M=n(3519),D=function(e){return e.ready="ready",e.unavailable="unavailable",e.userApi="userApi",e}(D||{});let F=e=>{let{text:t,status:n}=e;return(0,s.jsxs)("span",{className:"text-sd-secondary-foreground flex items-center gap-1 text-xs font-semibold",children:[(0,s.jsx)("span",{className:L()("inline-block h-1 w-1 rounded",{"bg-sd-green-400":"ready"===n,"bg-[#232323] dark:bg-[#D9D9D9]":"unavailable"===n,"bg-sd-blue-400":"userApi"===n})}),t]})},G=e=>{let{item:t,isPremium:n,onScrollApiKey:i}=e,{t:r}=(0,l.Bd)("ai-agent-chat",{keyPrefix:"setting"}),a=t.model,o=(0,c.useMemo)(()=>a.credentials&&a.credentials.useKey&&a.credentials.apiKey?"userApi":t.premiumModel&&!n?"unavailable":"ready",[n,t.premiumModel,a.credentials]),d=(0,c.useMemo)(()=>"userApi"===o?(0,s.jsx)(F,{text:r("userApi"),status:"userApi"}):"unavailable"===o?(0,s.jsx)(M.m_,{label:(0,s.jsxs)("span",{children:[r("unavailableDesc"),(0,s.jsx)("a",{className:"text-sd-info cursor-pointer",onClick:()=>null==i?void 0:i(a),children:r("unavailableLink")}),r("unavailableDescSuffix")]}),disableHoverableContent:!1,children:(0,s.jsx)("span",{children:(0,s.jsx)(F,{text:r("unavailable"),status:"unavailable"})})}):(0,s.jsx)(F,{text:r("ready"),status:"ready"}),[a,i,o,r]);return(0,s.jsx)(c.Fragment,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between self-stretch py-2",children:[(0,s.jsxs)("div",{className:"text-sd-foreground flex  items-center justify-start gap-1 text-sm font-medium leading-tight",children:[t.premiumModel&&(0,s.jsx)(A.d,{icon:n?_.KKb:_.DW4,className:"text-brand-orange"}),(0,s.jsx)("span",{className:L()({"opacity-60":"unavailable"===o}),children:t.model.name})]}),(0,s.jsx)("span",{className:"bg-fill-tertiary inline-block rounded px-2.5 py-[3px]",children:d})]})},t.model.id)};var H=n(80229);let O=e=>{if(!e)return{};let t={};return e.forEach(e=>{t[e.model.companyName]||(t[e.model.companyName]=[]),t[e.model.companyName].push(e)}),t},q=()=>{var e,t,n,r,o;(0,H.D)();let{t:u}=(0,l.Bd)("ai-agent-chat",{keyPrefix:"setting"}),m=(0,f.S)(e=>e.setModelGlobalRules),k=(0,f.S)(e=>e.setModelList),j=(0,f.S)(e=>e.modelList),_=(0,f.S)(e=>e.modelGlobalRules),S=!!(null===(t=(0,C.Xe)().data)||void 0===t?void 0:null===(e=t.userStatus)||void 0===e?void 0:e.isPremium),{data:w}=x(),{toast:E}=(0,g.dj)(),{mutateAsync:I}=p(),B=async(e,t)=>{try{var n,s;let i=await I(e);(null===(n=i.updateUserChatConfig)||void 0===n?void 0:n.ok)||(null==t||t(),E({title:u("settingFailed"),description:null===(s=i.updateUserChatConfig)||void 0===s?void 0:s.error,variant:"error"}))}catch(e){null==t||t(),E({title:u("settingFailed"),variant:"error"})}},L=O(j),M=e=>{let t=document.getElementById(e.companyName);t&&(t.scrollIntoView({behavior:"smooth",block:"end"}),null==j||j.forEach(t=>{t.model.companyName===e.companyName&&(t.model.credentials={apiKey:"",useKey:!0})}),k([...j]))};return(0,c.useEffect)(()=>{b.i.ideSettingsModelExposure((0,y.zg)())},[]),(0,s.jsxs)("div",{className:"flex h-full w-full flex-col items-start justify-start gap-2 overflow-y-auto px-6 pb-6",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"text-sd-muted-foreground mb-2 justify-start text-sm font-medium leading-tight",children:u("advancedModels")}),S?(0,s.jsx)(s.Fragment,{children:w&&(0,s.jsxs)("div",{className:"text-sd-muted-foreground flex w-full items-center justify-between self-stretch text-xs font-normal leading-none",children:[(0,s.jsxs)("span",{children:[u("requestUsage")," ",null==w?void 0:w.usage," / ",null==w?void 0:w.quota]}),(0,s.jsxs)("span",{children:[u("resetAt")," ",d()(null==w?void 0:w.periodEndAt).format("MMM D, YYYY h:mm A z")]})]})}):(0,s.jsx)("div",{className:"overflow-hidden rounded-lg bg-gradient-to-r from-[#FFD600] to-[#FFA116] p-[1px]",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-start justify-start gap-2 self-stretch rounded-lg bg-[#f9e7ca] px-4 py-3 dark:bg-[#473E30]",children:[(0,s.jsx)("div",{className:"font-typo bg-gradient-to-br from-[#FFD600] to-[#FFA116] bg-clip-text font-bold text-transparent",children:u("premiumTitle")}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-1 self-stretch",children:[(0,s.jsx)("div",{className:"text-sd-primary justify-start self-stretch text-xs",children:u("premiumDesc")}),(0,s.jsx)("div",{className:"inline-flex items-center justify-start gap-0.5",children:(0,s.jsxs)(a(),{href:h.f0.premiumDetail({sourceType:"leet_models"}),className:"text-sd-brand-lc-orange flex w-fit items-center text-xs",target:"_blank",children:[u("learnMore"),(0,s.jsx)(A.d,{icon:i.U6Q,variant:"12px"})]})})]})]})})]}),null==j?void 0:null===(n=j.filter(e=>e.premiumModel))||void 0===n?void 0:n.map(e=>(0,s.jsx)(G,{item:e,isPremium:S,onScrollApiKey:M},e.model.id)),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"text-sd-muted-foreground justify-start text-sm font-medium leading-tight",children:u("basicModels")})}),null==j?void 0:null===(r=j.filter(e=>!e.premiumModel))||void 0===r?void 0:r.map(e=>(0,s.jsx)(G,{item:e,onScrollApiKey:M},e.model.id)),(0,s.jsx)("div",{className:"w-full py-2",children:(0,s.jsx)("div",{className:"bg-sd-accent h-px w-full"})}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-1 self-stretch py-1",children:[(0,s.jsx)("div",{className:"text-sd-muted-foreground justify-start text-sm font-medium leading-tight",children:u("rules")}),(0,s.jsx)("div",{className:"text-sd-muted-foreground self-stretch text-xs font-normal leading-none",children:u("rulesDesc")})]}),(0,s.jsx)(v.p,{placeholder:u("rulesPlaceholder"),value:_,onChange:e=>m(e.target.value),onBlur:()=>B({rules:_}),onFocus:()=>b.i.ideSettingsModelRulesClick((0,y.zg)())}),(0,s.jsx)("div",{className:"w-full py-2",children:(0,s.jsx)("div",{className:"bg-sd-accent h-px w-full"})}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-1 self-stretch py-1",children:[(0,s.jsx)("div",{className:"text-sd-muted-foreground justify-start text-sm font-medium leading-tight",children:u("apikeysTitle")}),(0,s.jsxs)("div",{className:"text-sd-muted-foreground justify-start self-stretch  text-xs font-normal leading-5",children:[u("apiKeyDesc"),(0,s.jsx)("br",{}),u("apiKeyDescTip")]})]}),null===(o=Object.keys(L))||void 0===o?void 0:o.map(e=>(0,s.jsx)(N,{compayName:e,modelList:L[e]},e))]})}},80229:(e,t,n)=>{"use strict";n.d(t,{D:()=>p});var s=n(77528),i=n(55456),l=n(96540),r=n(70354),a=n(35593),o=n(9640);let d=()=>(0,a.dBE)(o.nS,{},{select:e=>e.userChatInfo,enabled:!0});var c=n(17912),u=n(47561),m=n(92825);let p=()=>{var e,t,n,a;let{data:o}=d(),p=(0,c.S)(e=>e.setInitModelList),x=(0,c.S)(e=>e.modelList),f=(0,c.S)(e=>e.setModelGlobalRules),{data:h}=(0,r.Xe)(),g=null!==(n=null==h?void 0:null===(e=h.userStatus)||void 0===e?void 0:e.username)&&void 0!==n?n:"",A=null!==(a=null==h?void 0:null===(t=h.userStatus)||void 0===t?void 0:t.isPremium)&&void 0!==a&&a;(0,l.useEffect)(()=>{var e;if(x&&x.length>0||(f(null!==(e=null==o?void 0:o.rules)&&void 0!==e?e:""),!(null==o?void 0:o.models)))return;let t=o.models.map(e=>{var t;return{model:(0,i._)((0,s._)({},null==e?void 0:e.model),{credentials:null!==(t=(0,u.Pt)(null==e?void 0:e.model.companyName,g))&&void 0!==t?t:void 0}),enabled:null==e?void 0:e.enabled,premiumModel:null==e?void 0:e.premiumModel}}),n=(0,m.j0)(t,A);n&&p(t,n.model)},[o,f,p,g,x,A])}},72115:(e,t,n)=>{"use strict";n.d(t,{c:()=>nc});var s=n(74848),i=n(96540),l=n(70354),r=n(15440),a=n(79656),o=n(84038),d=n(12124),c=n(3519),u=n(42412),m=n(76033),p=n(87320);function x(){let{t:e}=(0,o.Bd)("ai-agent-chat",{keyPrefix:"setting"}),[t,n]=(0,i.useState)();return(0,s.jsxs)(d.lG,{open:t,onOpenChange:n,children:[(0,s.jsx)(d.zM,{asChild:!0,children:(0,s.jsx)(c.m_,{label:e("title"),placement:"bottom-end",children:(0,s.jsx)(u.$,{variant:"ghost",className:"text-sd-muted-foreground h-6 w-6 rounded-full",onlyIcon:!0,onClick:()=>n(!0),children:(0,s.jsx)(m.d,{variant:"14px",padding:"none",icon:a.BH7})})})}),(0,s.jsx)(d.Cf,{className:"sd-sm:max-w-[780px] mx-4 w-auto p-0",closeClassName:"top-[22px]",onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center rounded-xl py-2",children:(0,s.jsx)(p.v,{})})})]})}var f=n(33935),h=n(50859),g=n(7323),A=n(17912),v=n(29708);let C="QD_AI_AGENT_SURVEY",b=window.localStorage,y="qd_leet_survey",k=()=>!!b&&"true"===localStorage.getItem(C),j=()=>{b&&localStorage.setItem(C,"true")},_=e=>{let{surveyJson:t,leetcoinsReward:n}=e,[l,r]=(0,i.useState)(!1),{t:a}=(0,o.Bd)("problems",{keyPrefix:"satisfactionSurvey"}),[d,c]=[(0,i.useCallback)(()=>r(!0),[r]),(0,i.useCallback)(()=>r(!1),[r])];(0,i.useEffect)(()=>d(),[d]);let{mutateAsync:u,completeSurvey:m}=(0,h.w)(),p=(0,i.useCallback)((e,t)=>{let n=null!==e.satisfaction_rate;n&&(b&&localStorage.setItem(y,"true"),m(y)),u({surveySlug:y,surveyResponse:JSON.stringify(e),cancelled:!1,completedRequiredQuestions:n,completedAllQuestions:t}),j()},[u,m]),x=(0,i.useCallback)(e=>{let t=null!==e.satisfaction_rate;u({surveySlug:y,surveyResponse:JSON.stringify(e),cancelled:!0,completedAllQuestions:!1,completedRequiredQuestions:t})},[u]);return l?(0,s.jsx)(f.H,{className:"z-modal-9 fixed bottom-[10px] right-[10px]",surveyJson:t,onSubmit:p,onCancel:x,onClose:c,leetCoinsReward:n,submitBtnText:a("submitBtnText")}):null},S=()=>{let e=(0,A.S)(e=>e.aiGenerating),[t,n]=(0,i.useState)(!1),{data:l,isInitialLoading:r}=(0,g.A)(y,{enabled:!!t}),a=(0,i.useRef)(1);return((0,i.useEffect)(()=>{e===v.SE.Generating&&(k()||(a.current>=2?n(!0):a.current+=1))},[e]),!r&&l&&l.surveyJson&&l.showSurvey)?(0,s.jsx)(_,{surveyJson:l.surveyJson,leetcoinsReward:l.leetcoinAmount}):null};var w=n(35593),E=n(9640);let I=e=>(0,w.CtF)(E.nS,{sessionId:null!=e?e:""},{select:e=>e.chatSession,cacheTime:0,staleTime:0,retry:!1,useErrorBoundary:!1,onError:()=>0}),N=e=>{let[t,n]=(0,i.useState)(null),[s,l]=(0,i.useState)(!0),r=(0,i.useCallback)(()=>{if(!t||t.scrollHeight<=t.clientHeight)return;let n=t.scrollHeight-t.scrollTop-t.clientHeight;l(n<50),null==e||e(n<50)},[t,e]);(0,i.useEffect)(()=>{if(t)return t.addEventListener("scroll",r),()=>t.removeEventListener("scroll",r)},[r,t]);let a=(0,i.useCallback)(()=>{t&&(t.scrollTo({top:t.scrollHeight+50,behavior:"smooth"}),l(!0))},[t]);return(0,i.useEffect)(()=>{if(!t)return;let e=new ResizeObserver(()=>{t.scrollHeight<=t.clientHeight&&(s||l(!0))});return e.observe(t),()=>{e.disconnect()}},[t,s,a]),{setContainerRef:n,scollToBottom:a,isAtBottom:s,containerRef:t}};var B=n(98031),L=n(20239),M=n(77528),D=n(55456),F=n(97283),G=n(87134),H=n(98569);let O=(0,F.y)((0,G.kg)({allListeners:{},lastEvents:{}},(e,t)=>({subscribe:(n,s,i)=>{let{allListeners:l,lastEvents:r}=t(),a=l[n]||new Set;return a.add(s),e(e=>(0,D._)((0,M._)({},e),{allListeners:(0,D._)((0,M._)({},e.allListeners),{[n]:a})})),(null==i?void 0:i.startWithLastEvent)&&r[n]&&s(r[n]),()=>{let{allListeners:i}=t(),l=i[n];l&&(l.delete(s),0===l.size?e(e=>(0,D._)((0,M._)({},e),{allListeners:(0,H.A)(i,n)})):e(e=>(0,D._)((0,M._)({},e),{allListeners:(0,D._)((0,M._)({},e.allListeners),{[n]:l})})))}},emit:(n,s,i)=>{var l;let r=null!==(l=t().allListeners[n])&&void 0!==l?l:new Set;0!==r.size&&(r.forEach(e=>e(s,{isExternal:null==i?void 0:i.isExternal})),(null==i?void 0:i.keepLast)!==!1&&e(e=>(0,D._)((0,M._)({},e),{lastEvents:(0,D._)((0,M._)({},e.lastEvents),{[n]:s})})))},unsubscribe:(n,s)=>{let{allListeners:i}=t(),l=i[n];l&&(l.delete(s),0===l.size&&e(e=>(0,D._)((0,M._)({},e),{allListeners:(0,H.A)(i,n)})))}}))).getState(),q=()=>(0,w.jhB)(E.nS),T="chat:switch-session-pass-completion",V=e=>{if(!e||0===e.length)return!1;let t=e[0];if(t.role===v.e4.Assistant&&!t.displayTitle&&!t.content&&!t.thinkingContent){var n;return V(null!==(n=t.children)&&void 0!==n?n:[])}return t.role!==v.e4.Tool},z=(e,t)=>{var n;let s=[];if(!e||0===e.length)return[];let i=null!=t?t:e.length-1,l=e[i],r=null!==(n=l.children)&&void 0!==n?n:[],a={accepted:l.accepted,applied:l.applied,content:l.content,displayTitle:l.displayTitle,id:l.id,liked:l.liked,parent:l.parent,role:l.role,status:l.status,thinkingContent:l.thinkingContent,createdAt:l.createdAt,updatedAt:l.updatedAt,thinkingTime:l.thinkingTime};return s.push((0,D._)((0,M._)({},a),{brotherIds:e.map(e=>e.id),isToolRoleLastNode:l.role===v.e4.Tool&&(l.status===v.rI.Incomplete||V(r))})),r&&(null==r?void 0:r.length)>0&&s.push(...z(r)),s},P=(e,t)=>{let n=z(e,t);for(let e=0;e<n.length;e++){let t=n[e],s=n[e-1],i=n[e+1];t.isAiMessageStart=t.role!==v.e4.User&&(!s||s.role===v.e4.User),t.isAiMessageEnd=[v.rI.Complete,v.rI.Incomplete,v.rI.Error].includes(t.status)&&t.role!==v.e4.User&&(!i||i.role===v.e4.User),t.role!==v.e4.User&&s&&(null==s?void 0:s.role)!==v.e4.User&&(t.brotherIds=s.brotherIds)}return n},U=(e,t)=>{if(!e)return[];let n=[];for(let i of e){var s;if(i.id===t)return e;let l=null!==(s=i.children)&&void 0!==s?s:[];if(l&&(null==l?void 0:l.length)>0&&(n=U(l,t)).length>0)break}return n};function R(e,t,n){if(!t)return e.push(n),!0;for(let s of e){if(s.id===t)return s.children=s.children||[],s.children.some(e=>e.id===n.id)||s.children.push(n),!0;if(s.children&&s.children.length>0&&R(s.children,t,n))return!0}return!1}function K(e,t){if(!t)return!1;for(let n=0;n<e.length;n++){let s=e[n];if(s.id===t)return e.splice(n,1),!0;if(s.children&&s.children.length>0&&K(s.children,t))return!0}return!1}function W(e,t,n){let s=null!=e?e:[],i=s.findIndex(e=>e.id===t);if(-1===i){if(s.length>0){var l;let e=s[0];n.brotherIds=[...null!==(l=e.brotherIds)&&void 0!==l?l:[e.id],n.id]}else n.brotherIds=[n.id];return[n]}if(i===s.length-1)return n.brotherIds=[n.id],s.push(n),s;let r=s[i+1];return n.brotherIds=r.brotherIds?[...r.brotherIds,n.id]:[n.id],[...s.slice(0,i+1),n]}function X(e,t,n){return{accepted:0,applied:0,content:e,id:t,liked:v.lK.None,parent:n,role:v.e4.User,status:v.rI.Complete,thinkingContent:"",updatedAt:new Date().toISOString(),createdAt:new Date().toISOString()}}function Z(e){var t,n;return{accepted:0,applied:0,content:null!==(t=e.content)&&void 0!==t?t:"",id:e.messageId,liked:v.lK.None,displayTitle:e.displayTitle,parent:e.parentMessageId,role:e.role,status:e.status,thinkingContent:null!==(n=e.thinkingContent)&&void 0!==n?n:"",updatedAt:new Date().toISOString(),createdAt:new Date().toISOString()}}let $=()=>{let e=(0,A.S)(e=>e.setSessionMessageList),t=(0,A.S)(e=>e.setSessionMessageTree),n=(0,A.S)(e=>e.setAiGenerating),s=e=>{let{sessionMessagesTree:n}=(0,A.f)();R(n,e.parent,e)&&t([...n])};return{errorEvent:(t,n)=>{let{sessionMessagesList:i}=(0,A.f)(),l=i[i.length-1];if(l.status===v.rI.Pending){var r;l.status=v.rI.Error,l.id=t,l.content=n,null===(r=l.brotherIds)||void 0===r||r.push(t),e([...i]);return}l.status===v.rI.Generating&&(l.status=v.rI.Complete,e([...i]));let a=Z({content:n,parentMessageId:l.id,messageId:t,status:v.rI.Error,role:v.e4.System});l.role!==v.e4.User&&(a.brotherIds=l.brotherIds),e([...i,a]),s(l)},nodeEndEvent:()=>{let{sessionMessagesList:e}=(0,A.f)(),t=e[e.length-1];t.status=v.rI.Complete,s(t)},nodeStartEvent:(t,n)=>{let{sessionMessagesList:i}=(0,A.f)(),l=i[i.length-1];if(l.status===v.rI.Pending){var r;l.displayTitle=n,l.id=t,l.status=v.rI.Generating,l.role=v.e4.Tool,null===(r=l.brotherIds)||void 0===r||r.push(t),e([...i]);return}l.status===v.rI.Generating&&(l.status=v.rI.Complete,s(l));let a=Z({displayTitle:n,parentMessageId:l.id,messageId:t,status:v.rI.Generating,role:v.e4.Tool});l.role!==v.e4.User&&(a.brotherIds=l.brotherIds),e([...i,a])},systemComplete:()=>{let{sessionMessagesList:t}=(0,A.f)(),i=t[t.length-1];i.isAiMessageEnd||(i.status===v.rI.Generating&&(i.status=v.rI.Complete),i.isAiMessageEnd=!0,e([...t]),s(i)),n(v.SE.Default)},systemPending:()=>{let{sessionMessagesList:n,sessionMessagesTree:s}=(0,A.f)(),i=n[n.length-1];if([v.rI.Pending].includes(i.status)&&i.role!==v.e4.User){K(s,i.id)&&t([...s]),i.role=v.e4.System,i.isAiMessageStart=!0,e([...n]);return}if([v.rI.Generating].includes(i.status)&&i.role!==v.e4.User){K(s,i.id)&&t([...s]),i.brotherIds=[],i.role=v.e4.System,i.status=v.rI.Pending,e([...n]);return}let l=Z({content:"",parentMessageId:i.id,messageId:"",status:v.rI.Pending,role:v.e4.System});l.isAiMessageStart=!0,l.brotherIds=[],e([...n,l])},textEvent:(t,n)=>{let{sessionMessagesList:s}=(0,A.f)(),i=s[s.length-1];if(i.status===v.rI.Pending){var l;i.content+=n,i.id=t,i.status=v.rI.Generating,i.role=v.e4.Assistant,null===(l=i.brotherIds)||void 0===l||l.push(t),e([...s]);return}if(i.status===v.rI.Generating){i.content=i.content+n,e([...s]);return}i.role===v.e4.Tool&&(i.isToolRoleLastNode=!0);let r=Z({content:n,parentMessageId:i.id,messageId:t,status:v.rI.Generating,role:v.e4.Assistant});i.role!==v.e4.User&&(r.brotherIds=i.brotherIds),e([...s,r])},thinkingEvent:(t,n)=>{let{sessionMessagesList:s}=(0,A.f)(),i=s[s.length-1];if(i.status===v.rI.Pending){var l;i.thinkingContent+=n,i.id=t,i.status=v.rI.Generating,i.role=v.e4.Assistant,null===(l=i.brotherIds)||void 0===l||l.push(t),e([...s]);return}if(i.status===v.rI.Generating){i.thinkingContent=i.thinkingContent+n,e([...s]);return}let r=Z({content:n,parentMessageId:i.id,messageId:t,status:v.rI.Generating,role:v.e4.Assistant});i.role!==v.e4.User&&(r.brotherIds=i.brotherIds),e([...s,r])},thinkingTimeEvent:t=>{let{sessionMessagesList:n}=(0,A.f)(),s=n[n.length-1];s.status===v.rI.Generating&&(s.thinkingTime=Number(t),e([...n]))},updateNodeStatus:(t,n)=>{let{sessionMessagesList:i}=(0,A.f)(),l=i[i.length-1];v.rI.Incomplete===n&&(l.status=v.rI.Incomplete,l.isAiMessageEnd=!0,l.id=t,l.isToolRoleLastNode=!0,e([...i]),s(l))},saveLastNodeToTree:()=>{let{sessionMessagesList:e}=(0,A.f)();s(e[e.length-1])}}},Y=()=>{let{t:e}=(0,o.Bd)("ai-agent-chat"),t=(0,A.S)(e=>e.setShowTokenLimit),n=(0,A.S)(e=>e.setAiGenerating),s=(0,A.S)(e=>e.setEventSource),l=(0,A.S)(e=>e.eventSource),{errorEvent:r,nodeEndEvent:a,nodeStartEvent:d,systemComplete:c,systemPending:u,textEvent:m,thinkingEvent:p,thinkingTimeEvent:x,updateNodeStatus:f,saveLastNodeToTree:h}=$(),{toast:g}=(0,L.dj)();if(!window.EventSource)throw Error("not support sse");let C=(0,i.useCallback)(()=>{n(v.SE.Default),l&&l.readyState===EventSource.OPEN&&(l.close(),s(void 0)),h()},[l]);(0,i.useEffect)(()=>(O.subscribe(T,C),()=>{O.unsubscribe(T,C)}),[C]);let{mutateAsync:b}=q(),y=async e=>{try{var t,n;let s=await b({sessionId:e});(null===(t=s.stopCompletion)||void 0===t?void 0:t.ok)||g({variant:"error",description:(null===(n=s.stopCompletion)||void 0===n?void 0:n.error)||"system error"})}catch(e){g({variant:"error",description:JSON.stringify(e)||"system error"})}};return i=>{if((0,A.f)().eventSource)return;let l=new EventSource("".concat(B.Zi,"/chat/").concat(i,"/"),{withCredentials:!0});s(l),l.addEventListener("message",e=>{let i=(0,A.f)().eventSource;if((0,A.f)().aiGenerating===v.SE.Default||!i)return;let o=JSON.parse(e.data);switch(o.type){case"thinking":n(v.SE.Generating),p(o.id,o.content);break;case"thinking_time":x(o.content);break;case"text":n(v.SE.Generating),m(o.id,o.content);break;case"node_start":n(v.SE.Generating),d(o.id,o.content);break;case"node_end":a();break;case"system":"[DONE]"===o.content&&(c(),l.close(),s(void 0)),"[PENDING]"===o.content&&u(),"[RATE_LIMITED]"===o.content&&(c(),l.close(),s(void 0),t(!0));break;case"error":r(o.id,o.content);break;case"status":f(o.id,o.content)}}),l.addEventListener("error",t=>{t.preventDefault();let n=(0,A.f)().eventSource;switch(null==n?void 0:n.readyState){case EventSource.CONNECTING:n&&(n.close(),s(void 0));break;case EventSource.OPEN:case EventSource.CLOSED:c();break;default:g({description:e("generateFailed"),variant:"error"}),n&&(n.close(),s(void 0),y(i))}})}};var J=n(50212),Q=n(72556),ee=n(15685),et=n(91106),en=n.n(et),es=n(71320),ei=n(72187),el=n(82479);let er=()=>{let{t:e}=(0,o.Bd)("ai-agent-chat");return(0,s.jsxs)(d.lG,{children:[(0,s.jsx)(d.zM,{asChild:!0,children:(0,s.jsxs)(u.$,{variant:"secondary",className:"mt-4 w-fit rounded-full",children:[(0,s.jsx)(m.d,{icon:ee.ijD,className:"mr-2"}),e("viewDemoVideo")]})}),(0,s.jsxs)(d.Cf,{className:"sd-sm:max-w-[1200px] sd-md:w-[80%]",children:[(0,s.jsx)(d.c7,{children:(0,s.jsx)(d.L3,{children:e("demoVideo")})}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsx)("video",{className:"aspect-video w-full rounded-lg",src:"https://assets.leetcode.com/static_assets/Agent_demo_en_0813.mp4",controls:!0})})]})]})},ea=e=>{var t;let{sourceType:n}=e,{t:i}=(0,o.Bd)("ai-agent-chat"),a=(0,l.Xe)(),{isSignedIn:d}=(null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.userStatus)||{},c=ei.f0.premiumDetail({sourceType:n}),u=d?c:ei.f0.signIn(c);return(0,s.jsx)(en(),{href:u,className:(0,el.xF)("text-sd-brand-lc-orange w-fit"),onClick:()=>r.L.qdLeetSubscribeClick((0,es.EM)()),target:"_blank",children:i("agentFreeSubcribe")})},eo=()=>{var e;let{t}=(0,o.Bd)("ai-agent-chat"),n=(0,l.Xe)(),{isPremium:r}=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.userStatus)||{},a=(0,i.useMemo)(()=>r?(0,s.jsxs)("div",{className:"mb-2.5 flex flex-col items-center justify-center gap-1",children:[(0,s.jsx)("p",{className:"text-sd-muted-foreground",children:t("premiumAgentEmptyInfo1")}),(0,s.jsx)("p",{className:"text-sd-muted-foreground",children:t("premiumAgentEmptyInfo2")})]}):(0,s.jsxs)("div",{className:"mb-2.5 flex flex-col items-center justify-center gap-1",children:[(0,s.jsx)("p",{className:"text-sd-muted-foreground",children:t("unPremiumAgentEmptyInfo")}),(0,s.jsx)("p",{className:"text-sd-muted-foreground",children:(0,s.jsx)(ea,{sourceType:"ai-chat-not-premium"})}),(0,s.jsx)(er,{})]}),[r,t]);return(0,s.jsxs)("div",{className:" absolute bottom-0 left-0 top-0 flex h-full w-full flex-col items-center justify-center gap-6 text-sm ring-0",children:[(0,s.jsx)("p",{className:"text-[32px]",children:"\uD83D\uDE0E"}),a]})};var ed=n(29036),ec=n(90005),eu=n(94884),em=n.n(eu),ep=n(74585),ex=n(84231),ef=n.n(ex),eh=n(17421),eg=n.n(eh),eA=n(73178);let ev=(0,ep.T)({highlight:!1,gfm:!0,math:!0,html:!0,mcqs:!0,diaporama:!0,attrs:!0,embedVideos:!0,normalVideo:!0,groupedCode:!0,relAttribute:!0,httpsImagesOnly:!0,premiumOnlyVideo:!0,htmlSanitization:!0,preserveLineBreaks:!0,nodebbImageTransformation:!0,brokenImageHolder:!0,linkSift:!0,linkTargetBlank:!0,aliPlayerVideo:!1,slides:!0,toc:!0,customComponent:!0,aiChatCode:!0,mermaid:!0}),eC=e=>{let{content:t,messageId:n,workflowId:i,status:l,useGrayStyle:r}=e;return(0,s.jsx)(eA.X.Provider,{value:{messageId:n,status:l,workflowId:i},children:(0,s.jsx)(ev,{content:t||"",customStyles:r?eg():ef()})})},eb=e=>{var t;let{chatMessage:n}=e,[l,r]=(0,i.useState)(n.status===v.rI.Generating);(0,ec.I)(em());let o=(0,i.useMemo)(()=>[v.rI.Complete,v.rI.Incomplete].includes(n.status),[n.status]),d=(0,i.useMemo)(()=>v.rI.Complete===n.status?a.QRE:v.rI.Incomplete===n.status?a.lEd:a.GEE,[n.status]);return(0,i.useEffect)(()=>{o&&r(!1)},[o]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:(0,el.xF)("flex w-fit cursor-pointer items-center gap-1"),onClick:()=>{o&&r(!l)},children:[(0,s.jsx)(m.d,{icon:d,className:(0,el.xF)("relative",{"text-sd-muted-foreground":!o,"text-sd-green-400":v.rI.Complete===n.status,"text-sd-warning":v.rI.Incomplete===n.status}),variant:"12px"}),(0,s.jsx)("div",{className:(0,el.xF)("text-sd-foreground relative overflow-hidden text-sm",{[em().shiningText]:!o}),children:n.displayTitle}),o&&(0,s.jsx)(m.d,{icon:a.Jt$,className:(0,el.xF)("text-sd-muted-foreground transition-all",{"rotate-180":l}),variant:"12px"})]}),!!n.content&&(0,s.jsx)("div",{className:(0,el.xF)("border-sd-border ml-1.5 flex flex-col gap-2 border-l  pl-2 pt-4",{"pt-0":!l&&n.isToolRoleLastNode}),children:(0,s.jsx)("div",{className:(0,el.xF)("transition-all duration-300 ",{"max-h-0 overflow-hidden opacity-0":!l,"pb-4 opacity-100":l}),children:(0,s.jsx)(eC,{content:n.content,messageId:n.id,status:n.status,workflowId:null!==(t=n.workflowId)&&void 0!==t?t:"",useGrayStyle:!0})})})]})},ey=e=>{var t;let{chatMessage:n}=e,{t:l}=(0,o.Bd)("ai-agent-chat"),[r,d]=(0,i.useState)(n.status===v.rI.Generating);(0,ec.I)(em());let c=(0,i.useMemo)(()=>[v.rI.Complete,v.rI.Incomplete].includes(n.status)||!!(null==n?void 0:n.thinkingTime),[n.status,null==n?void 0:n.thinkingTime]),p=(0,i.useMemo)(()=>v.rI.Complete===n.status||(null==n?void 0:n.thinkingTime)?"".concat(l("thinked")," ").concat(Math.floor((null==n?void 0:n.thinkingTime)||0),"s"):v.rI.Incomplete===n.status?l("thinkStop"):l("thinking"),[n.status,null==n?void 0:n.thinkingTime,l]);return((0,i.useEffect)(()=>{c&&d(!1)},[c]),n.thinkingContent)?(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)(u.$,{variant:"secondary",size:"xs",className:"mb-3 flex gap-1 rounded-full px-3",onClick:()=>{d(!r)},children:[p,(0,s.jsx)(m.d,{icon:a.Jt$,className:(0,el.xF)("text-sd-muted-foreground transition-all",{"rotate-180":r}),variant:"12px"})]}),(0,s.jsx)("div",{className:(0,el.xF)("border-sd-border ml-1.5 flex flex-col gap-2 border-l pl-3  text-sm"),children:(0,s.jsx)("div",{className:(0,el.xF)("transition-all duration-300",{"max-h-0 overflow-hidden opacity-0":!r,"opacity-100":r}),children:(0,s.jsx)(eC,{content:n.thinkingContent||"",messageId:"",status:n.status,workflowId:null!==(t=n.workflowId)&&void 0!==t?t:"",useGrayStyle:!0})})})]}):null},ek=e=>{var t;let{chatMessage:n}=e;return n.displayTitle||n.content||n.thinkingContent?n.role===v.e4.Tool?(0,s.jsx)(eb,{chatMessage:n}):(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(ey,{chatMessage:n}),(0,s.jsx)(eC,{content:n.content||"",status:n.status,workflowId:null!==(t=n.workflowId)&&void 0!==t?t:"",messageId:n.id})]}):null},ej=e=>{let{content:t}=e;return(0,s.jsx)("div",{className:"text-sd-red-500 flex w-full flex-col items-start justify-start gap-[10px] rounded-[10px]",children:t})},e_=()=>(0,w.JRi)(E.nS);var eS=n(13814);let ew=(e,t)=>{let n=e.findIndex(e=>e.id===t);for(let t=n;t>=0;t--){let n=e[t-1],s=e[t];if(n&&n.role===v.e4.User)return s}return null},eE=e=>{let{chatMessage:t}=e,n=(0,A.S)(e=>e.setSessionMessageList),l=(0,A.S)(e=>e.setAiGenerating),o=(0,A.S)(e=>e.aiGenerating),d=(0,A.S)(e=>e.currentSessionId),c=t.brotherIds||[],p=(0,i.useMemo)(()=>{if(t.role===v.e4.User)return t.id;let e=ew((0,A.f)().sessionMessagesList,t.id);return e?e.id:""},[t.id,t.role]),x=c.indexOf(p),f=Y(),h=e=>{let t=(0,A.f)().sessionMessagesTree,s=(0,A.f)().sessionMessagesList,i=s.findIndex(e=>e.id===p),r=P(U(t,e),c.indexOf(e)),a=r[r.length-1];if(!a||[v.rI.Pending,v.rI.Generating].includes(a.status)){let e=(0,eS.K3)(r,e=>e.role===v.e4.User),t=r[e+1];r=[...r.slice(0,e+1),{accepted:0,applied:0,content:"",id:t.id,liked:t.liked,displayTitle:"",parent:t.parent,role:t.role,status:v.rI.Pending,thinkingContent:"",updatedAt:t.updatedAt,createdAt:t.createdAt,isAiMessageStart:!0}],n([...s.slice(0,i),...r]),l(v.SE.Pending),setTimeout(()=>{d&&f(d)},100)}else n([...s.slice(0,i),...r])},g=e=>{r.L.qdLeetMessageItemPaginationClick((0,es.zX)({qd_author:t.role===v.e4.User?"user":"leet",qd_status:"",qd_type:t.workflowId?"command":"text"})),o!==v.SE.Default?(O.emit(T,{}),setTimeout(()=>{h(e)},200)):h(e)};return c&&c.length<=1?null:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.$,{variant:"ghost",onlyIcon:!0,size:"xs",onClick:()=>{g(c[x-1])},disabled:0===x,children:(0,s.jsx)(m.d,{icon:a.Wzs,className:"text-sd-muted-foreground hover:text-sd-foreground",variant:"12px"})}),(0,s.jsxs)("span",{className:"text-sd-muted-foreground text-xs",children:[x+1,"/",c.length]}),(0,s.jsx)(u.$,{variant:"ghost",onlyIcon:!0,size:"xs",onClick:()=>{g(c[x+1])},disabled:x+1===c.length,children:(0,s.jsx)(m.d,{icon:a.XkK,className:"text-sd-muted-foreground hover:text-sd-foreground",variant:"12px"})})]})};var eI=n(61252);let eN=e=>{let{content:t,chatMessage:n}=e,[i,l]=(0,eI.R)(t,{successDuration:1e3}),{t:d}=(0,o.Bd)("ai-agent-chat"),{t:p}=(0,o.Bd)("common");return i?(0,s.jsx)(c.m_,{label:p("copied"),open:!0,children:(0,s.jsx)(u.$,{variant:"ghost",onlyIcon:!0,size:"xs",className:"h-6 w-6 rounded",children:(0,s.jsx)(m.d,{icon:a.e68,className:"text-sd-green-500",variant:"14px"})})}):(0,s.jsx)(c.m_,{label:d("copy"),children:(0,s.jsx)(u.$,{variant:"ghost",onlyIcon:!0,size:"xs",onClick:()=>{r.L.qdLeetMessageItemCopyClick((0,es.zX)({qd_author:n.role===v.e4.User?"user":"leet",qd_status:n.status===v.rI.Incomplete?"incompleted":"completed",qd_type:n.workflowId?"command":"text"})),l(t)},className:"h-6 w-6 rounded",children:(0,s.jsx)(m.d,{icon:a.$3n,className:"text-sd-muted-foreground hover:text-sd-foreground",variant:"14px"})})})},eB=()=>(0,w.GoU)(E.nS),eL=()=>{let{setAiGenerating:e,setShowTokenLimit:t,setSessionMessageList:n}=(0,A.S)(),{mutateAsync:s}=eB(),i=Y(),{t:l}=(0,o.Bd)("ai-agent-chat"),{toast:r}=(0,L.dj)();return async a=>{let{sessionMessagesList:o,currentSessionId:d,currentModel:c}=(0,A.f)();if(c&&d)try{var u,m,p,x,f,h,g;e(v.SE.Pending);let A=await s({data:{modelId:c.id,parentMessageId:a,sessionId:d,credentials:(null===(u=c.credentials)||void 0===u?void 0:u.useKey)?JSON.stringify({api_key:c.credentials.apiKey}):void 0,think:c.thinkingModel}});if(A&&(null===(m=A.regenerateAiResponse)||void 0===m?void 0:m.ok)){t(!!A.regenerateAiResponse.rateLimited);let e=o.findIndex(e=>e.id===a),s=Z({content:"",parentMessageId:a,messageId:"",status:v.rI.Pending,role:v.e4.System});s.isAiMessageStart=!0;let l=null!==(p=o[e+1].brotherIds)&&void 0!==p?p:[];s.brotherIds=[...l],n([...o.slice(0,e+1),s]),A.regenerateAiResponse.sessionId&&i(A.regenerateAiResponse.sessionId)}else A&&(null===(x=A.regenerateAiResponse)||void 0===x?void 0:x.rateLimited)&&t(!0),A&&(null===(f=A.regenerateAiResponse)||void 0===f?void 0:f.error)&&r({description:null!==(g=null==A?void 0:null===(h=A.regenerateAiResponse)||void 0===h?void 0:h.error)&&void 0!==g?g:l("error"),variant:"info"}),e(v.SE.Default)}catch(t){console.error(t),e(v.SE.Default)}}},eM=(e,t)=>{let n=e.findIndex(e=>e.id===t);for(let t=n;t>=0;t--){let n=e[t];if(n.role===v.e4.User)return n}return null},eD=e=>{let{chatMessage:t}=e,{t:n}=(0,o.Bd)("ai-agent-chat"),i=(0,A.S)(e=>e.aiGenerating),l=(0,A.S)(e=>e.sessionMessagesList),d=eL(),p=(0,Q._)(()=>{r.L.qdLeetMessageItemRetryClick((0,es.zX)({qd_author:"leet",qd_status:t.status===v.rI.Incomplete?"incompleted":"completed",qd_type:t.workflowId?"command":"text"}));let e=eM(l,t.id);e&&d(e.id)});return(0,s.jsx)(c.m_,{label:n("tryAagin"),children:(0,s.jsx)(u.$,{variant:"ghost",onlyIcon:!0,size:"xs",disabled:i!==v.SE.Default,onClick:p,className:"h-6 w-6 rounded",children:(0,s.jsx)(m.d,{icon:a.$3Z,className:"text-sd-muted-foreground hover:text-sd-foreground",variant:"14px"})})})},eF=e=>{let{chatMessage:t}=e,n=(0,A.S)(e=>e.sessionMessagesList),l=(0,A.S)(e=>e.setSessionMessageList),o=(0,A.S)(e=>e.sessionMessagesTree),d=(0,A.S)(e=>e.setSessionMessageTree),c=(0,i.useMemo)(()=>t.liked===v.lK.Like,[t.liked]),p=(0,i.useMemo)(()=>t.liked===v.lK.Dislike,[t.liked]),{mutateAsync:x}=e_(),f=async(e,s)=>{"like"===s?r.L.qdLeetMessageItemUpvoteClick((0,es.zX)({qd_author:"leet",qd_status:t.status===v.rI.Incomplete?"incompleted":"completed",qd_type:t.workflowId?"command":"text"})):r.L.qdLeetMessageItemDownvoteClick((0,es.zX)({qd_author:"leet",qd_status:t.status===v.rI.Incomplete?"incompleted":"completed",qd_type:t.workflowId?"command":"text"}));try{var i;let s=await x({messageId:t.id,like:e});(null===(i=s.likeChatMessage)||void 0===i?void 0:i.ok)&&(n.forEach(n=>{n.id===t.id&&(n.liked=e)}),l([...n]),function e(t,n,s){if(!n)return!1;for(let i of t){if(i.id===n)return i.liked=s,!0;if(i.children&&i.children.length>0&&e(i.children,n,s))return!0}return!1}(o,t.id,e)&&d([...o]))}catch(e){}};return t&&t.isAiMessageEnd?t.status===v.rI.Error?(0,s.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,s.jsx)(eE,{chatMessage:t}),(0,s.jsx)(eD,{chatMessage:t})]}):(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-1",children:[(0,s.jsx)(eE,{chatMessage:t}),(0,s.jsx)(eN,{content:t.content,chatMessage:t}),(0,s.jsx)(eD,{chatMessage:t}),(0,s.jsx)(u.$,{variant:"ghost",onlyIcon:!0,size:"xs",className:(0,el.xF)("text-sd-muted-foreground hover:text-sd-green-400 h-6 w-6 rounded",{"text-sd-green-400":c}),onClick:()=>f(c?v.lK.None:v.lK.Like,"like"),children:(0,s.jsx)(m.d,{icon:c?ee.Wcv:a.Wcv,variant:"14px"})}),(0,s.jsx)(u.$,{variant:"ghost",onlyIcon:!0,size:"xs",className:"text-sd-muted-foreground hover:text-sd-foreground h-6 w-6 rounded",onClick:()=>f(p?v.lK.None:v.lK.Dislike,"dislike"),children:(0,s.jsx)(m.d,{icon:p?ee.lS9:a.lS9,variant:"14px"})})]}):null};var eG=n(83325),eH=n(94187);let eO=()=>{let{t:e}=(0,o.Bd)("ai-agent-chat"),t=(0,eH.A)();return(0,s.jsx)("img",{src:"light"===t?"/_next/static/images/light-pending-9c28f1f18993ec103b273778b5f6a648.gif":"/_next/static/images/dark-pending-f313d6fe32951fb6b4d48ad3ee4f3821.gif",alt:e("generating"),className:(0,el.xF)("h-5 w-5")})},eq=e=>{let{showSpeedUp:t,text:n}=e,{t:i}=(0,o.Bd)("ai-agent-chat");return(0,s.jsxs)("div",{className:"text-sd-muted-foreground flex items-center gap-1 text-xs",children:[(0,s.jsx)(eO,{}),(0,s.jsxs)("span",{children:[n,"..."]}),t&&(0,s.jsx)("a",{className:"text-sd-brand-lc-orange text-xs",href:ei.f0.premiumDetail({sourceType:"ai-chat-speed-up"}),target:"_blank",rel:"noreferrer",onClick:()=>r.L.qdLeetAlertSpeedUpClick((0,es.EM)()),children:i("speedUp")})]})},eT=()=>{var e;let[t,n]=(0,i.useState)(!1),{t:r}=(0,o.Bd)("ai-agent-chat"),a=(0,A.S)(e=>e.aiGenerating),{data:d}=(0,l.Xe)(),c=!!(null==d?void 0:null===(e=d.userStatus)||void 0===e?void 0:e.isPremium);return(0,i.useEffect)(()=>{c||setTimeout(()=>{n(!0)},3e3)},[c]),(0,s.jsx)(eG.ED,{switched:a===v.SE.Generating,defaultItem:(0,s.jsx)(eq,{showSpeedUp:t,text:r("pending")}),activeItem:(0,s.jsx)(eq,{text:r("generating")})})};var eV=n(28066);let ez=e=>{let{chatMessage:t}=e;return(0,ec.I)(em()),(0,i.useEffect)(()=>{t&&[v.rI.Complete,v.rI.Incomplete].includes(t.status)&&r.L.qdLeetMessageItemExposure((0,es.zX)({qd_author:"leet",qd_status:t.status===v.rI.Incomplete?"incompleted":"completed",qd_type:t.workflowId?"command":"text"}))},[t]),(0,s.jsxs)("div",{className:"w-full",children:[t.isAiMessageStart&&(0,s.jsxs)("div",{className:"mb-2 flex h-6  items-center gap-[7px] self-stretch",children:[(0,s.jsx)("div",{"data-type":"avatar image",className:(0,el.xF)("border-sd-border relative flex h-[25px] w-[25px] items-center justify-center rounded-full",em().LeetIconBg),children:(0,s.jsx)(ed.L,{})}),(0,s.jsx)("div",{className:(0,el.xF)("text-sd-foreground text-sm"),children:(0,s.jsx)(eV.u,{children:"Leet"})}),[v.rI.Pending,v.rI.Generating].includes(t.status)&&v.e4.User!==t.role&&(0,s.jsx)(eT,{})]}),t.status===v.rI.Error&&(0,s.jsx)(ej,{content:t.content}),![v.rI.Error,v.rI.Pending].includes(t.status)&&[v.e4.Assistant,v.e4.Tool].includes(t.role)&&(0,s.jsx)(ek,{chatMessage:t}),(0,s.jsx)(eF,{chatMessage:t})]})};var eP=n(62202),eU=n(5559);let eR=()=>(0,w.Rtn)(E.nS),eK=e=>{let t=e.range?"range[".concat(e.range.start,"-").concat(e.range.end,"]"):"",n=t?"".concat(t,"\n    ","```"," ").concat(e.lang):"```";return"\n    Referred ".concat(e.type,":\n    ").concat(n,"\n    ").concat(e.content,"\n    ","```","\n  ")},eW=e=>e?"<context>".concat(e,"</context>"):"";function eX(e,t){let n=new RegExp("^".concat(t,"\r?\n")),s=new RegExp("".concat(t,"$")),i=e;return i.startsWith(t)&&(i=i.replace(n,"")),i.endsWith(t)&&(i=i.replace(s,"")),i}function eZ(e){let t;let n=e.match(/<context>([\s\S]*?)<\/context>/);if(!n)return{extracted:{},remainingText:e};let s=n[1]+"\n__END__",i=/Referred ([a-zA-Z]+):\s*([\s\S]*?)(?=\n\s*Referred [a-zA-Z]+:|\n__END__)/g,l=[];for(;null!==(t=i.exec(s));){let e=t[1].trim(),n=t[2].trim(),s={type:e,content:eX(n,"```")};if(e===v.wE.Code){let t,i;let l=n.match(/range\[(\d+)-(\d+)\]/);if(l){t=parseInt(l[1],10),i=parseInt(l[2],10);let r=n.match(/``` (\w+)/),a=r?r[1]:void 0,o=n.replace(/range\[\d+-\d+\]/,""),d=o.match(/```(?: \w+)?\s*([\s\S]*?)```$/);s={type:e,content:d?d[1].trim():eX(o.replace(/```$/,""),"```").trim(),range:{start:t,end:i},lang:a}}else s={type:e,content:eX(n,"```").trim()}}l.push(s)}return{quoteData:l,remainingText:e.replace(/<context>[\s\S]*?<\/context>\s*/g,"").trim()}}let e$=()=>{let{setAiGenerating:e,setQuoteContents:t,setChatContent:n,setShowTokenLimit:s,setSessionMessageTree:i,setSessionMessageList:a,setCurrentSessionId:d}=(0,A.S)(),{mutateAsync:c}=eR(),u=Y(),{t:m}=(0,o.Bd)("ai-agent-chat"),{data:p}=(0,l.Xe)(),{toast:x}=(0,L.dj)();return async(l,o)=>{var f,h,g,C,b,y,k,j,_,S;let{sessionMessagesList:w,currentSessionId:E,currentModel:I,chatContent:N,sessionMessagesTree:B,quoteContents:L,aiGenerating:M}=(0,A.f)(),D=N.trim();if(!D||!I||M!==v.SE.Default)return;if(!(null==p?void 0:null===(f=p.userStatus)||void 0===f?void 0:f.isSignedIn)){r.L.qdLeetInputSendClick((0,es.Ev)({qd_status:"failed",qd_fail_reason:""})),(0,eU.K)();return}let F=null==w?void 0:w[w.length-1],G=void 0===l?null!==(h=null==F?void 0:F.id)&&void 0!==h?h:"":l,H=null!=o?o:L;try{e(v.SE.Pending);let l=null==H?void 0:H.map(e=>eK(e)).join("\n"),o=await c({userPrompt:D,data:{modelId:I.id,sessionId:E||void 0,credentials:(null===(g=I.credentials)||void 0===g?void 0:g.useKey)?JSON.stringify({api_key:I.credentials.apiKey}):void 0,parentMessageId:G,context:l,think:I.thinkingModel}});if(o&&(null===(C=o.chatCompletion)||void 0===C?void 0:C.ok)){if(E){let e=X(eW(l)+D,null!==(b=o.chatCompletion.userMessageId)&&void 0!==b?b:"",G);R(B,G,e)&&i([...B]);let t=W(w,G,e);a(t),o.chatCompletion.sessionId&&u(o.chatCompletion.sessionId)}else d(null!==(y=o.chatCompletion.sessionId)&&void 0!==y?y:"");t(void 0),n(""),r.L.qdLeetInputSendClick((0,es.Ev)({qd_status:"sent",qd_fail_reason:""}))}else o&&(null===(k=o.chatCompletion)||void 0===k?void 0:k.rateLimited)&&(s(!0),r.L.qdLeetInputSendClick((0,es.Ev)({qd_status:"failed",qd_fail_reason:""}))),o&&(null===(j=o.chatCompletion)||void 0===j?void 0:j.error)&&(x({description:null!==(S=null==o?void 0:null===(_=o.chatCompletion)||void 0===_?void 0:_.error)&&void 0!==S?S:m("error"),variant:"info"}),r.L.qdLeetInputSendClick((0,es.Ev)({qd_status:"failed",qd_fail_reason:""}))),e(v.SE.Default)}catch(t){console.error(t),e(v.SE.Default)}}},eY=e=>{let{isFocused:t,children:n,className:i,wrapperClassName:l}=e;return(0,s.jsx)("div",{className:(0,el.xF)("border-sd-border rounded-lg border p-[1px]",{"border-sd-blue-500":t},l),children:(0,s.jsx)("div",{className:(0,el.xF)("bg-sd-card w-full rounded-[7px]",i),children:n})})};var eJ=n(46370),eQ=n(26934);let e0=(0,eQ.cX)()?"":"Shift+Enter",e1=e=>{let{onFocusChange:t,defaultValue:n,onAfterSubmit:l,parentId:a,quoteData:d}=e,{t:c}=(0,o.Bd)("ai-agent-chat"),u=(0,A.S)(e=>e.setChatContent),m=(0,A.S)(e=>e.aiGenerating),p=(0,A.S)(e=>e.chatContent),x=(0,A.S)(e=>e.initFocusInput),f=(0,A.S)(e=>e.setInitFocusInput),[h,g]=(0,i.useState)(null),C=e$();return(0,i.useEffect)(()=>{if(!h)return;let e=!1,t=!1,n=null,s=()=>{e=!0,t=!1,n&&(clearTimeout(n),n=null)},i=()=>{e=!1,(0,eQ.nr)()&&(t=!0,n=window.setTimeout(()=>{t=!1,n=null},100))},o=n=>{"Enter"!==n.key||n.shiftKey||((0,eQ.nr)()?t||e:n.isComposing)||(n.preventDefault(),C(a,d),null==l||l(),r.L.qdLeetMessageItemInputSendClick((0,es.zX)({qd_author:"user",qd_status:"",qd_type:"text"})))};return h.addEventListener("keydown",o),h.addEventListener("compositionstart",s),h.addEventListener("compositionend",i),()=>{h.removeEventListener("keydown",o),h.removeEventListener("compositionstart",s),h.removeEventListener("compositionend",i),n&&clearTimeout(n)}},[h,C,l,a,d]),(0,i.useEffect)(()=>{!p&&h&&(h.value="")},[p,h]),(0,i.useEffect)(()=>{n&&h&&(h.value=n)},[n,h]),(0,i.useEffect)(()=>{x&&h&&(null==h||h.focus(),t(!0))},[x,t,h]),(0,s.jsx)("div",{className:"text-sd-primary w-full text-sm font-normal leading-tight",children:(0,s.jsx)(eJ.A,{ref:g,minRows:3,maxRows:7,disabled:m!==v.SE.Default,onFocus:()=>t(!0),onBlur:()=>{t(!1),f(!1)},placeholder:"".concat(e0," ").concat(c("inputPlaceHolder")),onChange:e=>u(e.target.value),className:"bg-sd-accent/10 placeholder:text-sd-muted-foreground w-full resize-none border-none p-0 focus:border-transparent focus:outline-none focus:ring-0"})})};var e5=n(74238);let e2=e=>{let{children:t,icon:n,onClose:i,iconClassName:l,hiddenClose:r}=e;return(0,s.jsxs)("div",{className:(0,el.xF)("border-sd-border  flex h-5 w-fit items-center rounded border pl-1 pr-1.5",{group:!r}),children:[(0,s.jsxs)("div",{className:(0,el.xF)("mr-0.5 flex items-center justify-between p-0.5",{"cursor-pointer":!r}),children:[!r&&(0,s.jsx)("div",{className:"hidden group-hover:inline-block",onClick:i,children:(0,s.jsx)(m.d,{icon:a.yYc,variant:"12px",className:"text-sd-muted-foreground"})}),(0,s.jsx)("div",{className:"group-hover:hidden",children:(0,s.jsx)(m.d,{icon:n,variant:"12px",className:(0,el.xF)("text-sd-muted-foreground",l)})})]}),(0,s.jsx)("div",{className:"text-sd-muted-foreground max-w-[230px] text-xs",children:t})]})},e4={[v.wE.Code]:e=>{let{content:t,range:n,onClose:i,hiddenClose:l,lang:r}=e;return(0,s.jsx)(e2,{icon:a.Dmc,iconClassName:(0,el.xF)("text-sd-green-500"),hiddenClose:l,onClose:()=>null==i?void 0:i(v.wE.Code),children:(0,s.jsx)(c.m_,{label:(0,s.jsx)(e5.d,{lang:null!=r?r:"",code:t}),placement:"top",children:(0,s.jsxs)("span",{children:["Ln ",null==n?void 0:n.start,"-",null==n?void 0:n.end]})})})},[v.wE.Description]:e=>{let{content:t,onClose:n,hiddenClose:i}=e;return(0,s.jsx)(e2,{icon:a.el8,iconClassName:(0,el.xF)("text-sd-blue-500"),hiddenClose:i,onClose:()=>null==n?void 0:n(v.wE.Description),children:(0,s.jsx)(c.m_,{label:t,placement:"top",children:(0,s.jsx)("div",{className:"w-full truncate",children:t})})})},[v.wE.Solution]:e=>{let{content:t,onClose:n,hiddenClose:i}=e;return(0,s.jsx)(e2,{icon:a.rIc,iconClassName:(0,el.xF)("text-sd-blue-500"),hiddenClose:i,onClose:()=>null==n?void 0:n(v.wE.Solution),children:(0,s.jsx)(c.m_,{label:t,placement:"top",children:(0,s.jsx)("div",{className:"w-full truncate",children:t})})})},[v.wE.SubmissionDetail]:e=>{let{content:t,onClose:n,hiddenClose:i}=e;return(0,s.jsx)(e2,{icon:a.Yj9,iconClassName:(0,el.xF)("text-sd-blue-500"),hiddenClose:i,onClose:()=>null==n?void 0:n(v.wE.SubmissionDetail),children:(0,s.jsx)(c.m_,{label:t,placement:"top",children:(0,s.jsx)("div",{className:"w-fit max-w-[100%] truncate",children:t})})})}},e3=e=>{let{quoteContents:t,onClose:n,hiddenClose:i}=e;return t&&0!==t.length?(0,s.jsx)("div",{className:"flex w-full flex-wrap gap-2",children:t.map((e,t)=>{let l=e4[e.type];return l?(0,s.jsx)(l,(0,D._)((0,M._)({},e),{onClose:n,hiddenClose:i}),t):null})}):null},e7=e=>{let{onEditClick:t,hidden:n,chatMessage:i}=e,{t:l}=(0,o.Bd)("ai-agent-chat"),{quoteData:r,remainingText:d}=eZ(i.content);return(0,s.jsxs)("div",{className:(0,el.xF)("flex w-full max-w-[500px] flex-col items-end justify-start gap-2 ",{"h-0 overflow-auto":n}),children:[(0,s.jsxs)("div",{className:"bg-sd-accent border-sd-border flex max-w-[600px] flex-col  items-start justify-start gap-1 rounded-lg border px-3 py-2.5",children:[(0,s.jsx)(e3,{quoteContents:r,hiddenClose:!0}),(0,s.jsx)("div",{className:"text-sd-primary flex flex-wrap whitespace-pre-wrap break-all text-sm font-normal leading-tight",children:d})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 self-stretch",children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-end gap-1 self-stretch",children:[(0,s.jsx)(eN,{content:d,chatMessage:i}),(0,s.jsx)(c.m_,{label:l("edit"),children:(0,s.jsx)(u.$,{variant:"ghost",onlyIcon:!0,size:"xs",onClick:t,children:(0,s.jsx)(m.d,{icon:a.MT7,className:"text-sd-muted-foreground hover:text-sd-foreground",variant:"16px"})})})]}),(0,s.jsx)(eE,{chatMessage:i})]})]})},e6=e=>{let{onCancelClick:t,chatMessage:n}=e,{t:l}=(0,o.Bd)("ai-agent-chat"),[d,p]=(0,i.useState)(!1),x=e$(),{quoteData:f,remainingText:h}=eZ(n.content),[g,v]=(0,i.useState)(f),C=(0,A.S)(e=>e.setChatContent),b=(0,A.S)(e=>e.chatContent);return(0,i.useEffect)(()=>{C("")},[C]),(0,i.useEffect)(()=>{r.L.qdLeetMessageItemInputExposure((0,es.zX)({qd_author:"user",qd_status:"",qd_type:n.workflowId?"command":"text"}))},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e3,{quoteContents:g,hiddenClose:!1,onClose:e=>{let t=g?g.findIndex(t=>t.type===e):-1;-1!==t&&g&&(g.splice(t,1),v([...g]),b||C(h))}}),(0,s.jsxs)(eY,{isFocused:d,wrapperClassName:(0,el.xF)("w-full"),className:"flex w-full min-w-[300px] flex-col items-center justify-between gap-2.5 px-3 py-2.5",children:[(0,s.jsx)(e1,{parentId:n.parent||"",quoteData:f,onFocusChange:p,defaultValue:h,onAfterSubmit:t}),(0,s.jsxs)("div",{className:"inline-flex w-full items-center justify-end gap-2 self-stretch",children:[(0,s.jsx)(c.m_,{label:l("cancel"),children:(0,s.jsx)(u.$,{size:"xs",variant:"secondary",className:"h-6 w-6 rounded-full",onlyIcon:!0,onClick:t,children:(0,s.jsx)(m.d,{icon:a.yYc,variant:"14px",className:"text-sd-foreground"})})}),(0,s.jsx)(c.m_,{label:l("send"),children:(0,s.jsx)(u.$,{size:"xs",className:"h-6 w-6 rounded-full",onlyIcon:!0,onClick:()=>{var e;x(null!==(e=n.parent)&&void 0!==e?e:"",g),null==t||t(),r.L.qdLeetMessageItemInputSendClick((0,es.zX)({qd_author:"user",qd_status:"",qd_type:n.workflowId?"command":"text"}))},disabled:0===b.length,children:(0,s.jsx)(m.d,{icon:a.INu,variant:"14px",className:"text-sd-primary-foreground"})})})]})]})]})},e8=e=>{let{chatMessage:t}=e,{data:n}=(0,l.Xe)(),{avatar:a,name:o,username:d}=(null==n?void 0:n.userStatus)||{},[c,{on:u,off:m}]=(0,eP.o)(!1),p=(0,A.S)(e=>e.aiGenerating);return(0,i.useEffect)(()=>{p!==v.SE.Default&&m()},[p,m]),(0,i.useEffect)(()=>{r.L.qdLeetMessageItemExposure((0,es.zX)({qd_author:"user",qd_status:"completed",qd_type:t.workflowId?"command":"text"}))},[]),(0,s.jsxs)("div",{className:"mb-2 mt-4 flex w-full flex-col justify-end first:mt-0",children:[(0,s.jsxs)("div",{className:"flex flex-col items-end justify-start gap-2",children:[(0,s.jsxs)("div",{className:"flex h-6 items-center justify-end gap-[7px] self-stretch",children:[(0,s.jsx)("div",{className:"text-sd-foreground text-sm",children:o||d}),(0,s.jsx)("div",{"data-type":"avatar image",className:"border-sd-border relative h-[25px] w-[25px] rounded-full",children:(0,s.jsx)("img",{className:"h-full w-full rounded-full",src:a||"",alt:""})})]}),(0,s.jsx)(e7,{onEditClick:()=>{r.L.qdLeetMessageItemEditClick((0,es.zX)({qd_author:"user",qd_status:"completed",qd_type:t.workflowId?"command":"text"})),u()},hidden:c,chatMessage:t})]}),c?(0,s.jsx)(e6,{onCancelClick:m,chatMessage:t}):null]})};var e9=n(8225);let te=()=>(0,w.bOO)(E.nS),tt=()=>{let{mutateAsync:e}=te(),{setShowTokenLimit:t,setSessionMessageTree:n,setSessionMessageList:s,setAiGenerating:i,setCurrentSessionId:a}=(0,A.S)(),o=Y(),{toast:d}=(0,L.dj)(),{data:c}=(0,l.Xe)();return{submitWorkFlow:async(l,u,m,p)=>{var x,f,h,g,C,b,y,k,j;let{sessionMessagesList:_,currentSessionId:S,currentModel:w,sessionMessagesTree:E,quoteContents:I}=(0,A.f)(),N=null===(x=_[_.length-1])||void 0===x?void 0:x.id;if(!w)return;if(!(null==c?void 0:null===(f=c.userStatus)||void 0===f?void 0:f.isSignedIn)){(0,eU.K)();return}let B=null!=p?p:I;try{i(v.SE.Pending);let c=null==B?void 0:B.map(e=>eK(e)).join("\n"),p=await e({data:{modelId:w.id,sessionId:S||void 0,credentials:(null===(h=w.credentials)||void 0===h?void 0:h.useKey)?JSON.stringify({api_key:w.credentials.apiKey}):void 0,parentMessageId:N,context:c,think:w.thinkingModel},workflowId:l,variables:m});if(null===(g=p.chatExecuteWorkflow)||void 0===g?void 0:g.ok){if(S){let e=X(eW(c)+u,null!==(b=null===(C=p.chatExecuteWorkflow)||void 0===C?void 0:C.userMessageId)&&void 0!==b?b:"",N);R(E,N,e)&&n([...E]);let t=W(_,N,e);s(t),p.chatExecuteWorkflow.sessionId&&o(p.chatExecuteWorkflow.sessionId)}else a(null!==(y=p.chatExecuteWorkflow.sessionId)&&void 0!==y?y:"");r.L.qdLeetCommandClick((0,es.Ds)({qd_command:u,qd_status:"sent",qd_fail_reason:""}))}else p&&(null===(k=p.chatExecuteWorkflow)||void 0===k?void 0:k.rateLimited)?(t(!0),r.L.qdLeetCommandClick((0,es.Ds)({qd_command:u,qd_status:"failed",qd_fail_reason:""}))):(d({description:null===(j=p.chatExecuteWorkflow)||void 0===j?void 0:j.error,variant:"error"}),r.L.qdLeetCommandClick((0,es.Ds)({qd_command:u,qd_status:"failed",qd_fail_reason:""}))),i(v.SE.Default)}catch(e){i(v.SE.Default)}}}};var tn=n(86297),ts=n(95865);function ti(e){let{children:t,duration:n=.3,stagger:l=.2,className:r="",style:a}=e,o=i.Children.toArray(t),d={initial:{opacity:0,y:16,filter:"blur(4px)",scale:.9},animate:{opacity:1,y:0,filter:"blur(0px)",scale:1,transition:{duration:n,type:"spring",damping:25,stiffness:300,mass:1.2}},exit:{opacity:0,y:16,filter:"blur(4px)",scale:.9,transition:{duration:.5*n,ease:"easeInOut"}}};return(0,s.jsx)(tn.N,{mode:"wait",children:(0,s.jsx)(ts.P.div,{variants:{animate:{transition:{staggerChildren:l}}},initial:"initial",animate:"animate",exit:"exit",className:r,style:a,children:o.map((e,t)=>(0,s.jsx)(ts.P.div,{variants:d,children:e},t))},o.map(e=>"string"==typeof e?e:null==e?void 0:e.key).join("-"))})}var tl=n(4418);let tr=function(e){var{ref:t}=e,n=(0,tl._)(e,["ref"]);return(0,s.jsxs)("svg",(0,D._)((0,M._)({width:"12",height:"9",viewBox:"0 0 12 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},n),{children:[(0,s.jsx)("path",{d:"M4.59375 1.82031L1.50781 4.75L4.59375 7.69922C4.78906 7.875 4.78906 8.16797 4.61328 8.36328C4.4375 8.55859 4.14453 8.55859 3.94922 8.38281L0.511719 5.10156C0.414062 5.00391 0.375 4.88672 0.375 4.75C0.375 4.63281 0.414062 4.51562 0.511719 4.41797L3.94922 1.13672C4.14453 0.960938 4.4375 0.960938 4.61328 1.15625C4.78906 1.35156 4.78906 1.64453 4.59375 1.82031ZM7.38672 1.82031C7.19141 1.64453 7.19141 1.33203 7.36719 1.15625C7.54297 0.960938 7.83594 0.960938 8.03125 1.13672L11.4688 4.41797C11.5664 4.51562 11.6055 4.63281 11.6055 4.75C11.6055 4.88672 11.5664 5.00391 11.4688 5.10156L8.03125 8.38281C7.83594 8.55859 7.54297 8.55859 7.36719 8.36328C7.19141 8.16797 7.19141 7.875 7.38672 7.69922L10.4727 4.75L7.38672 1.82031Z",fill:"url(#paint0_linear_20214_3850)"}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"paint0_linear_20214_3850",x1:"0.373535",y1:"1.56242",x2:"20.3484",y2:"11.4673",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#AF52DE"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#007AFF"})]})})]}))},ta=function(e){var{ref:t}=e,n=(0,tl._)(e,["ref"]);return(0,s.jsxs)("svg",(0,D._)((0,M._)({width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},n),{children:[(0,s.jsx)("path",{d:"M1.5625 1.3125V2.25C1.5625 2.52344 1.34766 2.71875 1.09375 2.71875C0.820312 2.71875 0.625 2.52344 0.625 2.25V1.15625C0.625 0.726562 0.957031 0.375 1.40625 0.375H8.59375C9.02344 0.375 9.375 0.726562 9.375 1.15625V2.25C9.375 2.52344 9.16016 2.71875 8.90625 2.71875C8.63281 2.71875 8.4375 2.52344 8.4375 2.25V1.3125H5.46875V8.1875H6.40625C6.66016 8.1875 6.875 8.40234 6.875 8.65625C6.875 8.92969 6.66016 9.125 6.40625 9.125H3.59375C3.32031 9.125 3.125 8.92969 3.125 8.65625C3.125 8.40234 3.32031 8.1875 3.59375 8.1875H4.53125V1.3125H1.5625Z",fill:"url(#paint0_linear_20214_1068)"}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"paint0_linear_20214_1068",x1:"-0.626465",y1:"1.56242",x2:"19.3484",y2:"11.4673",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#AF52DE"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#007AFF"})]})})]}))};var to=n(56361),td=n.n(to),tc=n(9387),tu=n(64011);let tm=()=>{let e=(0,A.S)(e=>e.currentWorkFlowTabValues),t=(0,tu.j_)(e=>e.questionSlug),n=(0,tc.er)(e=>e.lang);return(0,Q._)(()=>JSON.stringify((0,M._)({},{problem_slug:t,lang:n},e)))},tp={[v.N3.Default]:ta,[v.N3.ProblemDescription]:ta,[v.N3.EditorNotInputed]:tr,[v.N3.EditorInputed]:tr,[v.N3.SubmitResult]:tr,[v.N3.Testcases]:function(e){var{ref:t}=e,n=(0,tl._)(e,["ref"]);return(0,s.jsxs)("svg",(0,D._)((0,M._)({width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},n),{children:[(0,s.jsx)("path",{d:"M1.875 1.3125C1.69922 1.3125 1.5625 1.46875 1.5625 1.625V7.875C1.5625 8.05078 1.69922 8.1875 1.875 8.1875H8.125C8.28125 8.1875 8.4375 8.05078 8.4375 7.875V1.625C8.4375 1.46875 8.28125 1.3125 8.125 1.3125H1.875ZM0.625 1.625C0.625 0.941406 1.17188 0.375 1.875 0.375H8.125C8.80859 0.375 9.375 0.941406 9.375 1.625V7.875C9.375 8.57812 8.80859 9.125 8.125 9.125H1.875C1.17188 9.125 0.625 8.57812 0.625 7.875V1.625ZM7.20703 3.83203L4.70703 6.33203C4.51172 6.52734 4.21875 6.52734 4.04297 6.33203L2.79297 5.08203C2.59766 4.90625 2.59766 4.61328 2.79297 4.4375C2.96875 4.24219 3.26172 4.24219 3.45703 4.4375L4.375 5.35547L6.54297 3.16797C6.71875 2.99219 7.01172 2.99219 7.1875 3.16797C7.38281 3.36328 7.38281 3.65625 7.1875 3.83203H7.20703Z",fill:"url(#paint0_linear_20214_6614)"}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"paint0_linear_20214_6614",x1:"-0.626465",y1:"1.56242",x2:"19.3484",y2:"11.4673",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#AF52DE"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#007AFF"})]})})]}))},[v.N3.Solutions]:ta},tx=e=>{var t;let{item:n,onWorkFlowChange:i}=e,l=null!==(t=tp[(0,A.S)(e=>e.currentWorkFlowTabEvent)])&&void 0!==t?t:null;return(0,s.jsx)("div",{className:"bg-sd-card w-fit overflow-hidden rounded-full",onClick:()=>i(n),children:(0,s.jsxs)("div",{className:(0,el.xF)(td().promptItemBg,"text-sd-foreground flex w-fit max-w-[100%] cursor-pointer items-center gap-1 rounded-full px-3 py-1"),children:[(0,s.jsx)("div",{className:"flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l,{})}),(0,s.jsx)(eV.u,{className:"w-fit max-w-[100%] truncate text-sm",children:n.name})]})})},tf=e=>{let{fold:t,setFold:n,isAtBottom:l,chatWorkFlowList:a}=e;(0,ec.I)(td());let o=(0,A.S)(e=>e.switchAgent),d=(0,A.S)(e=>e.showAgentSubscribe),c=(0,A.S)(e=>e.setShowAgentSubscribe),u=(0,A.S)(e=>e.showTokenLimit),m=(0,A.S)(e=>e.aiGenerating),p=(0,e9.T)(),x=tm(),{submitWorkFlow:f}=tt(),h=(0,Q._)(async e=>{if(!p){(0,eU.K)(),r.L.qdLeetCommandClick((0,es.Ds)({qd_command:e.name,qd_status:"failed",qd_fail_reason:""}));return}if(!o)return r.L.qdLeetCommandClick((0,es.Ds)({qd_command:e.name,qd_status:"failed",qd_fail_reason:""})),c(!0);f(e.id,e.name,x())});return((0,i.useEffect)(()=>{a&&0!==a.length&&o&&r.L.qdLeetCommandExposure((0,es.Ds)({qd_command:a.map(e=>e.name).join(","),qd_status:"",qd_fail_reason:""}))},[a,o]),!a||0===a.length||!o||d||u||m!==v.SE.Default)?null:(0,s.jsxs)(ti,{className:(0,el.xF)("z-base-1 absolute bottom-0 left-4 flex flex-col gap-1 transition-[height]",{"flex-row":t&&!l}),children:[t&&!l&&(0,s.jsx)(tx,{item:a[0],onWorkFlowChange:h}),t&&!l&&a.length-1>0&&(0,s.jsx)("div",{className:"bg-sd-card w-fit overflow-hidden rounded-full",onClick:()=>null==n?void 0:n(!1),children:(0,s.jsx)("div",{className:(0,el.xF)(td().promptItemBg,"text-sd-foreground pointer-events-auto flex w-fit max-w-[100%] cursor-pointer items-center gap-1 rounded-full px-3 py-1"),children:(0,s.jsxs)(eV.u,{className:(0,el.xF)("w-fit max-w-[100%] truncate text-sm"),children:["+ ",a.length-1]})})}),(!t||l)&&a.map((e,t)=>(0,s.jsx)(tx,{item:e,onWorkFlowChange:h},t))]})},th=()=>{let e=(0,A.S)(e=>e.currentSessionId),t=(0,A.S)(e=>e.setSessionMessageTree),n=(0,A.S)(e=>e.setSessionMessageList),l=(0,A.S)(e=>e.setAiGenerating),r=(0,A.S)(e=>e.aiGenerating),o=(0,A.S)(e=>e.sessionMessagesList),d=(0,A.S)(e=>e.currentWorkFlowTabEvent),c=(0,A.S)(e=>e.switchAgent),p=(0,A.S)(e=>e.chatContent),x=(0,A.S)(e=>e.chatTabWorkFlows),f=(0,A.S)(e=>e.setCurrentSessionId),h=(0,A.S)(e=>e.showAgentSubscribe),g=(0,A.S)(e=>e.showTokenLimit),[C,b]=(0,i.useState)(null),y=(0,i.useMemo)(()=>x&&0!==x.length?x.filter(e=>e.whereList.includes(d)):[],[x,d]),{data:k,isFetching:j}=I(e),[_,S]=(0,i.useState)(!1),{setContainerRef:w,scollToBottom:E,isAtBottom:B}=N((0,Q._)(e=>{if(!e&&!_&&y.length>1){S(!0);return}if(e&&_){S(!1);return}})),L=Y();(0,i.useEffect)(()=>{_&&S(!1)},[d,c,p,e]),(0,i.useEffect)(()=>{!e||k||j||f("")},[k,f]),(0,i.useEffect)(()=>{if(r!==v.SE.Default||j)return;if(!k||!k.messages||0===k.messages.length){t([]),n([]);return}let e=function(e){let t=new Map,n=[];e.forEach(e=>{t.set(e.id,(0,D._)((0,M._)({},e),{children:[]}))});let s=e=>{if(!e.parent||!t.has(e.parent))return;let n=t.get(e.parent);(null==n?void 0:n.role)!==v.e4.User?s(n):n.children=[{accepted:0,applied:0,content:"",id:e.id,liked:e.liked,displayTitle:"",parent:e.parent,role:e.role,status:v.rI.Generating,thinkingContent:"",updatedAt:e.updatedAt,createdAt:e.createdAt,children:[]}]};return e.forEach(e=>{if(e.parent&&t.has(e.parent)){let n=t.get(e.id),i=t.get(e.parent);if(i.children.push(n),i.children.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),[v.rI.Pending,v.rI.Generating].includes(n.status)&&s(n),[v.rI.Incomplete].includes(n.status)&&i.children&&2===i.children.length&&i.children.some(e=>e.role===v.e4.Tool)){let e=i.children.findIndex(e=>e.role===v.e4.Assistant);e>-1&&i.children.splice(e,1)}}else n.push(t.get(e.id)),n.sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())}),n}(k.messages);t(e);let s=P(e);if(n(s),s.length>0){let e=s[s.length-1];[v.rI.Generating,v.rI.Pending].includes(e.status)&&(l(v.SE.Pending),setTimeout(()=>{L(k.id)},50))}},[k]),(0,i.useEffect)(()=>{if(!B)return;let e=setTimeout(()=>{requestAnimationFrame(()=>{E()})},30);return()=>clearTimeout(e)},[o]),(0,i.useEffect)(()=>{(!B&&r!==v.SE.Default||r===v.SE.Pending||B&&r===v.SE.Default)&&requestAnimationFrame(()=>{E()})},[r]),(0,i.useEffect)(()=>{if(!C)return;let e=null,t=new ResizeObserver(()=>{e&&clearTimeout(e),requestAnimationFrame(()=>{E()}),e=setTimeout(()=>{t.disconnect()},800)});return t.observe(C),()=>t.disconnect()},[e,C]);let F=(0,i.useMemo)(()=>!!c&&!!o&&0!==o.length&&r===v.SE.Default&&!h&&!g,[r,o,h,g,c]);return j?(0,s.jsx)("div",{className:"flex-1  overflow-auto px-4 pt-3",children:(0,s.jsx)("div",{className:"relative flex min-h-[100%] w-full items-center justify-center",children:(0,s.jsx)(J.R,{})})}):o&&0!==o.length?(0,s.jsxs)("div",{className:"relative flex flex-1 flex-col overflow-hidden pl-4 pt-3",children:[(0,s.jsx)("div",{className:"relative min-h-[100%] w-full overflow-x-auto pr-4",ref:w,children:(0,s.jsxs)("div",{ref:b,children:[o.map((e,t)=>e.role===v.e4.User?(0,s.jsx)(e8,{chatMessage:e},e.id):(0,s.jsx)(ez,{chatMessage:e},"".concat(e.id,"_").concat(t))),F&&(0,s.jsx)("div",{style:{height:"".concat(36*y.length,"px")}})]})}),(0,s.jsx)(tf,{fold:_,setFold:S,chatWorkFlowList:y,isAtBottom:B}),!B&&(0,s.jsx)(u.$,{variant:"secondary",onClick:E,className:"z-base-2 absolute bottom-3 right-4 rounded-full shadow-lg",onlyIcon:!0,children:(0,s.jsx)(m.d,{icon:a.Jt$,className:"text-sd-muted-foreground"})})]}):(0,s.jsxs)("div",{className:"relative flex-1 overflow-auto px-4 pt-3",children:[(0,s.jsx)("div",{className:"relative min-h-[100%] w-full",children:(0,s.jsx)(eo,{})}),(0,s.jsx)(tf,{fold:_,setFold:S,chatWorkFlowList:y})]})};var tg=n(63064),tA=n(90883),tv=n(40221),tC=n(85298),tb=n(52051),ty=n(56170);let tk=()=>(0,w.eAW)(E.nS);var tj=n(72166);let t_="chatSessions",tS=(e,t)=>(null==e?void 0:e.length)?{hasNext:e.length>=10,skip:t,sessions:e}:{skip:t,sessions:[],hasNext:!1},tw=(e,t)=>{e.setQueryData([t_],e=>e?(0,D._)((0,M._)({},e),{pages:[...e.pages.map(e=>(0,D._)((0,M._)({},e),{sessions:e.sessions.filter(e=>(null==e?void 0:e.id)!==t)}))]}):e)},tE=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,tj.q)([t_],t=>{let{pageParam:n={skip:e,limit:10}}=t;return E.nS.request(w.$uY,n).then(e=>tS(e.chatSessions,n.skip))},(0,D._)((0,M._)({enabled:!0,cacheTime:0},t),{getNextPageParam:e=>e.hasNext?{limit:10,skip:e.skip+10}:void 0}))};var tI=n(74353),tN=n.n(tI),tB=n(47581),tL=n.n(tB),tM=n(98867),tD=n.n(tM),tF=n(8906),tG=n.n(tF);tN().extend(tL()),tN().extend(tD()),tN().extend(tG());let tH={Today:"Today","1 Days":"1 Days","7 Days":"7 Days","30 Days":"30 Days"},tO=e=>{var t;let{onChange:n}=e,l=(0,A.S)(e=>e.currentSessionId),d=(0,A.S)(e=>e.setCurrentSessionId),{t:c}=(0,o.Bd)("ai-agent-chat"),{isInitialLoading:u,isFetching:p,isRefetching:x,data:f,hasNextPage:h,fetchNextPage:g}=tE(0),v=(0,i.useMemo)(()=>f&&f.pages?f.pages.flatMap(e=>e.sessions):[],[f]),{setContainerDom:C,setTargetDom:b,containerDom:y}=(0,ty.X)({enabled:!p&&h,threshold:0,onIntersect:g});(0,i.useEffect)(()=>{null==y||y.scrollTo(0,0)},[y,x]);let{mutateAsync:k}=tk(),j=(0,tg.jE)(),_=async e=>{r.L.qdLeetHistoryItemDeleteClick((0,es.EM)());try{var t,n,s;let i=await k({sessionId:e});if((null===(t=i.deleteChatSession)||void 0===t?void 0:t.ok)&&(tw(j,e),l===e)){let e=(null===(n=v[0])||void 0===n?void 0:n.id)||"",t=l===e?(null===(s=v[1])||void 0===s?void 0:s.id)||"":e;d(t)}}catch(e){}};if(u)return(0,s.jsx)("div",{className:"text-sd-muted-foreground flex items-center justify-center py-2 text-center",children:(0,s.jsx)(J.R,{})});if(0===v.length)return(0,s.jsx)("div",{className:"text-sd-muted-foreground py-2 text-center",children:c("noChats")});let S=null!==(t=function(e){if(!e)return null;let t=tN()(),n=t.subtract(1,"day"),s=t.subtract(7,"day"),i=t.subtract(1,"month"),l={Today:[],"1 Days":[],"7 Days":[],"30 Days":[]};return e.forEach(e=>{if(!e)return;let t=tN()(e.createdAt);if(t.isToday())l.Today.push(e);else if(t.isSameOrAfter(n))l["1 Days"].push(e);else if(t.isSameOrAfter(s))l["7 Days"].push(e);else if(t.isSameOrAfter(i))l["30 Days"].push(e);else{let n=t.format("YYYY-MM");l[n]||(l[n]=[]),l[n].push(e)}}),l}(v))&&void 0!==t?t:{};return(0,s.jsxs)("div",{className:"flex max-h-[330px] flex-col gap-1 overflow-y-auto text-sm",ref:C,children:[Object.keys(S).map(e=>{var t;let r=S[e];return 0===r.length?null:(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)("div",{className:"flex w-full cursor-pointer items-center justify-between px-2 py-1.5",children:(0,s.jsx)("span",{className:"text-sd-muted-foreground inline-block truncate align-middle",children:null!==(t=tH[e])&&void 0!==t?t:e})}),r.map(e=>(0,s.jsxs)("div",{className:"hover:bg-sd-secondary group flex w-full cursor-pointer items-center justify-between gap-2 rounded px-2 py-1.5",onClick:()=>n(e),children:[(0,s.jsx)("span",{className:"text-sd-primary inline-block truncate align-middle",children:(null==e?void 0:e.title)||c("newChat")}),(0,s.jsxs)("div",{className:"flex h-4 w-4 flex-shrink-0 items-center justify-center",children:[l===(null==e?void 0:e.id)&&(0,s.jsx)(m.d,{variant:"16px",icon:a.e68,className:"text-sd-blue-600 group-hover:hidden"}),(0,s.jsx)(m.d,{variant:"16px",icon:a.yYc,className:"text-sd-muted-foreground hidden cursor-pointer group-hover:inline-block",onClick:t=>{t.stopPropagation(),_(e.id)}})]})]},null==e?void 0:e.id))]},e)}),h&&(0,s.jsx)("div",{className:"w-full",ref:b,children:(0,s.jsx)(tC.E,{children:(0,s.jsx)(tb.R,{className:"h-8 w-full"})})})]})},tq=()=>{let[e,t]=(0,i.useState)(!1),{t:n}=(0,o.Bd)("ai-agent-chat"),{data:d}=(0,l.Xe)(),u=(0,A.S)(e=>e.setCurrentSessionId),p=(0,A.S)(e=>e.currentSessionId),x=(0,A.S)(e=>e.setInitFocusInput),f=(0,A.S)(e=>e.aiGenerating);return(0,s.jsx)(tv.AM,{trigger:"click",side:"bottom",align:"end",open:e,onOpenChange:e=>{var n;if(!(null==d?void 0:null===(n=d.userStatus)||void 0===n?void 0:n.isSignedIn)){(0,eU.K)();return}t(e),e&&r.L.qdLeetHistoryClick((0,es.EM)())},onOpenAutoFocus:e=>e.preventDefault(),className:(0,el.xF)("w-[220px] rounded-lg border-0 p-1.5"),content:(0,s.jsx)(tO,{onChange:e=>{t(!1),p!==e.id&&(u(e.id),x(!0),f!==v.SE.Default&&O.emit(T,{}))}}),children:(0,s.jsx)("div",{children:(0,s.jsx)(c.m_,{label:n("history"),placement:"bottom-end",children:(0,s.jsx)(tA.$,{variant:"text",size:"sm",shape:"square",className:(0,el.xF)("aspect-1 group ml-auto h-full p-1"),icon:(0,s.jsx)(m.d,{icon:a.Int,variant:"14px",className:"text-sd-muted-foreground"})})})})})},tT=e=>(0,w.fot)(E.nS,{chatModelId:e},{select:e=>e.chatModelRateLimited,enabled:!1}),tV=()=>{let[e,t]=(0,i.useState)(null),{data:n,refetch:s,isFetching:l}=tT(null!=e?e:""),r=(0,A.S)(e=>e.setShowTokenLimit);return(0,i.useEffect)(()=>{e&&s()},[e,s]),(0,i.useEffect)(()=>{!l&&e&&r(!!n)},[e,l,n,r]),e=>{t(e)}};var tz=n(92825),tP=n(39167);let tU=function(e){var{ref:t}=e,n=(0,tl._)(e,["ref"]);return(0,s.jsxs)("svg",(0,D._)((0,M._)({width:"8",height:"11",viewBox:"0 0 8 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},n),{children:[(0,s.jsx)("path",{d:"M6.05078 5.61328C6.32422 5.22266 6.5 4.73438 6.5 4.1875C6.5 2.82031 5.36719 1.6875 4 1.6875C2.61328 1.6875 1.5 2.82031 1.5 4.1875C1.5 4.73438 1.65625 5.22266 1.92969 5.61328C2.00781 5.73047 2.08594 5.84766 2.18359 5.96484C2.4375 6.31641 2.73047 6.72656 2.96484 7.13672C3.16016 7.50781 3.27734 7.89844 3.31641 8.25H2.37891C2.32031 8.01562 2.26172 7.80078 2.14453 7.58594C1.94922 7.23438 1.71484 6.90234 1.46094 6.57031C1.36328 6.43359 1.26562 6.29688 1.16797 6.16016C0.777344 5.59375 0.5625 4.92969 0.5625 4.1875C0.5625 2.29297 2.08594 0.75 4 0.75C5.89453 0.75 7.4375 2.29297 7.4375 4.1875C7.4375 4.92969 7.20312 5.59375 6.8125 6.16016C6.71484 6.29688 6.61719 6.43359 6.51953 6.57031C6.26562 6.90234 6.03125 7.23438 5.83594 7.58594C5.71875 7.80078 5.66016 8.01562 5.60156 8.25H4.66406C4.72266 7.89844 4.82031 7.50781 5.01562 7.13672C5.25 6.72656 5.54297 6.31641 5.79688 5.96484C5.89453 5.84766 5.97266 5.73047 6.05078 5.61328ZM4 3.25C3.47266 3.25 3.0625 3.67969 3.0625 4.1875C3.0625 4.36328 2.90625 4.5 2.75 4.5C2.57422 4.5 2.4375 4.36328 2.4375 4.1875C2.4375 3.32812 3.12109 2.625 4 2.625C4.15625 2.625 4.3125 2.78125 4.3125 2.9375C4.3125 3.11328 4.15625 3.25 4 3.25ZM4 10.75C3.12109 10.75 2.4375 10.0664 2.4375 9.1875V8.875H5.5625V9.1875C5.5625 10.0664 4.85938 10.75 4 10.75Z",fill:"url(#paint0_linear_23679_18441)"}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"paint0_linear_23679_18441",x1:"4",y1:"0.5",x2:"4",y2:"11.5",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#AF52DE"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#007AFF"})]})})]}))},tR=function(e){var{ref:t}=e,n=(0,tl._)(e,["ref"]);return(0,s.jsxs)("svg",(0,D._)((0,M._)({width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},n),{children:[(0,s.jsx)("path",{d:"M8 0.5H48C52.1421 0.5 55.5 3.85786 55.5 8C55.5 12.1421 52.1421 15.5 48 15.5H8C3.85786 15.5 0.5 12.1421 0.5 8C0.5 3.85786 3.85786 0.5 8 0.5Z",stroke:"#FFA116"}),(0,s.jsx)("path",{d:"M8 0.5H48C52.1421 0.5 55.5 3.85786 55.5 8C55.5 12.1421 52.1421 15.5 48 15.5H8C3.85786 15.5 0.5 12.1421 0.5 8C0.5 3.85786 3.85786 0.5 8 0.5Z",stroke:"url(#paint0_linear_23674_20326)"}),(0,s.jsx)("path",{d:"M12.8457 7.50195C13.0918 7.15039 13.25 6.71094 13.25 6.21875C13.25 4.98828 12.2305 3.96875 11 3.96875C9.75195 3.96875 8.75 4.98828 8.75 6.21875C8.75 6.71094 8.89062 7.15039 9.13672 7.50195C9.20703 7.60742 9.27734 7.71289 9.36523 7.81836C9.59375 8.13477 9.85742 8.50391 10.0684 8.87305C10.2441 9.20703 10.3496 9.55859 10.3848 9.875H9.54102C9.48828 9.66406 9.43555 9.4707 9.33008 9.27734C9.1543 8.96094 8.94336 8.66211 8.71484 8.36328C8.62695 8.24023 8.53906 8.11719 8.45117 7.99414C8.09961 7.48438 7.90625 6.88672 7.90625 6.21875C7.90625 4.51367 9.27734 3.125 11 3.125C12.7051 3.125 14.0938 4.51367 14.0938 6.21875C14.0938 6.88672 13.8828 7.48438 13.5312 7.99414C13.4434 8.11719 13.3555 8.24023 13.2676 8.36328C13.0391 8.66211 12.8281 8.96094 12.6523 9.27734C12.5469 9.4707 12.4941 9.66406 12.4414 9.875H11.5977C11.6504 9.55859 11.7383 9.20703 11.9141 8.87305C12.125 8.50391 12.3887 8.13477 12.6172 7.81836C12.7051 7.71289 12.7754 7.60742 12.8457 7.50195ZM11 5.375C10.5254 5.375 10.1562 5.76172 10.1562 6.21875C10.1562 6.37695 10.0156 6.5 9.875 6.5C9.7168 6.5 9.59375 6.37695 9.59375 6.21875C9.59375 5.44531 10.209 4.8125 11 4.8125C11.1406 4.8125 11.2812 4.95312 11.2812 5.09375C11.2812 5.25195 11.1406 5.375 11 5.375ZM11 12.125C10.209 12.125 9.59375 11.5098 9.59375 10.7188V10.4375H12.4062V10.7188C12.4062 11.5098 11.7734 12.125 11 12.125Z",fill:"#FFA116"}),(0,s.jsx)("path",{d:"M12.8457 7.50195C13.0918 7.15039 13.25 6.71094 13.25 6.21875C13.25 4.98828 12.2305 3.96875 11 3.96875C9.75195 3.96875 8.75 4.98828 8.75 6.21875C8.75 6.71094 8.89062 7.15039 9.13672 7.50195C9.20703 7.60742 9.27734 7.71289 9.36523 7.81836C9.59375 8.13477 9.85742 8.50391 10.0684 8.87305C10.2441 9.20703 10.3496 9.55859 10.3848 9.875H9.54102C9.48828 9.66406 9.43555 9.4707 9.33008 9.27734C9.1543 8.96094 8.94336 8.66211 8.71484 8.36328C8.62695 8.24023 8.53906 8.11719 8.45117 7.99414C8.09961 7.48438 7.90625 6.88672 7.90625 6.21875C7.90625 4.51367 9.27734 3.125 11 3.125C12.7051 3.125 14.0938 4.51367 14.0938 6.21875C14.0938 6.88672 13.8828 7.48438 13.5312 7.99414C13.4434 8.11719 13.3555 8.24023 13.2676 8.36328C13.0391 8.66211 12.8281 8.96094 12.6523 9.27734C12.5469 9.4707 12.4941 9.66406 12.4414 9.875H11.5977C11.6504 9.55859 11.7383 9.20703 11.9141 8.87305C12.125 8.50391 12.3887 8.13477 12.6172 7.81836C12.7051 7.71289 12.7754 7.60742 12.8457 7.50195ZM11 5.375C10.5254 5.375 10.1562 5.76172 10.1562 6.21875C10.1562 6.37695 10.0156 6.5 9.875 6.5C9.7168 6.5 9.59375 6.37695 9.59375 6.21875C9.59375 5.44531 10.209 4.8125 11 4.8125C11.1406 4.8125 11.2812 4.95312 11.2812 5.09375C11.2812 5.25195 11.1406 5.375 11 5.375ZM11 12.125C10.209 12.125 9.59375 11.5098 9.59375 10.7188V10.4375H12.4062V10.7188C12.4062 11.5098 11.7734 12.125 11 12.125Z",fill:"url(#paint1_linear_23674_20326)"}),(0,s.jsx)("path",{d:"M19.918 11V6.11719H18.1914V5.36328H22.5156V6.11719H20.793V11H19.918ZM23.1602 11V5.36328H24.0039V7.56641H24.0234C24.2422 7.08984 24.6836 6.8125 25.2969 6.8125C26.1758 6.8125 26.7539 7.46875 26.7539 8.46094V11H25.9102V8.62109C25.9102 7.94141 25.5664 7.53516 24.9727 7.53516C24.3906 7.53516 24.0039 7.98047 24.0039 8.62109V11H23.1602ZM28.0312 6.25781C27.7578 6.25781 27.5391 6.03906 27.5391 5.77344C27.5391 5.50391 27.7578 5.28516 28.0312 5.28516C28.3086 5.28516 28.5234 5.50391 28.5234 5.77344C28.5234 6.03906 28.3086 6.25781 28.0312 6.25781ZM27.6094 11V6.89062H28.4531V11H27.6094ZM29.3242 11V6.89062H30.168V7.51172H30.1875C30.4023 7.09375 30.8242 6.8125 31.4453 6.8125C32.3477 6.8125 32.8672 7.39453 32.8672 8.33984V11H32.0195V8.5C32.0195 7.88281 31.7305 7.53516 31.1445 7.53516C30.5508 7.53516 30.168 7.96484 30.168 8.60547V11H29.3242ZM33.7305 11V5.36328H34.5742V8.64453H34.5938L36.2422 6.89062H37.2344L35.5469 8.66406L37.3008 11H36.3203L34.9258 9.17188L34.5742 9.51953V11H33.7305ZM38.1797 6.25781C37.9062 6.25781 37.6875 6.03906 37.6875 5.77344C37.6875 5.50391 37.9062 5.28516 38.1797 5.28516C38.457 5.28516 38.6719 5.50391 38.6719 5.77344C38.6719 6.03906 38.457 6.25781 38.1797 6.25781ZM37.7578 11V6.89062H38.6016V11H37.7578ZM39.4727 11V6.89062H40.3164V7.51172H40.3359C40.5508 7.09375 40.9727 6.8125 41.5938 6.8125C42.4961 6.8125 43.0156 7.39453 43.0156 8.33984V11H42.168V8.5C42.168 7.88281 41.8789 7.53516 41.293 7.53516C40.6992 7.53516 40.3164 7.96484 40.3164 8.60547V11H39.4727ZM45.6328 12.4492C44.5781 12.4492 43.9102 11.9609 43.7852 11.332L43.7812 11.2969H44.6172L44.6328 11.3281C44.7461 11.5898 45.1016 11.7695 45.6289 11.7695C46.3008 11.7695 46.6719 11.4102 46.6719 10.8359V10.2734H46.6523C46.418 10.7188 45.9492 11.0039 45.3594 11.0039C44.3281 11.0039 43.6484 10.1953 43.6484 8.91406V8.91016C43.6484 7.62109 44.3359 6.8125 45.3789 6.8125C45.957 6.8125 46.4102 7.125 46.6523 7.58984H46.6719V6.89062H47.5195V10.8867C47.5195 11.8242 46.793 12.4492 45.6328 12.4492ZM45.5977 10.3164C46.2422 10.3164 46.6719 9.77344 46.6719 8.92578V8.92188C46.6719 8.07812 46.2383 7.53516 45.5977 7.53516C44.9297 7.53516 44.5117 8.07422 44.5117 8.92188V8.92578C44.5117 9.78516 44.9297 10.3164 45.5977 10.3164Z",fill:"#FFA116"}),(0,s.jsx)("path",{d:"M19.918 11V6.11719H18.1914V5.36328H22.5156V6.11719H20.793V11H19.918ZM23.1602 11V5.36328H24.0039V7.56641H24.0234C24.2422 7.08984 24.6836 6.8125 25.2969 6.8125C26.1758 6.8125 26.7539 7.46875 26.7539 8.46094V11H25.9102V8.62109C25.9102 7.94141 25.5664 7.53516 24.9727 7.53516C24.3906 7.53516 24.0039 7.98047 24.0039 8.62109V11H23.1602ZM28.0312 6.25781C27.7578 6.25781 27.5391 6.03906 27.5391 5.77344C27.5391 5.50391 27.7578 5.28516 28.0312 5.28516C28.3086 5.28516 28.5234 5.50391 28.5234 5.77344C28.5234 6.03906 28.3086 6.25781 28.0312 6.25781ZM27.6094 11V6.89062H28.4531V11H27.6094ZM29.3242 11V6.89062H30.168V7.51172H30.1875C30.4023 7.09375 30.8242 6.8125 31.4453 6.8125C32.3477 6.8125 32.8672 7.39453 32.8672 8.33984V11H32.0195V8.5C32.0195 7.88281 31.7305 7.53516 31.1445 7.53516C30.5508 7.53516 30.168 7.96484 30.168 8.60547V11H29.3242ZM33.7305 11V5.36328H34.5742V8.64453H34.5938L36.2422 6.89062H37.2344L35.5469 8.66406L37.3008 11H36.3203L34.9258 9.17188L34.5742 9.51953V11H33.7305ZM38.1797 6.25781C37.9062 6.25781 37.6875 6.03906 37.6875 5.77344C37.6875 5.50391 37.9062 5.28516 38.1797 5.28516C38.457 5.28516 38.6719 5.50391 38.6719 5.77344C38.6719 6.03906 38.457 6.25781 38.1797 6.25781ZM37.7578 11V6.89062H38.6016V11H37.7578ZM39.4727 11V6.89062H40.3164V7.51172H40.3359C40.5508 7.09375 40.9727 6.8125 41.5938 6.8125C42.4961 6.8125 43.0156 7.39453 43.0156 8.33984V11H42.168V8.5C42.168 7.88281 41.8789 7.53516 41.293 7.53516C40.6992 7.53516 40.3164 7.96484 40.3164 8.60547V11H39.4727ZM45.6328 12.4492C44.5781 12.4492 43.9102 11.9609 43.7852 11.332L43.7812 11.2969H44.6172L44.6328 11.3281C44.7461 11.5898 45.1016 11.7695 45.6289 11.7695C46.3008 11.7695 46.6719 11.4102 46.6719 10.8359V10.2734H46.6523C46.418 10.7188 45.9492 11.0039 45.3594 11.0039C44.3281 11.0039 43.6484 10.1953 43.6484 8.91406V8.91016C43.6484 7.62109 44.3359 6.8125 45.3789 6.8125C45.957 6.8125 46.4102 7.125 46.6523 7.58984H46.6719V6.89062H47.5195V10.8867C47.5195 11.8242 46.793 12.4492 45.6328 12.4492ZM45.5977 10.3164C46.2422 10.3164 46.6719 9.77344 46.6719 8.92578V8.92188C46.6719 8.07812 46.2383 7.53516 45.5977 7.53516C44.9297 7.53516 44.5117 8.07422 44.5117 8.92188V8.92578C44.5117 9.78516 44.9297 10.3164 45.5977 10.3164Z",fill:"url(#paint2_linear_23674_20326)"}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"paint0_linear_23674_20326",x1:"1.74316",y1:"2.99988",x2:"34.6337",y2:"55.3258",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{"stop-color":"#AF52DE"}),(0,s.jsx)("stop",{offset:"1","stop-color":"#007AFF"})]}),(0,s.jsxs)("linearGradient",{id:"paint1_linear_23674_20326",x1:"7.24902",y1:"5.49994",x2:"20.999",y2:"11.7499",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{"stop-color":"#AF52DE"}),(0,s.jsx)("stop",{offset:"1","stop-color":"#007AFF"})]}),(0,s.jsxs)("linearGradient",{id:"paint2_linear_23674_20326",x1:"18.9338",y1:"2.99988",x2:"54.9724",y2:"33.7146",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{"stop-color":"#AF52DE"}),(0,s.jsx)("stop",{offset:"1","stop-color":"#007AFF"})]})]})]}))},tK=e=>{let{currentModel:t,seriesModels:n,onChange:i}=e,{t:l}=(0,o.Bd)("ai-agent-chat"),r=(0,tu.j_)(e=>e.setOpenSettingModal),d=(0,tu.j_)(e=>e.setSettingModalActiveTab);return(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[Object.keys(n).map(e=>{var l;let r=null===(l=n[e][0])||void 0===l?void 0:l.model.logoUrl;return(0,s.jsxs)("div",{className:"hover:bg-sd-secondary flex h-6 w-full cursor-pointer items-center justify-between gap-3 rounded px-1",onClick:()=>i(e),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("img",{src:null!=r?r:"",className:"h-4 w-4 rounded-full",alt:""}),(0,s.jsx)("span",{className:"text-sd-primary inline-block truncate align-middle text-xs",children:e})]}),(null==t?void 0:t.modelSeriesName)===e&&(0,s.jsx)(m.d,{variant:"16px",icon:a.e68,className:"text-sd-blue-600"})]},e)}),(0,s.jsxs)(u.$,{variant:"secondary",className:"w-full gap-2",size:"xs",onClick:()=>{d(tP.I.Models),r(!0)},children:[(0,s.jsx)(m.d,{icon:a.BH7,className:"text-sd-muted-foreground",variant:"14px"}),l("manageModels")]})]})},tW=e=>{let{currentModel:t,onChange:n,modelList:i}=e;return(0,s.jsx)("div",{className:"flex flex-col gap-1",children:i.map(e=>(0,s.jsxs)("div",{className:"hover:bg-sd-secondary flex h-6 w-full cursor-pointer items-center justify-between gap-3 rounded px-1",onClick:()=>n(e.model),children:[(0,s.jsxs)("div",{className:"mr-4 flex flex-1 items-center gap-1.5",children:[(0,s.jsx)("span",{className:"text-sd-primary inline-block truncate align-middle text-xs",children:e.model.name}),e.model.thinkingModel&&(0,s.jsx)(tR,{})]}),(0,s.jsx)(m.d,{variant:"16px",icon:a.e68,className:(0,el.xF)("text-sd-blue-600",{invisible:e.model.modelCacheId!==(null==t?void 0:t.modelCacheId),visible:e.model.modelCacheId===(null==t?void 0:t.modelCacheId)})})]},e.model.modelCacheId))})},tX=()=>{var e,t;let[n,r]=(0,i.useState)([]),o=(0,A.S)(e=>e.setCurrentModel),d=(0,A.S)(e=>e.currentModel),c=(0,A.S)(e=>e.modelList),[u,p]=(0,i.useState)(!1),[x,f]=(0,i.useState)(!1),h=tV(),{data:g}=(0,l.Xe)(),v=!!(null==g?void 0:null===(e=g.userStatus)||void 0===e?void 0:e.isPremium),C=(0,i.useMemo)(()=>{let e=(0,tz.mS)(c,v);return r(e[(null==d?void 0:d.modelSeriesName)||""]||[]),e},[null==d?void 0:d.modelSeriesName,c,v]);return d?(0,s.jsxs)("div",{className:"max-w-1/2 flex flex-1 items-center gap-3 overflow-hidden",children:[(0,s.jsx)(tv.AM,{trigger:"click",side:"top",open:u,onOpenChange:p,onOpenAutoFocus:e=>e.preventDefault(),className:(0,el.xF)("min-w-[140px] rounded-lg p-1.5 "),content:(0,s.jsx)(tK,{onChange:e=>{var t;let n=C[e];r(n),o(null==n?void 0:null===(t=n[0])||void 0===t?void 0:t.model),p(!1)},currentModel:d,seriesModels:C}),children:(0,s.jsxs)("div",{className:"border-sd-border hover:bg-sd-secondary flex max-w-[40%] cursor-pointer items-center gap-1 rounded-full border-[1px] px-2 py-1",children:[(0,s.jsx)("img",{src:null!==(t=null==d?void 0:d.logoUrl)&&void 0!==t?t:"",className:"h-4 w-4 rounded-full",alt:""}),(0,s.jsx)("span",{className:"text-sd-muted-foreground flex-1 truncate align-middle text-xs",title:null==d?void 0:d.modelSeriesName,children:null==d?void 0:d.modelSeriesName})]})}),(0,s.jsx)(tv.AM,{trigger:"click",side:"top",open:x,onOpenChange:f,onOpenAutoFocus:e=>e.preventDefault(),className:(0,el.xF)("min-w-[120px] rounded-lg p-1.5"),content:(0,s.jsx)(tW,{onChange:e=>{e&&e.modelCacheId!==(null==d?void 0:d.modelCacheId)&&(e.credentials&&e.credentials.useKey||h(e.id),o(e),f(!1))},currentModel:d,modelList:n}),children:(0,s.jsxs)("div",{className:"flex max-w-[40%] cursor-pointer items-center  gap-1",children:[d.thinkingModel&&(0,s.jsx)(tU,{className:"shrink-0 scale-[1.2]"}),(0,s.jsx)("span",{className:"text-sd-muted-foreground flex-1 truncate align-middle text-xs",title:null==d?void 0:d.name,children:null==d?void 0:d.name}),(0,s.jsx)(m.d,{variant:"12px",icon:a.NmG,className:(0,el.xF)("text-sd-muted-foreground shrink-0")})]})})]}):null},tZ=()=>{let{t:e}=(0,o.Bd)("ai-agent-chat"),t=(0,A.S)(e=>e.chatContent),n=(0,A.S)(e=>e.currentSessionId),i=(0,A.S)(e=>e.aiGenerating),l=e$(),{mutateAsync:d}=q(),{toast:p}=(0,L.dj)(),x=async()=>{try{var e,t;if(!n)return;let s=await d({sessionId:n});(null===(e=s.stopCompletion)||void 0===e?void 0:e.ok)?r.L.qdLeetInputStopClick((0,es.Ev)({qd_status:"sent",qd_fail_reason:""})):(p({variant:"error",description:(null===(t=s.stopCompletion)||void 0===t?void 0:t.error)||"system error"}),r.L.qdLeetInputStopClick((0,es.Ev)({qd_status:"failed",qd_fail_reason:""})))}catch(e){p({variant:"error",description:JSON.stringify(e)||"system error"}),r.L.qdLeetInputStopClick((0,es.Ev)({qd_status:"failed",qd_fail_reason:""}))}};return i!==v.SE.Default?(0,s.jsx)(c.m_,{label:e("stop"),children:(0,s.jsx)(u.$,{size:"xs",variant:"secondary",className:"h-6 w-6 rounded-full",onlyIcon:!0,onClick:x,children:(0,s.jsx)(m.d,{icon:a.CWE,variant:"12px",className:"text-sd-red-400"})})}):(0,s.jsx)(c.m_,{label:e("send"),children:(0,s.jsx)(u.$,{size:"xs",className:"h-6 w-6 rounded-full",onlyIcon:!0,disabled:!t,onClick:()=>{l()},children:(0,s.jsx)(m.d,{icon:a.INu,variant:"14px",className:"text-sd-primary-foreground"})})})};var t$=n(4660),tY=n(68008),tJ=n(16310),tQ=n.n(tJ);let t0=()=>{var e,t,n;let r=(0,A.S)(e=>e.setSwitchAgent),a=(0,A.S)(e=>e.setShowAgentSubscribe),o=(0,A.S)(e=>e.switchAgent),d=(0,A.S)(e=>e.showAgentSubscribe),c=null===(n=(0,l.Xe)())||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:null===(e=t.userStatus)||void 0===e?void 0:e.isPremium,[u,m]=(0,i.useState)(!1);return((0,ec.I)(tQ()),c)?(0,s.jsxs)("div",{className:"text-sd-foreground flex items-center space-x-2",children:[(0,s.jsx)(t$.d,{id:"switch-agent",checked:o,onCheckedChange:r,className:(0,el.xF)("transition-colors",{[tQ().switchChecked]:o,"!bg-gray-60":!o}),btnClassName:(0,el.xF)("bg-[#ffffff]")}),(0,s.jsx)(tY.J,{htmlFor:"switch-agent",children:"Agent"})]}):(0,s.jsxs)("div",{className:"text-sd-foreground flex items-center space-x-2",children:[(0,s.jsx)(t$.d,{id:"switch-agent",checked:u,onCheckedChange:e=>{m(e),d?(a(!1),setTimeout(()=>{a(!0)},100)):a(!0),setTimeout(()=>{m(!1)},300)},className:(0,el.xF)("transition-colors transition-none",{[tQ().switchChecked]:u,"!bg-gray-60 ":!u}),btnClassName:(0,el.xF)("bg-[#ffffff]",{"transition-none":!u})}),(0,s.jsx)(tY.J,{htmlFor:"switch-agent",children:"Agent"})]})},t1=()=>{var e;let{t}=(0,o.Bd)("ai-agent-chat"),n=(0,A.S)(e=>e.currentModel),d=(0,A.S)(e=>e.showTokenLimit),c=(0,A.S)(e=>e.setShowTokenLimit),p=(0,A.S)(e=>e.setShowAgentSubscribe),x=(0,A.S)(e=>e.showAgentSubscribe),f=(0,A.S)(e=>e.aiGenerating),h=e$(),{data:g}=(0,l.Xe)(),C=!!(null==g?void 0:null===(e=g.userStatus)||void 0===e?void 0:e.isPremium);return((0,i.useEffect)(()=>{!C&&d&&p(!0)},[C,p,d]),(0,i.useEffect)(()=>{d&&!x&&r.L.qdLeetAlertRatelimitExposure((0,es.EM)())},[x,d]),(0,i.useEffect)(()=>{f!==v.SE.Default&&c(!1)},[f,c]),d&&!x&&C)?(0,s.jsxs)("div",{className:"flex shrink-0 items-start justify-between gap-2",children:[(0,s.jsxs)("div",{className:"mb-2.5 flex flex-col gap-1 text-xs",children:[(0,s.jsx)("p",{className:"text-sd-muted-foreground",children:t("tokenLimit1",{modelName:null==n?void 0:n.name})}),(0,s.jsx)("p",{className:"text-sd-muted-foreground",children:t("tokenLimit2")}),(0,s.jsx)(u.$,{className:(0,el.$z)("text-sd-blue-400 h-fit w-fit p-0"),variant:"link",onClick:()=>{c(!1),h(),r.L.qdLeetAlertRatelimitSwitchClick((0,es.EM)())},children:t("limitBtn")})]}),(0,s.jsx)(u.$,{className:"h-4 w-4 rounded",variant:"ghost",onlyIcon:!0,onClick:()=>c(!1),children:(0,s.jsx)(m.d,{icon:a.yYc,className:"text-sd-muted-foreground",variant:"14px"})})]}):null};var t5=n(32485),t2=n.n(t5);let t4=()=>{(0,ec.I)(tQ());let{t:e}=(0,o.Bd)("ai-agent-chat"),t=(0,A.S)(e=>e.showAgentSubscribe),n=(0,A.S)(e=>e.setShowAgentSubscribe),l=(0,A.S)(e=>e.switchAgent),d=(0,A.S)(e=>e.aiGenerating),c=(0,A.S)(e=>e.currentSessionId);return((0,i.useEffect)(()=>{t&&l&&r.L.qdLeetAlertSubscribeExposure((0,es.EM)())},[t,l]),(0,i.useEffect)(()=>{d!==v.SE.Default&&n(!1)},[d,n]),t)?(0,s.jsx)("div",{className:"relative h-auto w-full",children:(0,s.jsxs)("div",{className:t2()("flex items-start justify-between gap-2",{flex:!!c,"z-base-1 absolute bottom-0 left-0 w-full":!c}),children:[(0,s.jsxs)("div",{className:"mb-2.5 flex flex-col gap-1 text-xs",children:[(0,s.jsx)("p",{className:"text-sd-muted-foreground",children:e("subscribeInfo")}),(0,s.jsx)(en(),{href:ei.f0.premiumDetail({sourceType:"ai-chat"}),className:(0,el.$z)(tQ().premiumText,"w-fit"),target:"_blank",onClick:()=>r.L.qdLeetAlertSubscribeClick((0,es.EM)()),children:e("subscribeBtn")})]}),(0,s.jsx)(u.$,{className:"h-4 w-4 shrink-0 rounded",variant:"ghost",onlyIcon:!0,onClick:()=>n(!1),children:(0,s.jsx)(m.d,{icon:a.yYc,className:"text-sd-muted-foreground",variant:"14px"})})]})}):null},t3=()=>{let[e,t]=(0,i.useState)(!1),n=(0,A.S)(e=>e.aiGenerating),l=(0,A.S)(e=>e.quoteContents);return(0,s.jsxs)("div",{className:"h-fit min-h-[50px] w-full px-4 py-2.5",children:[(0,s.jsx)(t4,{}),(0,s.jsx)(t1,{}),(0,s.jsxs)(eY,{isFocused:e,className:"flex flex-col items-center justify-between gap-2.5 px-3 py-2.5",children:[(0,s.jsx)(e3,{quoteContents:l,onClose:e=>{let t=null==l?void 0:l.filter(t=>t.type!==e);A.S.setState({quoteContents:t})}}),(0,s.jsx)(e1,{onFocusChange:t}),(0,s.jsxs)("div",{className:"inline-flex items-center justify-between self-stretch",children:[n!==v.SE.Default?(0,s.jsx)(eO,{}):(0,s.jsx)(tX,{}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[n===v.SE.Default&&(0,s.jsx)(t0,{}),(0,s.jsx)(tZ,{})]})]})]})]})},t7=()=>{let{t:e}=(0,o.Bd)("ai-agent-chat"),t=(0,A.S)(e=>e.setCurrentSessionId),n=(0,A.S)(e=>e.setInitFocusInput),i=(0,A.S)(e=>e.aiGenerating);return(0,s.jsx)(c.m_,{label:e("newConversation"),children:(0,s.jsx)("div",{children:(0,s.jsx)(tA.$,{variant:"text",size:"sm",shape:"square",className:(0,el.xF)("aspect-1 group ml-auto h-full p-1"),icon:(0,s.jsx)(m.d,{icon:a.vkJ,variant:"14px",className:"text-sd-muted-foreground"}),onClick:()=>{n(!0),t(""),i!==v.SE.Default&&O.emit(T,{}),r.L.qdLeetNewClick((0,es.EM)())}})})})};var t6=n(63628),t8=n(15457),t9=n(11475);let ne=()=>{let e=(0,A.S)(e=>e.chatSelectWorkFlows),t=(0,A.S)(e=>e.switchAgent);(0,i.useEffect)(()=>{let n=t?e:[];t8.O.send({type:t9.ZW.SetPopoverCommand,payload:{workflowData:n}})},[e,t]),(0,i.useEffect)(()=>{let n=t8.O.subscribe(n=>{if(t9.ZW.TriggerSetPopoverCommand!==n.type)return;let s=t?e:[];t8.O.send({type:t9.ZW.SetPopoverCommand,payload:{workflowData:s}})});return()=>{n&&n()}},[e,t])},nt=()=>{let{t:e}=(0,o.Bd)("ai-agent-chat"),t=(0,A.S)(e=>e.setCurrentWorkFlowTabEvent),n=(0,A.S)(e=>e.setShowAgentSubscribe),s=(0,A.S)(e=>e.aiGenerating),{submitWorkFlow:l}=tt(),r=(0,e9.T)(),{toast:a}=(0,L.dj)(),d=(0,t6.U)();(0,i.useEffect)(()=>{let i=t8.O.subscribe(i=>{let{switchAgent:o,currentWorkFlowTabValues:c}=(0,A.f)();if(t9.aW.includes(i.type)){let t=i.payload.quoteContent;if(!t)return;if(null==d||d.openAiAgentTab(),i.type===t9.ZW.SetSelectedContent){if(!r){(0,eU.K)();return}if(!o)return n(!0);if(s!==v.SE.Default){a({description:e("contentProcessing"),variant:"info"});return}let d=i.payload.workflowId,c=i.payload.workflowName,u=i.payload.variables;return d&&c?void l(d,c,JSON.stringify(u),[t]):void 0}A.S.setState(e=>({quoteContents:[...(e.quoteContents||[]).filter(e=>e.type!==t.type),t]}))}if(i.type===t9.ZW.SetActiveTab){let e=i.payload.tab;if([v.N3.Default,v.N3.ProblemDescription,v.N3.EditorNotInputed,v.N3.EditorInputed,v.N3.SubmitResult,v.N3.Testcases,v.N3.Solutions].includes(e)){let n=i.payload.variables;t(e,(0,M._)({},c,n))}}});return()=>{i&&i()}},[r,s])},nn=()=>{ne(),nt()},ns=()=>{nn()};var ni=n(80229),nl=n(77961);let nr=()=>(0,w.sFD)(E.nS,{},{select:e=>e.chatWorkflows,enabled:!0}),na=e=>{if(!e)return null;try{let t=JSON.parse(e);return{type:t.type,required:t.required,properties:t.properties?Object.keys(t.properties):[]}}catch(e){return null}},no=()=>{let{data:e}=nr(),t=(0,A.S)(e=>e.setChatSetectWorkFlows),n=(0,A.S)(e=>e.setChatTabWorkFlows);(0,i.useEffect)(()=>{if(!e)return;let s=[],i=[];e.forEach(e=>{var t,n;let l=(0,D._)((0,M._)({},e),{variables:na(null==e?void 0:e.requiredVariables),whereList:null!==(n=(0,nl.N)(null!==(t=null==e?void 0:e.where)&&void 0!==t?t:"[]"))&&void 0!==n?n:[]});l.whereList.every(e=>e.startsWith("selected"))?s.push(l):i.push(l)}),t(s),n(i)},[e,t,n])};var nd=n(47561);let nc=e=>{var t;let{showSetting:n=!1}=e;(0,ni.D)(),no(),ns();let a=(0,A.S)(e=>e.setSwitchAgent),o=(0,A.S)(e=>e.setCurrentSessionId),d=(0,A.S)(e=>e.setInitFocusInput),{data:c,isInitialLoading:u}=(0,l.Xe)(),m=!!(null==c?void 0:null===(t=c.userStatus)||void 0===t?void 0:t.isPremium);return(0,i.useEffect)(()=>{var e;if(u)return;let t=(0,nd.RG)();m?a("boolean"!=typeof t.useAgent||t.useAgent):a(!1),o(null!==(e=t.sessionId)&&void 0!==e?e:""),d(!0)},[m,u,a,d,o]),(0,i.useEffect)(()=>{r.L.qdLeetExposure((0,es.EM)())},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative flex h-full w-full !min-w-[310px] flex-col overflow-hidden",children:[(0,s.jsx)("div",{className:"border-sd-border flex h-8 w-full border-b px-[9px]",children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-end gap-1",children:[(0,s.jsx)(t7,{}),(0,s.jsx)(tq,{}),n&&(0,s.jsx)(x,{})]})}),(0,s.jsx)(th,{}),(0,s.jsx)(t3,{})]}),(0,s.jsx)(S,{})]})}},92825:(e,t,n)=>{"use strict";n.d(t,{j0:()=>d,mS:()=>o});var s=n(77528),i=n(55456),l=n(47561);let r=(e,t)=>{let n=e.model;return(!n.credentials||!n.credentials.useKey||!n.credentials.apiKey)&&!!e.premiumModel&&!t},a=e=>{if(!e)return[];let t=[];return e.forEach(e=>{if(e.model.modelCacheId=e.model.id,e.model.thinkingModel){if(e.model.supportThinkingSwitch){t.push(e);let n=(0,i._)((0,s._)({},e),{model:(0,i._)((0,s._)({},e.model),{modelCacheId:"".concat(e.model.id,"_no_thinking"),thinkingModel:!1})});t.push(n)}else t.push(e)}else t.push(e)}),t},o=(e,t)=>{if(!e)return{};let n={};return a(e).forEach(e=>{r(e,t)||(n[e.model.modelSeriesName]||(n[e.model.modelSeriesName]=[]),n[e.model.modelSeriesName].push(e))}),n},d=(e,t)=>{let{modelId:n}=(0,l.RG)(),s=e.filter(e=>!r(e,t));return a(s).find(e=>(null==e?void 0:e.model.modelCacheId)===n)||s[0]}},83325:(e,t,n)=>{"use strict";n.d(t,{An:()=>u,ED:()=>m,M0:()=>c,kh:()=>d});var s=n(77528),i=n(55456),l=n(74848),r=n(96540),a=n(82479),o=n(52993);let d=()=>(0,l.jsx)("div",{className:(0,a.xF)("w-[1px] flex-none",o.B8.bgLayerBgGray)}),c=e=>(0,l.jsx)("div",(0,i._)((0,s._)({},e),{className:(0,a.xF)("relative flex overflow-hidden rounded",o.B8.bgFillTertiary,e.className),children:e.children})),u=e=>{let{children:t,notUseHover:n,className:s}=e;return(0,l.jsx)("div",{className:(0,a.xF)("group flex flex-none items-center justify-center",{[o.wu.bgFillQuaternary]:!n},s),children:t})},m=e=>{let{switched:t,defaultItem:n,activeItem:s,className:i,disableTransition:o}=e,[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[p,x]=(0,r.useState)(null),f=null==d?void 0:d.clientWidth,h=null==u?void 0:u.scrollWidth,g=null==p?void 0:p.scrollWidth,[A,v]=(0,r.useState)("auto"),[C,b]=(0,r.useState)(t);(0,r.useEffect)(()=>{requestAnimationFrame(()=>{b(t)})},[t]),(0,r.useEffect)(()=>{if(void 0===f||void 0===g||void 0===h)return;let e=t?g:h;v("".concat(f,"px"));let n=setTimeout(()=>v("".concat(e,"px")),1),s=setTimeout(()=>v("auto"),601);return()=>{clearTimeout(n),clearTimeout(s)}},[t]);let y=o?t:C;return(0,l.jsxs)("div",{ref:c,className:(0,a.xF)("relative overflow-hidden",{"transition-[width] ease-[cubic-bezier(0,1.5,.5,1)]":!o},i),style:o?void 0:{width:A,transitionDuration:"".concat(.6,"s")},children:[(0,l.jsx)("div",{ref:x,className:(0,a.xF)({"pointer-events-none absolute left-0 top-0 flex opacity-0":!y,"transition-[opacity]":!o}),children:s}),(0,l.jsx)("div",{ref:m,className:(0,a.xF)({"pointer-events-none absolute left-0 top-0 flex opacity-0":y,"transition-[opacity]":!o}),children:n})]})}},5559:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var s=n(74848),i=n(72187),l=n(51559);let r=()=>{l.i.warn((0,s.jsxs)("p",{children:[(0,s.jsx)("span",{children:"Please "}),(0,s.jsx)("a",{href:i.f0.register(),className:"text-sd-blue-400",children:"Register"}),(0,s.jsx)("span",{children:" or "}),(0,s.jsx)("a",{href:i.f0.signIn(),className:"text-sd-blue-400",children:"Sign in"}),(0,s.jsx)("span",{children:"."})]}))}},4660:(e,t,n)=>{"use strict";n.d(t,{d:()=>d});var s=n(77528),i=n(55456),l=n(4418),r=n(74848);n(96540);var a=n(79014),o=n(82479);let d=e=>{var{ref:t,className:n,btnClassName:d}=e,c=(0,l._)(e,["ref","className","btnClassName"]);return(0,r.jsx)(a.bL,(0,i._)((0,s._)({className:(0,o.xF)("focus-visible:ring-sd-ring focus-visible:ring-offset-sd-background data-[state=checked]:bg-sd-primary data-[state=unchecked]:bg-sd-input peer inline-flex h-[20px] w-[36px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n)},c),{ref:t,children:(0,r.jsx)(a.zi,{className:(0,o.xF)("bg-sd-background data-[state=checked]:translate-x-4.5 pointer-events-none block h-4 w-4 rounded-full ring-0 transition-transform data-[state=unchecked]:translate-x-0",d)})}))};d.displayName=a.bL.displayName},15330:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var s=n(74848),i=n(12996),l=n(96540),r=n(82479),a=n(36768);let o=e=>{let{ref:t,variant:n="primary",checked:o,className:d,disabled:c,onChange:u}=e,m=(0,l.useCallback)(e=>{c||u(e)},[c,u]);return(0,s.jsx)(i.dO,{ref:t,checked:!!o,onChange:m,className:(0,r.xW)("relative inline-flex h-4 w-8 items-center rounded-full transition-all ",{[a.MY.bgBlueStandard]:o&&"blue"===n,[a.MY.bgGreenStandard]:o&&"primary"===n,[a.MY.fillGray5]:!o&&"plain"!==n,"cursor-not-allowed opacity-50":c},d),children:(0,s.jsx)("span",{className:(0,r.xW)("inline-block h-3 w-3 transform rounded-full transition-all",a.MY.bgWhite,{"translate-x-[2px]":!o&&"plain"!==n,"translate-x-[18px]":o&&"plain"!==n})})})}},94187:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var s=n(41990),i=n(13814);let l=()=>{let{theme:e}=(0,s.D)();return"system"===e?(0,i.Bd)()&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}},25533:(e,t,n)=>{"use strict";n.d(t,{i:()=>l});var s=n(92110),i=n(73105);let l={ideTabActiveClick:e=>{let t={key:"ide_tab_active_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideTabDragClick:e=>{let t={key:"ide_tab_drag_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideTabCloseBtnExposure:e=>{let t={key:"ide_tab_close_btn_exposure",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideTabCloseBtnClick:e=>{let t={key:"ide_tab_close_btn_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideTabsetActiveClick:e=>{let t={key:"ide_tabset_active_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideTabsetDragClick:e=>{let t={key:"ide_tabset_drag_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideSplitterDragClick:()=>{let e={key:"ide_splitter_drag_click",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideMoreBtnClick:e=>{let t={key:"ide_more_btn_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideMaximizeBtnExposure:e=>{let t={key:"ide_maximize_btn_exposure",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideMaximizeBtnClick:e=>{let t={key:"ide_maximize_btn_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideMaximizeHeaderClick:e=>{let t={key:"ide_maximize_header_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideMaximizeHotkeyClick:e=>{let t={key:"ide_maximize_hotkey_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideLayoutManagerBtnClick:()=>{let e={key:"ide_layout_manager_btn_click",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideApplyLayoutClick:e=>{let t={key:"ide_apply_layout_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideCreateCustomLayoutClick:()=>{let e={key:"ide_create_custom_layout_click",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideEditCustomLayoutClick:()=>{let e={key:"ide_edit_custom_layout_click",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideDeleteCustomLayoutClick:()=>{let e={key:"ide_delete_custom_layout_click",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideLayoutSubscribeBtnClick:()=>{let e={key:"ide_layout_subscribe_btn_click",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideSettingsBtnClick:()=>{let e={key:"ide_settings_btn_click",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideRunSubmitPositionClick:e=>{let t={key:"ide_run_submit_position_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideToolbarPopoverExposure:()=>{let e={key:"ide_toolbar_popover_exposure",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideToolbarPopoverCloseClick:()=>{let e={key:"ide_toolbar_popover_close_click",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideToolbarChangePositionClick:()=>{let e={key:"ide_toolbar_change_position_click",data:{}};s.i[i._.GIO](e),s.i[i._.GA4](e),s.i[i._.CONSOLE](e),s.i[i._.SELF_DB](e)},ideSettingsModelExposure:e=>{let t={key:"ide_settings_model_exposure",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideSettingsModelRulesClick:e=>{let t={key:"ide_settings_model_rules_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideSettingsModelSwitchClick:e=>{let t={key:"ide_settings_model_switch_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideSettingsModelApiClick:e=>{let t={key:"ide_settings_model_api_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)},ideSettingsModelApiVerifyClick:e=>{let t={key:"ide_settings_model_api_verify_click",data:e};s.i[i._.GIO](t),s.i[i._.GA4](t),s.i[i._.CONSOLE](t),s.i[i._.SELF_DB](t)}}},17421:(e,t,n)=>{var s=n(9673),i="string"==typeof s?[[e.id,s,""]]:s;(t=e.exports=s.locals||{})._getContent=function(){return i},t._getCss=function(){return""+s}},84231:(e,t,n)=>{var s=n(88235),i="string"==typeof s?[[e.id,s,""]]:s;(t=e.exports=s.locals||{})._getContent=function(){return i},t._getCss=function(){return""+s}},94884:(e,t,n)=>{var s=n(61512),i="string"==typeof s?[[e.id,s,""]]:s;(t=e.exports=s.locals||{})._getContent=function(){return i},t._getCss=function(){return""+s}},56361:(e,t,n)=>{var s=n(60357),i="string"==typeof s?[[e.id,s,""]]:s;(t=e.exports=s.locals||{})._getContent=function(){return i},t._getCss=function(){return""+s}},16310:(e,t,n)=>{var s=n(24666),i="string"==typeof s?[[e.id,s,""]]:s;(t=e.exports=s.locals||{})._getContent=function(){return i},t._getCss=function(){return""+s}},4454:(e,t,n)=>{var s=n(23346),i="string"==typeof s?[[e.id,s,""]]:s;(t=e.exports=s.locals||{})._getContent=function(){return i},t._getCss=function(){return""+s}}}]);